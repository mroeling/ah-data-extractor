(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();function cd(){Symbol.metadata??=Symbol.for("Symbol.metadata")}const es={get(i,e){return e[Symbol.metadata]?.[i]},define(i,e,...t){let s=Object.getOwnPropertyDescriptor(e,Symbol.metadata)?.value;s==null&&Object.defineProperty(e,Symbol.metadata,{value:s=Object.create(null),enumerable:!0,configurable:!0,writable:!0});const n=t.length;switch(n){case 0:throw new Error("At least one key must be provided");case 1:s[t[0]]=i;return;case 2:s[t[0]]=s[t[1]]=i;return;default:{for(let r=0;r<n;++r)s[t[r]]=i;return}}},has(i,e){const t=e[Symbol.metadata];return t==null?!1:i in t}},wn=Object.freeze,ac=Object.assign,hd=String,Et=es.get,dn=es.define,ke=i=>i instanceof Promise,we=i=>i instanceof Array,$i=i=>i instanceof Set,us=i=>i instanceof Map,lc=i=>i instanceof Object;function Un(i){return typeof i=="object"&&i!==null||typeof i=="function"}const ee=i=>typeof i=="function",G=i=>typeof i=="string",ud=i=>typeof i=="symbol",dd=i=>typeof i=="number",se=()=>Object.create(null),Yt=Object.is,$e=(i,...e)=>{const t=hd(i).padStart(4,"0"),s=pd(i,...e),n=`https://docs.aurelia.io/developer-guides/error-messages/0001-to-0023/aur${t}`;return new Error(`AUR${t}: ${s}\\n\\nFor more information, see: ${n}`)},fd={1:"No registration for interface: '{{0}}'",2:`'{{0}}' was registered with "none" resolver, are you injecting the right key?`,3:"Cyclic dependency found: {{0}}",4:"Resolver for {{0}} returned a null factory",5:"Invalid resolver strategy specified: {{0}}. Did you assign an invalid strategy value?",6:"Unable to autoregister dependency: {{0}}",7:'Resource key "{{0}}" already registered',8:"Unable to resolve key: {{0}}",9:"Attempted to jitRegister something that is not a constructor: '{{0}}'. Did you forget to register this resource?",10:'Attempted to jitRegister an intrinsic type: "{{0}}". Did you forget to add @inject(Key)',11:"Invalid resolver, null/undefined returned from the static register method.",12:"Attempted to jitRegister an interface: {{0}}",13:"Cannot call resolve '{{0}}' before calling prepare or after calling dispose.",14:"Key cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?A common cause is circular dependency with bundler, did you accidentally introduce circular dependency into your module graph?",15:"'{{0}}' is a native function and cannot be safely constructed by DI. If this is intentional, please use a callback or cachedCallback resolver.",16:'There is not a currently active container to resolve "{{0}}". Are you trying to "new Class(...)" that has a resolve(...) call?',17:"Failed to instantiate '{{0}}' via @newInstanceOf/@newInstanceForScope, there's no registration and no default implementation, or the default implementation does not result in factory for constructing the instances.",18:"Invalid channel name or instance: '{{0}}'.",19:"Invalid channel name or type: {{0}}.",20:"No defined value found when calling firstDefined()",21:"Invalid module transform input: {{0}}. Expected Promise or Object.",22:"The @inject decorator on the target ('{{0}}') type '{{1}}' is not supported.",23:"Resource key '{{0}}' has already been registered."},pd=(i,...e)=>{let t=fd[i];for(let s=0;s<e.length;++s)t=t.replace(`{{${s}}}`,String(e[s]));return t},yi=(...i)=>globalThis.console.error(...i),fn=(()=>{const i={};let e=!1,t=0,s=0,n=0;return r=>{switch(typeof r){case"number":return r>=0&&(r|0)===r;case"string":if(e=i[r],e!==void 0)return e;if(t=r.length,t===0)return i[r]=!1;for(s=0,n=0;n<t;++n)if(s=r.charCodeAt(n),n===0&&s===48&&t>1||s<48||s>57)return i[r]=!1;return i[r]=!0;default:return!1}}})(),cc=(function(){const i=ac(se(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0}),e=t=>t===""?0:t!==t.toUpperCase()?3:t!==t.toLowerCase()?2:i[t]===!0?1:0;return(t,s)=>{const n=t.length;if(n===0)return t;let r=!1,o="",a,c="",l=0,h=t.charAt(0),u=e(h),d=0;for(;d<n;++d)a=l,c=h,l=u,h=t.charAt(d+1),u=e(h),l===0?o.length>0&&(r=!0):(!r&&o.length>0&&l===2&&(r=a===3||u===3),o+=s(c,r),r=!1);return o}})(),Te=(function(){const i=se(),e=(t,s)=>s?t.toUpperCase():t.toLowerCase();return t=>{let s=i[t];return s===void 0&&(s=i[t]=cc(t,e)),s}})(),hc=(function(){const i=se();return e=>{let t=i[e];return t===void 0&&(t=Te(e),t.length>0&&(t=t[0].toUpperCase()+t.slice(1)),i[e]=t),t}})(),uc=(function(){const i=se(),e=(t,s)=>s?`-${t.toLowerCase()}`:t.toLowerCase();return t=>{let s=i[t];return s===void 0&&(s=i[t]=cc(t,e)),s}})(),Rr=i=>{const e=i.length,t=Array(e);let s=0;for(;s<e;++s)t[s]=i[s];return t},ei=(i,e)=>{const t=e.name;e.addInitializer(function(){Reflect.defineProperty(this,t,{value:i.bind(this),writable:!0,configurable:!0,enumerable:!1})})},ye=(...i)=>{const e=[];let t=0;const s=i.length;let n=0,r,o=0;for(;o<s;++o)if(r=i[o],r!==void 0){n=r.length;let a=0;for(;a<n;++a)e[t++]=r[a]}return e},as=(...i)=>{const e=i.length;let t,s=0;for(;e>s;++s)if(t=i[s],t!==void 0)return t;throw $e(20)},gd=(function(){const i=Function.prototype,e=Object.getPrototypeOf,t=new WeakMap;let s=i,n=0,r;return function(o){if(r=t.get(o),r===void 0)for(t.set(o,r=[s=o]),n=0;(s=e(s))!==i;)r[++n]=s;return r}})();function co(...i){return ac(se(),...i)}const Da=(()=>{const i=new WeakMap;let e=!1,t="",s=0;return n=>(e=i.get(n),e==null&&(s=(t=n.toString()).length,e=s>28&&t.indexOf("[native code] }")===s-15,i.set(n,e)),e)})(),H=(i,e)=>ke(i)?i.then(e):e(i),Se=(...i)=>{let e,t,s,n=0,r=i.length;for(;n<r;++n)e=i[n],ke(e=i[n])&&(t===void 0?t=e:s===void 0?s=[t,e]:s.push(e));return s===void 0?t:Promise.all(s)},md=(i,e)=>new bt(i,0,e),pn=(i,e)=>new bt(i,1,e),dc=(i,e)=>new bt(i,2,e),bd=(i,e)=>new bt(i,3,e),_d=(i,e)=>new bt(i,3,fc(e)),Wn=(i,e)=>new bt(e,5,i),vd=(i,...e)=>new Ld(i,e),Ma=new WeakMap,fc=i=>(e,t,s)=>{let n=Ma.get(e);if(n===void 0&&Ma.set(e,n=new WeakMap),n.has(s))return n.get(s);const r=i(e,t,s);return n.set(s,r),r},Hs={instance:md,singleton:pn,transient:dc,callback:bd,cachedCallback:_d,aliasTo:Wn,defer:vd},yn=function(i){return function(t){t.register(pn(this,this),Wn(this,i))}},js="au:annotation",ds=(i,e)=>e===void 0?`${js}:${i}`:`${js}:${i}:${e}`,wd=(i,e)=>{const t=Et(js,i);t===void 0?dn([e],i,js):t.push(e)},yd=wn({name:"au:annotation",appendTo:wd,set(i,e,t){dn(t,i,ds(e))},get:(i,e)=>Et(ds(e),i),getKeys(i){let e=Et(js,i);return e===void 0&&dn(e=[],i,js),e},isKey:i=>i.startsWith(js),keyFor:ds}),$t="au:resource",Js=(i,e,t)=>`${$t}:${i}`,pc={annotation:yd},gc=Object.prototype.hasOwnProperty;function Ge(i,e,t,s){let n=Et(ds(i),t);return n===void 0?(n=e[i],n===void 0?(n=t[i],n===void 0||!gc.call(t,i)?s():n):n):n}function pt(i,e,t){let s=Et(ds(i),e);return s===void 0?(s=e[i],s===void 0||!gc.call(e,i)?t():s):s}function Ct(i,e,t){const s=e[i];return s===void 0?t():s}const Dt=Symbol.for("au:registrable"),kd={singleton:i=>new bt(i,1,i)};class Tt{constructor(e,t){this.inheritParentResources=e,this.defaultResolver=t}static from(e){return e===void 0||e===Tt.DEFAULT?Tt.DEFAULT:new Tt(e.inheritParentResources??!1,e.defaultResolver??kd.singleton)}}Tt.DEFAULT=Tt.from({});const Cd=i=>new Ki(null,Tt.from(i)),xd=new Set("Array ArrayBuffer Boolean DataView Date Error EvalError Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Number Object Promise RangeError ReferenceError RegExp Set SharedArrayBuffer String SyntaxError TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array URIError WeakMap WeakSet".split(" "));let Ad=0,ue=null;class Ki{get depth(){return this._parent===null?0:this._parent.depth+1}get parent(){return this._parent}constructor(e,t){if(this.id=++Ad,this._registerDepth=0,this._disposableResolvers=new Map,this._parent=e,this.config=t,this._resolvers=new Map,this.res={},e===null)this.root=this,this._factories=new Map;else if(this.root=e.root,this._factories=e._factories,t.inheritParentResources)for(const s in e.res)this.registerResolver(s,e.res[s]);this._resolvers.set(kn,$d)}register(...e){if(++this._registerDepth===100)throw $e(6,...e);let t,s,n,r,o,a=0,c=e.length,l;for(;a<c;++a)if(t=e[a],!!Un(t))if(ji(t))t.register(this);else if((l=Et($t,t))!=null)l.register(this);else if(Td(t)){const h=t[Symbol.metadata]?.[Dt];if(ji(h))h.register(this);else if(G(t.$au?.type)){const u=t.$au,d=(t.aliases??U).concat(u.aliases??U);let g=`${$t}:${u.type}:${u.name}`;if(this.has(g,!1)){globalThis.console?.warn($e(7,g));continue}for(Wn(t,g).register(this),this.has(t,!1)||pn(t,t).register(this),r=0,o=d.length;r<o;++r){if(g=`${$t}:${u.type}:${d[r]}`,this.has(g,!1)){globalThis.console?.warn($e(7,g));continue}Wn(t,g).register(this)}}else pn(t,t).register(this)}else for(s=Object.keys(t),r=0,o=s.length;r<o;++r)n=t[s[r]],Un(n)&&(ji(n)?n.register(this):this.register(n));return--this._registerDepth,this}registerResolver(e,t,s=!1){Li(e);const n=this._resolvers,r=n.get(e);if(r==null){if(n.set(e,t),Pr(e)){if(this.res[e]!==void 0)throw $e(7,e);this.res[e]=t}}else r instanceof bt&&r._strategy===4?r._state.push(t):n.set(e,new bt(e,4,[r,t]));return s&&this._disposableResolvers.set(e,t),t}deregister(e){Li(e);const t=this._resolvers.get(e);t!=null&&(this._resolvers.delete(e),Pr(e)&&delete this.res[e],this._disposableResolvers.has(e)&&(t.dispose(),this._disposableResolvers.delete(e)))}registerTransformer(e,t){const s=this.getResolver(e);if(s==null)return!1;if(s.getFactory){const n=s.getFactory(this);return n==null?!1:(n.registerTransformer(t),!0)}return!1}getResolver(e,t=!0){if(Li(e),e.resolve!==void 0)return e;const s=ue;let n=ue=this,r,o;try{for(;n!=null;)if(r=n._resolvers.get(e),r==null){if(n._parent==null)return o=ja(e)?this:n,t?this._jitRegister(e,o):null;n=n._parent}else return r}finally{ue=s}return null}has(e,t=!1){return this._resolvers.has(e)||Pr(e)&&e in this.res||((t&&this._parent?.has(e,!0))??!1)}get(e){if(Li(e),e.$isResolver)return e.resolve(this,this);const t=ue;let s=ue=this,n,r;try{for(;s!=null;)if(n=s._resolvers.get(e),n==null){if(s._parent==null)return r=ja(e)?this:s,n=this._jitRegister(e,r),n.resolve(s,this);s=s._parent}else return n.resolve(s,this)}finally{ue=t}throw $e(8,e)}getAll(e,t=!1){Li(e);const s=ue,n=ue=this;let r=n,o,a=U;try{if(t){for(;r!=null;)o=r._resolvers.get(e),o!=null&&(a=a.concat(Na(o,r,n))),r=r._parent;return a}for(;r!=null;)if(o=r._resolvers.get(e),o==null){if(r=r._parent,r==null)return U}else return Na(o,r,n)}finally{ue=s}return U}invoke(e,t){if(Da(e))throw $e(15,e);const s=ue;ue=this;{let n,r;try{n=hi(e).map(o=>this.get(r=o))}catch(o){throw yi(`[DEV:aurelia] Error during construction of ${e.name?e.name:`(Anonymous) ${String(e)}`}, caused by dependency: ${String(r)}`),ue=s,o}try{return t===void 0?new e(...n):new e(...n,...t)}catch(o){throw yi(`[DEV:aurelia] Error during construction of ${e.name?e.name:`(Anonymous) ${String(e)}`}`),o}finally{ue=s}}try{return t===void 0?new e(...hi(e).map(gn,this)):new e(...hi(e).map(gn,this),...t)}finally{ue=s}}hasFactory(e){return this._factories.has(e)}getFactory(e){let t=this._factories.get(e);if(t===void 0){if(Da(e))throw $e(15,e);this._factories.set(e,t=new Sd(e,hi(e)))}return t}registerFactory(e,t){this._factories.set(e,t)}createChild(e){return e===void 0&&this.config.inheritParentResources?this.config===Tt.DEFAULT?new Ki(this,this.config):new Ki(this,Tt.from({...this.config,inheritParentResources:!1})):new Ki(this,Tt.from(e??this.config))}disposeResolvers(){const e=this._resolvers,t=this._disposableResolvers;let s,n;for([n,s]of t.entries())s.dispose?.(),e.delete(n);t.clear()}useResources(e){const t=e.res;for(const s in t)this.registerResolver(s,t[s])}find(e,t){const s=G(t)?`${$t}:${e}:${t}`:e;let n=this,r=n.res[s];return r==null&&(n=n.root,r=n.res[s]),r==null?null:r.getFactory?.(n)?.Type??null}dispose(){this._disposableResolvers.size>0&&this.disposeResolvers(),this._resolvers.clear(),this.root===this&&(this._factories.clear(),this.res={})}_jitRegister(e,t){const s=ji(e);if(!ee(e)&&!s)throw $e(9,e);if(xd.has(e.name))throw $e(10,e);if(s){const r=e.register(t,e);if(!(r instanceof Object)||r.resolve==null){const o=t._resolvers.get(e);if(o!=null)return o;throw $e(11,e)}return r}if(e.$isInterface)throw $e(12,e.friendlyName);const n=this.config.defaultResolver(e,t);return t._resolvers.set(e,n),n}}class Sd{constructor(e,t){this.Type=e,this.dependencies=t,this.transformers=null}construct(e,t){const s=ue;ue=e;let n;{let r,o;try{r=this.dependencies.map(a=>e.get(o=a))}catch(a){throw yi(`[DEV:aurelia] Error during construction of ${this.Type.name?this.Type.name:`(Anonymous) ${String(this.Type)}`}, caused by dependency: ${String(o)}`),ue=s,a}try{return t===void 0?n=new this.Type(...r):n=new this.Type(...r,...t),this.transformers==null?n:this.transformers.reduce(Fa,n)}catch(a){throw yi(`[DEV:aurelia] Error during construction of ${this.Type.name?this.Type.name:`(Anonymous) ${String(this.Type)}`}`),a}finally{ue=s}}try{return t===void 0?n=new this.Type(...this.dependencies.map(gn,e)):n=new this.Type(...this.dependencies.map(gn,e),...t),this.transformers==null?n:this.transformers.reduce(Fa,n)}finally{ue=s}}registerTransformer(e){(this.transformers??=[]).push(e)}}function Fa(i,e){return e(i)}function Li(i){if(i==null)throw $e(14)}function gn(i){return this.get(i)}function $(...i){if(ue==null)throw $e(16,...i);if(i.length===1)try{return ue.get(i[0])}catch(e){throw yi(`[DEV:aurelia] resolve() call error for: ${String(i[0])}`),e}else{let e;try{return i.map(t=>ue.get(e=t))}catch(t){throw yi(`[DEV:aurelia] resolve() call error for: ${String(e)}`),t}}return i.length===1?ue.get(i[0]):i.map(gn,ue)}const Na=(i,e,t)=>{if(i instanceof bt&&i._strategy===4){const s=i._state,n=s.length,r=Array(n);let o=0;for(;o<n;++o)r[o]=s[o].resolve(e,t);return r}return[i.resolve(e,t)]},$d={$isResolver:!0,resolve(i,e){return e}},ji=i=>ee(i?.register),Id=i=>ji(i)&&typeof i.registerInRequestor=="boolean",ja=i=>Id(i)&&i.registerInRequestor,Td=i=>i.prototype!==void 0,Pr=i=>G(i)&&i.indexOf(":")>0;class Ed{constructor(e,t){this._container=e,this._key=t}instance(e){return this._registerResolver(0,e)}singleton(e){return this._registerResolver(1,e)}transient(e){return this._registerResolver(2,e)}callback(e){return this._registerResolver(3,e)}cachedCallback(e){return this._registerResolver(3,fc(e))}aliasTo(e){return this._registerResolver(5,e)}_registerResolver(e,t){const{_container:s,_key:n}=this;return this._container=this._key=void 0,s.registerResolver(n,new bt(n,e,t))}}const Di=i=>{const e=i.slice(),t=Object.keys(i),s=t.length;let n;for(let r=0;r<s;++r)n=t[r],fn(n)||(e[n]=i[n]);return e},mc=ds("di:paramtypes"),Bd=i=>Et(mc,i),bc=i=>Et("design:paramtypes",i),Va=i=>i.metadata[mc]??=[],hi=i=>{const e=ds("di:dependencies");let t=Et(e,i);if(t===void 0){const s=i.inject;if(s===void 0){const n=bc(i),r=Bd(i);if(n===void 0)if(r===void 0){const o=Object.getPrototypeOf(i);ee(o)&&o!==Function.prototype?t=Di(hi(o)):t=[]}else t=Di(r);else if(r===void 0)t=Di(n);else{t=Di(n);let o=r.length,a,c=0;for(;c<o;++c)a=r[c],a!==void 0&&(t[c]=a);const l=Object.keys(r);let h;for(c=0,o=l.length,c=0;c<o;++c)h=l[c],fn(h)||(t[h]=r[h])}}else t=Di(s);dn(t,i,e)}return t},vs=(i,e)=>{const t=ee(i)?i:e,s=(G(i)?i:void 0)??"(anonymous)",n={$isInterface:!0,friendlyName:s,toString:()=>`InterfaceSymbol<${s}>`,register:t!=null?(r,o)=>t(new Ed(r,o??n)):void 0};return n},zo=(...i)=>(e,t)=>{switch(t.kind){case"class":{const s=Va(t);let n,r=0;for(;r<i.length;++r)n=i[r],n!==void 0&&(s[r]=n);break}case"field":{const s=Va(t),n=i[0];n!==void 0&&(s[t.name]=n);break}default:throw $e(22,String(t.name),t.kind)}},ws=(cd(),{createContainer:Cd,getDesignParamtypes:bc,getDependencies:hi,createInterface:vs,inject:zo,transient(i){return i.register=function(e){return dc(i,i).register(e,i)},i.registerInRequestor=!1,i},singleton(i,e=Od){return i.register=function(t){return pn(i,i).register(t,i)},i.registerInRequestor=e.scoped,i}}),kn=vs("IContainer"),Rd=kn;function Ha(i,e){return ws.transient(i)}function Pd(i,e){return i==null?Ha:Ha(i)}const Od={scoped:!1};class bt{get $isResolver(){return!0}constructor(e,t,s){this._resolving=!1,this._cachedFactory=null,this._key=e,this._strategy=t,this._state=s}register(e,t){return e.registerResolver(t||this._key,this)}resolve(e,t){switch(this._strategy){case 0:return this._state;case 1:{if(this._resolving)throw $e(3,this._state.name);return this._resolving=!0,this._state=(this._cachedFactory=e.getFactory(this._state)).construct(t),this._strategy=0,this._resolving=!1,this._state}case 2:{const s=e.getFactory(this._state);if(s===null)throw $e(4,this._key);return s.construct(t)}case 3:return this._state(e,t,this);case 4:return this._state[0].resolve(e,t);case 5:return t.get(this._state);default:throw $e(5,this._strategy)}}getFactory(e){switch(this._strategy){case 1:case 2:return e.getFactory(this._state);case 5:return e.getResolver(this._state)?.getFactory?.(e)??null;case 0:return this._cachedFactory;default:return null}}}class Ce{get friendlyName(){return this._name}constructor(e,t=null,s=null){this._name=e,this._instance=t,this._Type=s}prepare(e){this._instance=e}get $isResolver(){return!0}resolve(){if(this._instance==null)throw $e(13,this._name);return this._instance}getFactory(e){return this._Type==null?null:e.getFactory(this._Type)}dispose(){this._instance=null}}class Ld{constructor(e,t){this.key=e,this.params=t}register(e){e.has(this.key,!0)?e.get(this.key).register(e,...this.params):e.register(...this.params.filter(t=>typeof t=="object"))}}const U=wn([]),Dd=wn({});function ut(){}const Ii=vs("IPlatform");function Cn(i){return function(e){function t(s,n){zo(t)(s,n)}return t.$isResolver=!0,t.resolve=function(s,n){return i(e,s,n)},t}}const Uo=(i,e=!1)=>{function t(s,n){zo(t)(s,n)}return t.$isResolver=!0,t.resolve=(s,n)=>n.getAll(i,e),t},_c=Cn((i,e,t)=>{if(t.has(i,!0))return t.get(i)}),Md=Cn((i,e,t)=>t.has(i,!1)?t.get(i):void 0),ki=Cn((i,e,t)=>t.has(i,!1)?t.get(i):t.root.get(i)),Fd=Cn((i,e,t)=>t.has(i,!1)?t.get(i):t.root.has(i,!1)?t.root.get(i):void 0),Nd=Cn((i,e,t)=>t===t.root?t.getAll(i,!1):t.has(i,!1)?t.getAll(i,!1).concat(t.root.getAll(i,!1)):t.root.getAll(i,!1));function ti(i,e,t,s,n,r){function o(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var a=s.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=i?s.static?i:i.prototype:null,h=l?Object.getOwnPropertyDescriptor(l,s.name):{},u,d=!1,g=t.length-1;g>=0;g--){var m={};for(var p in s)m[p]=p==="access"?{}:s[p];for(var p in s.access)m.access[p]=s.access[p];m.addInitializer=function(w){if(d)throw new TypeError("Cannot add initializers after decoration has completed");r.push(o(w||null))};var f=(0,t[g])(a==="accessor"?{get:h.get,set:h.set}:h[c],m);if(a==="accessor"){if(f===void 0)continue;if(f===null||typeof f!="object")throw new TypeError("Object expected");(u=o(f.get))&&(h.get=u),(u=o(f.set))&&(h.set=u),(u=o(f.init))&&n.unshift(u)}else(u=o(f))&&(a==="field"?n.unshift(u):h[c]=u)}l&&Object.defineProperty(l,s.name,h),d=!0}function jd(i,e,t){for(var s=arguments.length>2,n=0;n<e.length;n++)t=s?e[n].call(i,t):e[n].call(i);return s?t:void 0}const Qi=0,Gi=1,Xi=2,bi=3,Yi=4,Ji=5,Vd=6,Hd=wn({trace:Qi,debug:Gi,info:Xi,warn:bi,error:Yi,fatal:Ji,none:Vd}),vc=vs("ILogConfig",i=>i.instance(new Kd("no-colors",bi))),zd=vs("ISink"),Ud=vs("ILogEventFactory",i=>i.singleton(Gd)),zs=vs("ILogger",i=>i.singleton(Xd)),Wd=vs("ILogScope"),qd=wn({key:ds("logger-sink-handles"),define(i,e){dn(e.handles,i,this.key)},getHandles(i){return Et(this.key,i.constructor)}}),Wt=co({red(i){return`\x1B[31m${i}\x1B[39m`},green(i){return`\x1B[32m${i}\x1B[39m`},yellow(i){return`\x1B[33m${i}\x1B[39m`},blue(i){return`\x1B[34m${i}\x1B[39m`},magenta(i){return`\x1B[35m${i}\x1B[39m`},cyan(i){return`\x1B[36m${i}\x1B[39m`},white(i){return`\x1B[37m${i}\x1B[39m`},grey(i){return`\x1B[90m${i}\x1B[39m`}});class Kd{constructor(e,t){this.colorOptions=e,this.level=t}}const Or=(function(){const i={"no-colors":co({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),colors:co({TRC:Wt.grey("TRC"),DBG:Wt.grey("DBG"),INF:Wt.white("INF"),WRN:Wt.yellow("WRN"),ERR:Wt.red("ERR"),FTL:Wt.red("FTL"),QQQ:Wt.grey("???")})};return(e,t)=>e<=Qi?i[t].TRC:e<=Gi?i[t].DBG:e<=Xi?i[t].INF:e<=bi?i[t].WRN:e<=Yi?i[t].ERR:e<=Ji?i[t].FTL:i[t].QQQ})(),za=(i,e)=>e==="no-colors"?i.join("."):i.map(Wt.cyan).join("."),Lr=(i,e)=>e==="no-colors"?new Date(i).toISOString():Wt.grey(new Date(i).toISOString());class Qd{constructor(e,t,s,n,r,o){this.severity=e,this.message=t,this.optionalParams=s,this.scope=n,this.colorOptions=r,this.timestamp=o}toString(){const{severity:e,message:t,scope:s,colorOptions:n,timestamp:r}=this;return s.length===0?`${Lr(r,n)} [${Or(e,n)}] ${t}`:`${Lr(r,n)} [${Or(e,n)} ${za(s,n)}] ${t}`}getFormattedLogInfo(e=!1){const{severity:t,message:s,scope:n,colorOptions:r,timestamp:o,optionalParams:a}=this;let c=null,l="";e&&s instanceof Error?c=s:l=s;const h=n.length===0?"":` ${za(n,r)}`;let u=`${Lr(o,r)} [${Or(t,r)}${h}] ${l}`;if(a===void 0||a.length===0)return c===null?[u]:[u,c];let d=0;for(;u.includes("%s");)u=u.replace("%s",String(a[d++]));return c!==null?[u,c,...a.slice(d)]:[u,...a.slice(d)]}}class Gd{constructor(){this.config=$(vc)}createLogEvent(e,t,s,n){return new Qd(t,s,n,e.scope,this.config.colorOptions,Date.now())}}let Xd=(()=>{var i;let e=[],t,s,n,r,o,a;return i=class{constructor(l=$(vc),h=$(Ud),u=$(Uo(zd)),d=$(_c(Wd))??[],g=null){this.scope=(jd(this,e),d),this._scopedLoggers=se();let m,p,f,w,T,R;if(this.config=l,this._factory=h,this.sinks=u,g===null){this.root=this,this.parent=this,m=this._traceSinks=[],p=this._debugSinks=[],f=this._infoSinks=[],w=this._warnSinks=[],T=this._errorSinks=[],R=this._fatalSinks=[];for(const S of u){const x=qd.getHandles(S);(x?.includes(Qi)??!0)&&m.push(S),(x?.includes(Gi)??!0)&&p.push(S),(x?.includes(Xi)??!0)&&f.push(S),(x?.includes(bi)??!0)&&w.push(S),(x?.includes(Yi)??!0)&&T.push(S),(x?.includes(Ji)??!0)&&R.push(S)}}else this.root=g.root,this.parent=g,m=this._traceSinks=g._traceSinks,p=this._debugSinks=g._debugSinks,f=this._infoSinks=g._infoSinks,w=this._warnSinks=g._warnSinks,T=this._errorSinks=g._errorSinks,R=this._fatalSinks=g._fatalSinks}trace(l,...h){this.config.level<=Qi&&this._emit(this._traceSinks,Qi,l,h)}debug(l,...h){this.config.level<=Gi&&this._emit(this._debugSinks,Gi,l,h)}info(l,...h){this.config.level<=Xi&&this._emit(this._infoSinks,Xi,l,h)}warn(l,...h){this.config.level<=bi&&this._emit(this._warnSinks,bi,l,h)}error(l,...h){this.config.level<=Yi&&this._emit(this._errorSinks,Yi,l,h)}fatal(l,...h){this.config.level<=Ji&&this._emit(this._fatalSinks,Ji,l,h)}scopeTo(l){const h=this._scopedLoggers;let u=h[l];return u===void 0&&(u=h[l]=new i(this.config,this._factory,null,this.scope.concat(l),this)),u}_emit(l,h,u,d){const g=ee(u)?u():u,m=this._factory.createLogEvent(this,h,g,d);for(let p=0,f=l.length;p<f;++p)l[p].handleEvent(m)}},(()=>{const c=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;t=[ei],s=[ei],n=[ei],r=[ei],o=[ei],a=[ei],ti(i,null,t,{kind:"method",name:"trace",static:!1,private:!1,access:{has:l=>"trace"in l,get:l=>l.trace},metadata:c},null,e),ti(i,null,s,{kind:"method",name:"debug",static:!1,private:!1,access:{has:l=>"debug"in l,get:l=>l.debug},metadata:c},null,e),ti(i,null,n,{kind:"method",name:"info",static:!1,private:!1,access:{has:l=>"info"in l,get:l=>l.info},metadata:c},null,e),ti(i,null,r,{kind:"method",name:"warn",static:!1,private:!1,access:{has:l=>"warn"in l,get:l=>l.warn},metadata:c},null,e),ti(i,null,o,{kind:"method",name:"error",static:!1,private:!1,access:{has:l=>"error"in l,get:l=>l.error},metadata:c},null,e),ti(i,null,a,{kind:"method",name:"fatal",static:!1,private:!1,access:{has:l=>"fatal"in l,get:l=>l.fatal},metadata:c},null,e),c&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:c})})(),i})();const wc="AccessThis",Yd="AccessBoundary",Wo="AccessGlobal",qo="AccessScope",Jd="ArrayLiteral",Zd="ObjectLiteral",ef="PrimitiveLiteral",tf="New",sf="Template",nf="Unary",rf="CallScope",of="CallMember",af="CallFunction",lf="CallGlobal",ur="AccessMember",yc="AccessKeyed",cf="TaggedTemplate",hf="Binary",uf="Conditional",df="Assign",ff="ArrowFunction",pf="ValueConverter",gf="BindingBehavior",kc="ArrayBindingPattern",Cc="ObjectBindingPattern",xc="BindingIdentifier",mf="ForOfStatement",bf="Interpolation",Ac="ArrayDestructuring",_f="ObjectDestructuring",vf="DestructuringAssignmentLeaf",wf="Custom";class Sc{constructor(e){this.value=e,this.$kind=wf}evaluate(...e){return this.value}assign(...e){return e}bind(...e){}unbind(...e){}accept(e){}}class yf{constructor(e,t,s){this.expression=e,this.name=t,this.args=s,this.$kind=gf,this.key=`_bb_${t}`}}class kf{constructor(e,t,s){this.expression=e,this.name=t,this.args=s,this.$kind=pf}}class Cf{constructor(e,t,s="="){this.target=e,this.value=t,this.op=s,this.$kind=df}}class xf{constructor(e,t,s){this.condition=e,this.yes=t,this.no=s,this.$kind=uf}}class Af{constructor(e){this.name=e,this.$kind=Wo}}class Zi{constructor(e=0){this.ancestor=e,this.$kind=wc}}class Sf{constructor(){this.$kind=Yd}}class en{constructor(e,t=0){this.name=e,this.ancestor=t,this.$kind=qo}}const $c=i=>i.$kind===Wo||(i.$kind===ur||i.$kind===yc)&&i.accessGlobal;class ho{constructor(e,t,s=!1){this.object=e,this.name=t,this.optional=s,this.$kind=ur,this.accessGlobal=$c(e)}}class Ic{constructor(e,t,s=!1){this.object=e,this.key=t,this.optional=s,this.$kind=yc,this.accessGlobal=$c(e)}}class $f{constructor(e,t){this.func=e,this.args=t,this.$kind=tf}}class Tc{constructor(e,t,s=0,n=!1){this.name=e,this.args=t,this.ancestor=s,this.optional=n,this.$kind=rf}}class qn{constructor(e,t,s,n=!1,r=!1){this.object=e,this.name=t,this.args=s,this.optionalMember=n,this.optionalCall=r,this.$kind=of}}class Dn{constructor(e,t,s=!1){this.func=e,this.args=t,this.optional=s,this.$kind=af}}class If{constructor(e,t){this.name=e,this.args=t,this.$kind=lf}}class Tf{constructor(e,t,s){this.operation=e,this.left=t,this.right=s,this.$kind=hf}}class Ua{constructor(e,t,s=0){this.operation=e,this.expression=t,this.pos=s,this.$kind=nf}}class Ee{constructor(e){this.value=e,this.$kind=ef}}Ee.$undefined=new Ee(void 0);Ee.$null=new Ee(null);Ee.$true=new Ee(!0);Ee.$false=new Ee(!1);Ee.$empty=new Ee("");class uo{constructor(e){this.elements=e,this.$kind=Jd}}uo.$empty=new uo(U);class fo{constructor(e,t){this.keys=e,this.values=t,this.$kind=Zd}}fo.$empty=new fo(U,U);class Kn{constructor(e,t=U){this.cooked=e,this.expressions=t,this.$kind=sf}}Kn.$empty=new Kn([""]);class Ec{constructor(e,t,s,n=U){this.cooked=e,this.func=s,this.expressions=n,this.$kind=cf,e.raw=t}}class Ef{constructor(e){this.elements=e,this.$kind=kc}}class Bf{constructor(e,t){this.keys=e,this.values=t,this.$kind=Cc}}class Qn{constructor(e){this.name=e,this.$kind=xc}}class Rf{constructor(e,t,s){this.declaration=e,this.iterable=t,this.semiIdx=s,this.$kind=mf}}class Pf{constructor(e,t=U){this.parts=e,this.expressions=t,this.$kind=bf,this.isMulti=t.length>1,this.firstExpression=t[0]}}class Of{constructor(e,t,s,n){this.$kind=e,this.list=t,this.source=s,this.initializer=n}}class Bc{constructor(e,t,s){this.target=e,this.source=t,this.initializer=s,this.$kind=vf}}class po{constructor(e,t,s=!1){this.args=e,this.body=t,this.rest=s,this.$kind=ff}}const go=String,Mn=()=>Object.create(null),re=(i,...e)=>new Error(`AUR${go(i).padStart(4,"0")}: ${Df(i,...e)}`),Lf={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",151:'Expression error: invalid start: "{{0}}"',152:'Expression error: spread operator is not supported: "{{0}}"',153:'Expression error: expected identifier: "{{0}}"',154:'Expression error: invalid member expression: "{{0}}"',155:'Expression error: unexpected end of expression: "{{0}}"',156:'Expression error: unconsumed token: "{{0}}" at position {{1}} of "{{2}}"',157:"Expression error: invalid empty expression. Empty expression is only valid in event bindings (trigger, delegate, capture etc...)",158:'Expression error: left hand side of expression is not assignable: "{{0}}"',159:'Expression error: expected identifier to come after value converter operator: "{{0}}"',160:"Expression error: expected identifier to come after binding behavior operator: {{0}}",161:'Expression error: unexpected keyword "of": "{{0}}"',162:'Expression error: unexpected keyword "import": "{{0}}"',163:'Expression error: invalid BindingIdentifier at left hand side of "of": "{{0}}" | kind: {{1}}',164:'Expression error: invalid or unsupported property definition in object literal: "{{0}}"',165:'Expression error: unterminated quote in string literal: "{{0}}"',166:'Expression error: unterminated template string: "{{0}}"',167:'Expression error: missing expected token "{{0}}" in "{{1}}"',168:'Expression error: unexpected character: "{{0}}"',170:'Expression error: unexpected "{{0}}" at position "{{1}}" for destructuring assignment in "{{2}}"',171:'Expression error: unexpected {{0}} at position "{{1}}" for optional chain in "{{2}}"',172:'Expression error: invalid tagged template on optional chain in "{{1}}"',173:'Expression error: invalid arrow parameter list in "{{0}}"',174:'Expression error: arrow function with default parameters is not supported: "{{0}}"',175:'Expression error: arrow function with destructuring parameters is not supported: "{{0}}"',176:'Expression error: rest parameter must be last formal parameter in arrow function: "{{0}}"',178:'Expression error: arrow function with function body is not supported: "{{0}}"',179:`Expression error: unexpected token '.' at position "{{1}}" in "{{0}}"`},Df=(i,...e)=>{let t=Lf[i];for(let s=0;s<e.length;++s){const n=new RegExp(`{{${s}(:.*)?}}`,"g");let r=n.exec(t);for(;r!=null;){const o=r[1]?.slice(1);let a=e[s];if(a!=null)switch(o){case"toString":a=Object.prototype.toString.call(a);break;case"join(!=)":a=a.join("!=");break;case"element":a=a==="*"?"all elements":`<${a} />`;break;default:o?.startsWith(".")?a=go(a[o.slice(1)]):a=go(a)}t=t.slice(0,r.index)+a+t.slice(n.lastIndex),r=n.exec(t)}}return t},Ti=ws.createInterface("IExpressionParser");class Rc{constructor(){this._expressionLookup=Mn(),this._forOfLookup=Mn(),this._interpolationLookup=Mn()}parse(e,t){let s;switch(t){case Lc:return new Sc(e);case Gn:return s=this._interpolationLookup[e],s===void 0&&(s=this._interpolationLookup[e]=this.$parse(e,t)),s;case Kt:return s=this._forOfLookup[e],s===void 0&&(s=this._forOfLookup[e]=this.$parse(e,t)),s;default:{if(e.length===0){if(t===Vf||t===Wa)return Ee.$empty;throw ip()}return s=this._expressionLookup[e],s===void 0&&(s=this._expressionLookup[e]=this.$parse(e,t)),s}}}$parse(e,t){return Y=e,W=0,Bt=e.length,Je=0,Us=0,B=6291456,ae="",ie=Ws(0),Z=!0,X=!1,Vi=!0,Qo=-1,pe(61,t===void 0?Wa:t)}}Rc.register=yn(Ti);function Ko(i){switch(i){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return i}}const Mf=Ee.$false,Ff=Ee.$true,Nf=Ee.$null,Pc=Ee.$undefined,tn=new Zi(0),Dr=new Zi(1),jf=new Sf,Gt="None",Gn="Interpolation",Kt="IsIterator",Oc="IsChainable",Vf="IsFunction",Wa="IsProperty",Lc="IsCustom";let Y="",W=0,Bt=0,Je=0,Us=0,B=6291456,ae="",ie,Z=!0,X=!1,Vi=!0,Qo=-1;const mn=String.fromCharCode,Ws=i=>Y.charCodeAt(i),Xt=()=>Y.slice(Us,W),Hf="Infinity NaN isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent Array BigInt Boolean Date Map Number Object RegExp Set String JSON Math Intl".split(" ");function pe(i,e){if(e===Lc)return new Sc(Y);if(W===0){if(e===Gn)return Xf();if(F(),B&4194304)throw ep()}Z=577>i,X=!1,Vi=579>i;let t=!1,s,n=0;if(B&131072){const r=ni[B&63];F(),s=new Ua(r,pe(579,e)),Z=!1}else{e:switch(B){case 12296:n=Je,Z=!1,Vi=!1;do switch(F(),++n,B){case 65547:if(F(),(B&12288)===0)throw zt();break;case 12:case 13:throw zt();case 2162702:if(X=!0,F(),(B&12288)===0){s=n===0?tn:n===1?Dr:new Zi(n),t=!0;break e}break;default:if(B&2097152){s=n===0?tn:n===1?Dr:new Zi(n);break e}throw tp()}while(B===12296);case 4096:{const r=ae;if(e===Kt)s=new Qn(r);else if(Vi&&Hf.includes(r))s=new Af(r);else{if(Vi&&r==="import")throw lp();s=new en(r,n)}if(Z=!X,F(),xt(53)){if(B===524298)throw jc();const o=X,a=Je;++Je;const c=pe(62,Gt);X=o,Je=a,Z=!1,s=new po([new Qn(r)],c)}break}case 12:throw fp();case 13:throw mo();case 12293:switch(Z=!1,F(),Je){case 0:s=tn;break;case 1:s=Dr;break;default:s=new Zi(Je);break}break;case 12294:Z=!1,F(),s=jf;break;case 2688009:s=Wf(e);break;case 2688020:s=Y.search(/\s+of\s+/)>W?zf():qf(e);break;case 524298:s=Gf(e);break;case 2163762:s=new Kn([ae]),Z=!1,F();break;case 2163763:s=Mr(e,s,!1);break;case 16384:case 32768:s=new Ee(ae),Z=!1,F();break;case 8194:case 8195:case 8193:case 8192:s=ni[B&63],Z=!1,F();break;case 8196:{F();const r=pe(578,e);let o;B===2688009?o=at():(o=[],F()),s=new $f(r,o),Z=!1;break}default:throw W>=Bt?sp():Fr()}if(e===Kt)return Qf(s);switch(B){case 2228282:case 2228283:s=new Ua(ni[B&63],s,1),F(),Z=!1;break}if(579<i)return s;if(B===12||B===13)throw zt();if(s.$kind===wc)switch(B){case 2162702:if(X=!0,Z=!1,F(),(B&13312)===0)throw Go();if(B&12288)s=new en(ae,s.ancestor),F();else if(B===2688009)s=new Dn(s,at(),!0);else if(B===2688020)s=Fn(s,!0);else throw Nn();break;case 65547:if(Z=!X,F(),(B&12288)===0)throw zt();s=new en(ae,s.ancestor),F();break;case 12:case 13:throw zt();case 2688009:s=new Dn(s,at(),t);break;case 2688020:s=Fn(s,t);break;case 2163762:s=qa(s);break;case 2163763:s=Mr(e,s,!0);break}for(;(B&65536)>0;)switch(B){case 2162702:s=Uf(s);break;case 65547:if(F(),(B&12288)===0)throw zt();s=Dc(s,!1);break;case 12:case 13:throw zt();case 2688009:if(i===578)return s;s.$kind===qo?s=new Tc(s.name,at(),s.ancestor,!1):s.$kind===ur?s=new qn(s.object,s.name,at(),s.optional,!1):s.$kind===Wo?s=new If(s.name,at()):s=new Dn(s,at(),!1);break;case 2688020:s=Fn(s,!1);break;case 2163762:if(X)throw Nn();s=qa(s);break;case 2163763:if(X)throw Nn();s=Mr(e,s,!0);break}}if(B===12||B===13)throw zt();if(577<i)return s;for(;(B&262144)>0;){const r=B;if((r&960)<=i)break;F(),s=new Tf(ni[r&63],s,pe(r&960,e)),Z=!1}if(63<i)return s;if(xt(6291480)){const r=pe(62,e);mt(6291478),s=new xf(s,r,pe(62,e)),Z=!1}if(62<i)return s;switch(B){case 4194352:case 4194358:case 4194359:case 4194360:case 4194361:{if(!Z)throw np();const r=ni[B&63];F(),s=new Cf(s,pe(62,e),r);break}}if(61<i)return s;for(;xt(6291482);){if(B===6291456)throw rp();const r=ae;F();const o=new Array;for(;xt(6291478);)o.push(pe(62,e));s=new kf(s,r,o)}for(;xt(6291481);){if(B===6291456)throw op();const r=ae;F();const o=new Array;for(;xt(6291478);)o.push(pe(62,e));s=new yf(s,r,o)}if(B!==6291456){if(e===Gn&&B===7340047)return s;if(e===Oc&&B===6291479){if(W===Bt)throw Fr();return Qo=W-1,s}throw Xt()==="of"?ap():Fr()}return s}function zf(){const i=[],e=new Of(Ac,i,void 0,void 0);let t="",s=!0,n=0;for(;s;)switch(F(),B){case 7340053:s=!1,r();break;case 6291475:r();break;case 4096:t=Xt();break;default:throw up()}return mt(7340053),e;function r(){t!==""?(i.push(new Bc(new ho(tn,t),new Ic(tn,new Ee(n++)),void 0)),t=""):n++}}function at(){const i=X;F();const e=[];for(;B!==7340048&&(e.push(pe(62,Gt)),!!xt(6291475)););return mt(7340048),Z=!1,X=i,e}function Fn(i,e){const t=X;return F(),i=new Ic(i,pe(62,Gt),e),mt(7340053),Z=!t,X=t,i}function Uf(i){if(X=!0,Z=!1,F(),(B&13312)===0)throw Go();if(B&12288)return Dc(i,!0);if(B===2688009)return i.$kind===qo?new Tc(i.name,at(),i.ancestor,!0):i.$kind===ur?new qn(i.object,i.name,at(),i.optional,!0):new Dn(i,at(),!0);if(B===2688020)return Fn(i,!0);throw Nn()}function Dc(i,e){const t=ae;switch(B){case 2162702:{X=!0,Z=!1;const s=W,n=Us,r=B,o=ie,a=ae,c=Z,l=X;if(F(),(B&13312)===0)throw Go();return B===2688009?new qn(i,t,at(),e,!0):(W=s,Us=n,B=r,ie=o,ae=a,Z=c,X=l,new ho(i,t,e))}case 2688009:return Z=!1,new qn(i,t,at(),e,!1);default:return Z=!X,F(),new ho(i,t,e)}}function Wf(i){F();const e=W,t=Us,s=B,n=ie,r=ae,o=X,a=[];let c=1,l=!1;e:for(;;){if(B===13){if(F(),B!==4096)throw zt();if(a.push(new Qn(ae)),F(),B===6291475)throw dp();if(B!==7340048||(F(),B!==53))throw mo();F();const d=X,g=Je;++Je;const m=pe(62,Gt);return X=d,Je=g,Z=!1,new po(a,m,!0)}switch(B){case 4096:a.push(new Qn(ae)),F();break;case 7340048:F();break e;case 524298:case 2688020:F(),c=4;break;case 6291475:c=2,l=!0;break e;case 2688009:c=2;break e;default:F(),c=2;break}switch(B){case 6291475:if(F(),l=!0,c===1)break;break e;case 7340048:F();break e;case 4194352:c===1&&(c=3);break e;case 53:if(l)throw In();F(),c=2;break e;default:c===1&&(c=2);break e}}if(B===53){if(c===1){if(F(),B===524298)throw jc();const d=X,g=Je;++Je;const m=pe(62,Gt);return X=d,Je=g,Z=!1,new po(a,m)}throw In()}else if(c===1&&a.length===0)throw Nc(53);if(l)switch(c){case 2:throw In();case 3:throw Ga();case 4:throw Xa()}W=e,Us=t,B=s,ie=n,ae=r,X=o;const h=X,u=pe(62,i);if(X=h,mt(7340048),B===53)switch(c){case 2:throw In();case 3:throw Ga();case 4:throw Xa()}return u}function qf(i){const e=X;F();const t=new Array;for(;B!==7340053;)if(xt(6291475)){if(t.push(Pc),B===7340053)break}else if(t.push(pe(62,i===Kt?Gt:i)),xt(6291475)){if(B===7340053)break}else break;return X=e,mt(7340053),i===Kt?new Ef(t):(Z=!1,new uo(t))}const Kf=[kc,Cc,xc,Ac,_f];function Qf(i){if(!Kf.includes(i.$kind)||B!==4204596)throw Qa(i.$kind);F();const e=i,t=pe(61,Oc);return new Rf(e,t,Qo)}function Gf(i){const e=X,t=new Array,s=new Array;for(F();B!==7340047;){if(t.push(ae),B&49152)F(),mt(6291478),s.push(pe(62,i===Kt?Gt:i));else if(B&12288){const n=ie,r=B,o=W;F(),xt(6291478)?s.push(pe(62,i===Kt?Gt:i)):(ie=n,B=r,W=o,s.push(pe(580,i===Kt?Gt:i)))}else throw cp();B!==7340047&&mt(6291475)}return X=e,mt(7340047),i===Kt?new Bf(t,s):(Z=!1,new fo(t,s))}function Xf(){const i=[],e=[],t=Bt;let s="";for(;W<t;){switch(ie){case 36:if(Ws(W+1)===123){i.push(s),s="",W+=2,ie=Ws(W),F();const n=pe(61,Gn);e.push(n);continue}else s+="$";break;case 92:s+=mn(Ko(j()));break;default:s+=mn(ie)}j()}return e.length?(i.push(s),new Pf(i,e)):null}function Mr(i,e,t){const s=X,n=[ae];mt(2163763);const r=[pe(62,i)];for(;(B=Zf())!==2163762;)n.push(ae),mt(2163763),r.push(pe(62,i));return n.push(ae),Z=!1,X=s,t?(F(),new Ec(n,n,e,r)):(F(),new Kn(n,r))}function qa(i){Z=!1;const e=[ae];return F(),new Ec(e,e,i)}function F(){for(;W<Bt;)if(Us=W,(B=gp[ie]())!=null)return;B=6291456}function j(){return ie=Ws(++W)}function Yf(){for(;mp[j()];);const i=pp[ae=Xt()];return i===void 0?4096:i}function Ka(i){let e=ie;if(i===!1){do e=j();while(e<=57&&e>=48);if(e!==46)return ae=parseInt(Xt(),10),32768;if(e=j(),W>=Bt)return ae=parseInt(Xt().slice(0,-1),10),32768}if(e<=57&&e>=48)do e=j();while(e<=57&&e>=48);else ie=Ws(--W);return ae=parseFloat(Xt()),32768}function Jf(){const i=ie;j();let e=0;const t=new Array;let s=W;for(;ie!==i;)if(ie===92)t.push(Y.slice(s,W)),j(),e=Ko(ie),j(),t.push(mn(e)),s=W;else{if(W>=Bt)throw hp();j()}const n=Y.slice(s,W);return j(),t.push(n),ae=t.join(""),16384}function Mc(){let i=!0,e="";for(;j()!==96;)if(ie===36)if(W+1<Bt&&Ws(W+1)===123){W++,i=!1;break}else e+="$";else if(ie===92)e+=mn(Ko(j()));else{if(W>=Bt)throw Fc();e+=mn(ie)}return j(),ae=e,i?2163762:2163763}const Zf=()=>{if(W>=Bt)throw Fc();return W--,Mc()},xt=i=>B===i?(F(),!0):!1,mt=i=>{if(B===i)F();else throw Nc(i)},ep=()=>re(151,Y),mo=()=>re(152,Y),zt=()=>re(153,Y),tp=()=>re(154,Y),sp=()=>re(155,Y),Fr=()=>re(156,Xt(),W,Y),ip=()=>re(157),np=()=>re(158,Y),rp=()=>re(159,Y),op=()=>re(160,Y),ap=()=>re(161,Y),lp=()=>re(162,Y),Qa=i=>re(163,Y,i),cp=()=>re(164,Y),hp=()=>re(165,Y),Fc=()=>re(166,Y),Nc=i=>re(167,ni[i&63],Y),up=()=>re(170,Xt(),W,Y),Go=()=>re(171,Xt(),W-1,Y),Nn=()=>re(172,Y),In=()=>re(173,Y),Ga=()=>re(174,Y),Xa=()=>re(175,Y),dp=()=>re(176,Y),jc=()=>re(178,Y),fp=()=>re(179,W-1,Y),ni=[Mf,Ff,Nf,Pc,"new","this","$this",null,"$parent","(","{",".","..","...","?.","}",")",",","[","]",":",";","?","'",'"',"&","|","??","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","**","=","!",2163762,2163763,"of","=>","+=","-=","*=","/=","++","--"],pp=Object.assign(Mn(),{true:8193,null:8194,false:8192,undefined:8195,new:8196,this:12294,$this:12293,$parent:12296,in:6562214,instanceof:6562215,typeof:139306,void:139307,of:4204596}),{CharScanners:gp,IdParts:mp}=(()=>{const i=()=>{throw re(168,Y)};i.notMapped=!0;const e={IdStart:[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],Digit:[48,58],Skip:[0,33,127,161]},t=(o,a,c,l)=>{const h=c.length;for(let u=0;u<h;u+=2){const d=c[u];let g=c[u+1];g=g>0?g:d+1,o&&o.fill(l,d,g)}},s=(o=>(t(o,null,e.IdStart,1),t(o,null,e.Digit,1),o))(new Uint8Array(65535)),n=o=>()=>(j(),o),r=new Array(65535);return r.fill(i,0,65535),t(r,null,e.Skip,()=>(j(),null)),t(r,null,e.IdStart,Yf),t(r,null,e.Digit,()=>Ka(!1)),r[34]=r[39]=()=>Jf(),r[96]=()=>Mc(),r[33]=()=>j()!==61?131121:j()!==61?6553951:(j(),6553953),r[61]=()=>j()===62?(j(),53):ie!==61?4194352:j()!==61?6553950:(j(),6553952),r[38]=()=>j()!==38?6291481:(j(),6553885),r[124]=()=>j()!==124?6291482:(j(),6553820),r[63]=()=>{if(j()===46){const o=Ws(W+1);return o<=48||o>=57?(j(),2162702):6291480}return ie!==63?6291480:(j(),6553755)},r[46]=()=>j()<=57&&ie>=48?Ka(!0):ie===46?j()!==46?12:(j(),13):65547,r[60]=()=>j()!==61?6554018:(j(),6554020),r[62]=()=>j()!==61?6554019:(j(),6554021),r[37]=n(6554157),r[40]=n(2688009),r[41]=n(7340048),r[42]=()=>j()===61?(j(),4194360):ie===42?(j(),6554223):6554156,r[43]=()=>j()===43?(j(),2228282):ie!==61?2490856:(j(),4194358),r[44]=n(6291475),r[45]=()=>j()===45?(j(),2228283):ie!==61?2490857:(j(),4194359),r[47]=()=>j()!==61?6554158:(j(),4194361),r[58]=n(6291478),r[59]=n(6291479),r[91]=n(2688020),r[93]=n(7340053),r[123]=n(524298),r[125]=n(7340047),{CharScanners:r,IdParts:s}})(),Mt=ws.createInterface,Ei=Object.freeze,{aliasTo:Ya,singleton:Xo}=Hs,gt="Interpolation",Vc="IsFunction",Ft="IsProperty",ri="custom-element",xn=Ei({default:0,oneTime:1,toView:2,fromView:4,twoWay:6}),dr=Mt("ITemplateCompiler"),Hc=Mt("IAttrMapper"),fe=(i,...e)=>{const t=String(i).padStart(4,"0"),s=_p(i,...e),n=`https://docs.aurelia.io/developer-guides/error-messages/0088-to-0723/aur${t}`;return new Error(`AUR${t}: ${s}

For more information, see: ${n}`)},bp={88:"AttributeParser is already initialized; cannot add patterns after initialization.",89:'Attribute pattern "{{0}}" has already been registered.',99:"Method {{0}} not implemented",157:"Binding command {{0}} has already been registered.",701:'Template compilation error in element "{{0:name}}": the root <template> cannot be a local element template.',702:'Template compilation error: attribute "{{0}}" is invalid on element surrogate.',703:'Template compilation error: template controller "{{0}}" is invalid on element surrogate.',704:'Template compilation error: Invalid command "{{0:.command}}" for <let>. Only to-view/bind supported.',706:'Template compilation error: detected projection with [au-slot="{{0}}"] attempted on a non custom element {{1}}.',707:"Template compilation error: creating binding to non-bindable property {{0}} on {{1}}.",708:'Template compilation error: the custom element "{{0}}" does not have any content other than local template(s).',709:'Template compilation error: local element template needs to be defined directly under root of element "{{0}}".',710:'Template compilation error: bindable properties of local element "{{0}}" template needs to be defined directly under <template>.',711:`Template compilation error: the attribute 'property' is missing in {{0:outerHTML}} in local element "{{1}}"`,712:"Template compilation error: Bindable property and attribute needs to be unique; found property: {{0}}, attribute: {{1}}",713:'Template compilation error: unknown binding command: "{{0}}".{{0:bindingCommandHelp}}',714:'Template compilation error: primary already exists on element/attribute "{{0}}"',715:'Template compilation error: the value of "as-custom-element" attribute cannot be empty for local element in element "{{0}}"',716:'Template compilation error: duplicate definition of the local template named "{{0}} in element {{1}}"',717:'Template compilation error: detected a usage of "<slot>" element without specifying shadow DOM options in element: {{0}}',718:'Spreading template controller "{{0}}" is not supported.',719:"Attribute {{0}} has been already registered for {{1:element}}",720:'Spreading syntax "...xxx" is reserved. Encountered "...{{0}}"',721:'Usage of $bindables is only allowed on custom element. Encountered: <{{0}} {{1}}="{{2}}">',722:"Invalid platform object provided to the compilation, no DOM API found.",723:"Template compilation error: Invalid comma-separated class binding syntax in {{0}}. It resulted in no valid class names after parsing.",9998:"Spread binding does not support spreading custom attributes/template controllers. Did you build the spread instruction manually?"},_p=(i,...e)=>{let t=bp[i];for(let s=0;s<e.length;++s){const n=new RegExp(`{{${s}(:.*)?}}`,"g");let r=n.exec(t);for(;r!=null;){const o=r[1]?.slice(1);let a=e[s];if(a!=null)switch(o){case"nodeName":a=a.nodeName.toLowerCase();break;case"name":a=a.name;break;case"typeof":a=typeof a;break;case"ctor":a=a.constructor.name;break;case"controller":a=a.controller.name;break;case"target@property":a=`${a.target}@${a.targetProperty}`;break;case"toString":a=Object.prototype.toString.call(a);break;case"join(!=)":a=a.join("!=");break;case"bindingCommandHelp":a=vp(a);break;case"element":a=a==="*"?"all elements":`<${a} />`;break;default:o?.startsWith(".")?a=String(a[o.slice(1)]):a=String(a)}t=t.slice(0,r.index)+a+t.slice(n.lastIndex),r=n.exec(t)}}return t};function vp(i){switch(i){case"delegate":return`
The ".delegate" binding command has been removed in v2. Binding command ".trigger" should be used instead. If you are migrating v1 application, install compat package to add back the ".delegate" binding command for ease of migration.`;case"call":return`
The ".call" binding command has been removed in v2. If you want to pass a callback that preserves the context of the function call, you can use lambda instead. Refer to lambda expression doc for more details.`;default:return""}}var zc,Uc,Wc,qc,Kc;class Yo{constructor(e,t,s,n){if(this.chars=e,this.repeat=t,this.isSymbol=s,this.isInverted=n,n)switch(e.length){case 0:this.has=this._hasOfNoneInverse;break;case 1:this.has=this._hasOfSingleInverse;break;default:this.has=this._hasOfMultipleInverse}else switch(e.length){case 0:this.has=this._hasOfNone;break;case 1:this.has=this._hasOfSingle;break;default:this.has=this._hasOfMultiple}}equals(e){return this.chars===e.chars&&this.repeat===e.repeat&&this.isSymbol===e.isSymbol&&this.isInverted===e.isInverted}_hasOfMultiple(e){return this.chars.includes(e)}_hasOfSingle(e){return this.chars===e}_hasOfNone(e){return!1}_hasOfMultipleInverse(e){return!this.chars.includes(e)}_hasOfSingleInverse(e){return this.chars!==e}_hasOfNoneInverse(e){return!0}}class wp{constructor(){this.parts=U,this._pattern="",this._currentRecord={},this._partsRecord={}}get pattern(){const e=this._pattern;return e===""?null:e}set pattern(e){e==null?(this._pattern="",this.parts=U):(this._pattern=e,this.parts=this._partsRecord[e])}append(e,t){const s=this._currentRecord;s[e]===void 0?s[e]=t:s[e]+=t}next(e){const t=this._currentRecord;let s;t[e]!==void 0&&(s=this._partsRecord,s[e]===void 0?s[e]=[t[e]]:s[e].push(t[e]),t[e]=void 0)}}class Jo{get _pattern(){return this._isEndpoint?this._patterns[0]:null}constructor(e,...t){this.charSpec=e,this._nextStates=[],this._types=null,this._isEndpoint=!1,this._patterns=t}findChild(e){const t=this._nextStates,s=t.length;let n=null,r=0;for(;r<s;++r)if(n=t[r],e.equals(n.charSpec))return n;return null}append(e,t){const s=this._patterns;s.includes(t)||s.push(t);let n=this.findChild(e);return n==null&&(n=new Jo(e,t),this._nextStates.push(n),e.repeat&&n._nextStates.push(n)),n}findMatches(e,t){const s=[],n=this._nextStates,r=n.length;let o=0,a=null,c=0,l=0;for(;c<r;++c)if(a=n[c],a.charSpec.has(e))if(s.push(a),o=a._patterns.length,l=0,a.charSpec.isSymbol)for(;l<o;++l)t.next(a._patterns[l]);else for(;l<o;++l)t.append(a._patterns[l],e);return s}}class Ja{constructor(e){this.text=e;const t=this._len=e.length,s=this._specs=[];let n=0;for(;t>n;++n)s.push(new Yo(e[n],!1,!1,!1))}eachChar(e){const t=this._len,s=this._specs;let n=0;for(;t>n;++n)e(s[n])}}class yp{constructor(e){this.text="PART",this._spec=new Yo(e,!0,!1,!0)}eachChar(e){e(this._spec)}}class kp{constructor(e){this.text=e,this._spec=new Yo(e,!1,!0,!1)}eachChar(e){e(this._spec)}}class Cp{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const xp=Mt("ISyntaxInterpreter",i=>i.singleton(Ap));class Ap{constructor(){this._rootState=new Jo(null),this._initialStates=[this._rootState]}add(e){e=e.slice(0).sort((d,g)=>d.pattern>g.pattern?1:-1);const t=e.length;let s,n,r,o,a,c,l,h=0,u;for(;t>h;){for(s=this._rootState,n=e[h],r=n.pattern,o=new Cp,a=this._parse(n,o),c=a.length,l=d=>s=s.append(d,r),u=0;c>u;++u)a[u].eachChar(l);s._types=o,s._isEndpoint=!0,++h}}interpret(e){const t=new wp,s=e.length;let n=this._initialStates,r=0,o;for(;r<s&&(n=this._getNextStates(n,e.charAt(r),t),n.length!==0);++r);return n=n.filter(Sp),n.length>0&&(n.sort($p),o=n[0],o.charSpec.isSymbol||t.next(o._pattern),t.pattern=o._pattern),t}_getNextStates(e,t,s){const n=[];let r=null;const o=e.length;let a=0;for(;a<o;++a)r=e[a],n.push(...r.findMatches(t,s));return n}_parse(e,t){const s=[],n=e.pattern,r=n.length,o=e.symbols;let a=0,c=0,l="";for(;a<r;)l=n.charAt(a),o.length===0||!o.includes(l)?a===c&&l==="P"&&n.slice(a,a+4)==="PART"?(c=a=a+4,s.push(new yp(o)),++t.dynamics):++a:a!==c?(s.push(new Ja(n.slice(c,a))),++t.statics,c=a):(s.push(new kp(n.slice(c,a+1))),++t.symbols,c=++a);return c!==a&&(s.push(new Ja(n.slice(c,a))),++t.statics),s}}function Sp(i){return i._isEndpoint}function $p(i,e){const t=i._types,s=e._types;return t.statics!==s.statics?s.statics-t.statics:t.dynamics!==s.dynamics?s.dynamics-t.dynamics:t.symbols!==s.symbols?s.symbols-t.symbols:0}class tt{constructor(e,t,s,n,r=null){this.rawName=e,this.rawValue=t,this.target=s,this.command=n,this.parts=r}}const Ip=Mt("IAttributePattern"),Zo=Mt("IAttributeParser",i=>i.singleton(Tp));class Tp{constructor(){this._cache={},this._patterns={},this._initialized=!1,this._allDefinitions=[],this._interpreter=$(xp),this._container=$(kn)}registerPattern(e,t){if(this._initialized)throw fe(88);const s=this._patterns;for(const{pattern:n}of e){if(s[n]!=null)throw fe(89,n);s[n]={patternType:t}}this._allDefinitions.push(...e)}_initialize(){this._interpreter.add(this._allDefinitions);const e=this._container;for(const[,t]of Object.entries(this._patterns))t.pattern=e.get(t.patternType)}parse(e,t){this._initialized||(this._initialize(),this._initialized=!0);let s=this._cache[e];s==null&&(s=this._cache[e]=this._interpreter.interpret(e));const n=s.pattern;return n==null?new tt(e,t,e,null,null):this._patterns[n].pattern[n](e,t,s.parts)}}const ys=Ei({name:Js("attribute-pattern"),create(i,e){return{register(t){t.get(Zo).registerPattern(i,e),Xo(Ip,e).register(t)}}}});class bo{"PART.PART"(e,t,s){return new tt(e,t,s[0],s[1])}"PART.PART.PART"(e,t,s){return new tt(e,t,`${s[0]}.${s[1]}`,s[2])}}zc=Symbol.metadata;bo[zc]={[Dt]:ys.create([{pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."}],bo)};class _o{ref(e,t,s){return new tt(e,t,"element","ref")}"PART.ref"(e,t,s){let n=s[0];return n==="view-model"&&(n="component",console.warn(`[aurelia] Detected view-model.ref usage: "${e}=${t}". This is deprecated and component.ref should be used instead`)),new tt(e,t,n,"ref")}}Uc=Symbol.metadata;_o[Uc]={[Dt]:ys.create([{pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."}],_o)};class vo{"PART.trigger:PART"(e,t,s){return new tt(e,t,s[0],"trigger",s)}"PART.capture:PART"(e,t,s){return new tt(e,t,s[0],"capture",s)}}Wc=Symbol.metadata;vo[Wc]={[Dt]:ys.create([{pattern:"PART.trigger:PART",symbols:".:"},{pattern:"PART.capture:PART",symbols:".:"}],vo)};class Za{":PART"(e,t,s){return new tt(e,t,s[0],"bind")}}qc=Symbol.metadata;Za[qc]={[Dt]:ys.create([{pattern:":PART",symbols:":"}],Za)};class el{"@PART"(e,t,s){return new tt(e,t,s[0],"trigger")}"@PART:PART"(e,t,s){return new tt(e,t,s[0],"trigger",[s[0],"trigger",...s.slice(1)])}}Kc=Symbol.metadata;el[Kc]={[Dt]:ys.create([{pattern:"@PART",symbols:"@"},{pattern:"@PART:PART",symbols:"@:"}],el)};const wo=es.get,tl=es.define,Qc="ra",Gc="rb",Xc="rc",Yc="rd",Jc="re",Zc="rf",ea="rg",eh="ri",th="rj",sh="rk",ih="rl",nh="ha",rh="hb",oh="hc",Ep="hd",ah="he",lh="hf",ch="hg",hh="hs",uh="hp",dh="svb",Ae=Ei({hydrateElement:Qc,hydrateAttribute:Gc,hydrateTemplateController:Xc,hydrateLetElement:Yc,setProperty:Jc,interpolation:Zc,propertyBinding:ea,letBinding:eh,refBinding:th,iteratorBinding:sh,multiAttr:ih,textBinding:nh,listenerBinding:rh,attributeBinding:oh,stylePropertyBinding:Ep,setAttribute:ah,setClassAttribute:lh,setStyleAttribute:ch,spreadTransferedBinding:hh,spreadElementProp:uh,spreadValueBinding:dh}),Bi=Mt("Instruction");class Vt{constructor(e,t){this.from=e,this.to=t,this.type=Zc}}class An{constructor(e,t,s){this.from=e,this.to=t,this.mode=s,this.type=ea}}class Bp{constructor(e,t,s){this.forOf=e,this.to=t,this.props=s,this.type=sh}}class Rp{constructor(e,t){this.from=e,this.to=t,this.type=th}}class si{constructor(e,t){this.value=e,this.to=t,this.type=Jc}}class Pp{constructor(e,t,s){this.value=e,this.to=t,this.command=s,this.type=ih}}class Op{constructor(e,t,s,n,r,o){this.res=e,this.props=t,this.projections=s,this.containerless=n,this.captures=r,this.data=o,this.type=Qc}}class Nr{constructor(e,t,s){this.res=e,this.alias=t,this.props=s,this.type=Gc}}class Lp{constructor(e,t,s,n){this.def=e,this.res=t,this.alias=s,this.props=n,this.type=Xc}}class Dp{constructor(e,t){this.instructions=e,this.toBindingContext=t,this.type=Yc}}class sl{constructor(e,t){this.from=e,this.to=t,this.type=eh}}class Mp{constructor(e){this.from=e,this.type=nh}}class fh{constructor(e,t,s,n){this.from=e,this.to=t,this.capture=s,this.modifier=n,this.type=rh}}class il{constructor(e,t){this.value=e,this.to=t,this.type=ah}}class nl{constructor(e){this.value=e,this.type=lh}}class rl{constructor(e){this.value=e,this.type=ch}}class ta{constructor(e,t,s){this.attr=e,this.from=t,this.to=s,this.type=oh}}class ol{constructor(){this.type=hh}}class al{constructor(e){this.instruction=e,this.type=uh}}class yo{constructor(e,t){this.target=e,this.from=t,this.type=dh}}class Xn{constructor(e,t,s,n){this.Type=e,this.name=t,this.aliases=s,this.key=n}static create(e,t){let s,n;return G(e)?(s=e,n={name:s}):(s=e.name,n=e),new Xn(t,as(ko(t,"name"),s),ye(ko(t,"aliases"),n.aliases,t.aliases),_i(s))}register(e,t){const s=this.Type,n=typeof t=="string"?_i(t):this.key,r=this.aliases;e.has(n,!1)?console.warn(`[DEV:aurelia] ${fe(157,this.name)}`):e.register(e.has(s,!1)?null:Xo(s,s),Ya(s,n),...r.map(o=>Ya(s,_i(o))))}}const Le="binding-command",jn=Js(Le),_i=i=>`${jn}:${i}`,ko=(i,e)=>wo(pc.annotation.keyFor(e),i),Fp=(()=>{const i="__au_static_resource__",e=(t,s,n)=>{let r=wo(i,t);return r==null&&t.$au?.type===s&&(r=n(t.$au,t),tl(r,t,i)),r};return Ei({name:jn,keyFrom:_i,define(t,s){const n=Xn.create(t,s),r=n.Type;return tl(n,r,jn,$t),r},getAnnotation:ko,find(t,s){const n=t.find(Le,s);return n==null?null:wo(jn,n)??e(n,Le,Xn.create)??null},get(t,s){try{return t.get(ki(_i(s)))}catch(n){throw console.log(`


[DEV:aurelia] Cannot retrieve binding command with name




`,s),n}return t.get(ki(_i(s)))}})})();class ph{get ignoreAttr(){return!1}build(e,t,s){let r=e.attr.target,o=e.attr.rawValue;return o=o===""?Te(r):o,e.bindable==null?r=s.map(e.node,r)??Te(r):r=e.bindable.name,new An(t.parse(o,Ft),r,1)}}ph.$au={type:Le,name:"one-time"};class gh{get ignoreAttr(){return!1}build(e,t,s){let r=e.attr.target,o=e.attr.rawValue;return o=o===""?Te(r):o,e.bindable==null?r=s.map(e.node,r)??Te(r):r=e.bindable.name,new An(t.parse(o,Ft),r,2)}}gh.$au={type:Le,name:"to-view"};class mh{get ignoreAttr(){return!1}build(e,t,s){const n=e.attr;let r=n.target,o=n.rawValue;return o=o===""?Te(r):o,e.bindable==null?r=s.map(e.node,r)??Te(r):r=e.bindable.name,new An(t.parse(o,Ft),r,4)}}mh.$au={type:Le,name:"from-view"};class bh{get ignoreAttr(){return!1}build(e,t,s){const n=e.attr;let r=n.target,o=n.rawValue;return o=o===""?Te(r):o,e.bindable==null?r=s.map(e.node,r)??Te(r):r=e.bindable.name,new An(t.parse(o,Ft),r,6)}}bh.$au={type:Le,name:"two-way"};class _h{get ignoreAttr(){return!1}build(e,t,s){const n=e.attr,r=e.bindable;let o=n.rawValue,a=n.target,c,l;return o=o===""?Te(a):o,r==null?(l=s.isTwoWay(e.node,a)?6:2,a=s.map(e.node,a)??Te(a)):(c=e.def.defaultBindingMode??0,l=r.mode===0||r.mode==null?c==null||c===0?2:c:r.mode,a=r.name),new An(t.parse(o,Ft),a,G(l)?xn[l]??0:l)}}_h.$au={type:Le,name:"bind"};class vh{constructor(){this._attrParser=$(Zo)}get ignoreAttr(){return!1}build(e,t){const s=e.bindable===null?Te(e.attr.target):e.bindable.name,n=t.parse(e.attr.rawValue,"IsIterator");let r=U;if(n.semiIdx>-1){const o=e.attr.rawValue.slice(n.semiIdx+1),a=o.indexOf(":");if(a>-1){const c=o.slice(0,a).trim(),l=o.slice(a+1).trim(),h=this._attrParser.parse(c,l);r=[new Pp(l,h.target,h.command)]}}return new Bp(n,s,r)}}vh.$au={type:Le,name:"for"};class wh{get ignoreAttr(){return!0}build(e,t){return new fh(t.parse(e.attr.rawValue,Vc),e.attr.target,!1,e.attr.parts?.[2]??null)}}wh.$au={type:Le,name:"trigger"};class yh{get ignoreAttr(){return!0}build(e,t){return new fh(t.parse(e.attr.rawValue,Vc),e.attr.target,!0,e.attr.parts?.[2]??null)}}yh.$au={type:Le,name:"capture"};class kh{get ignoreAttr(){return!0}build(e,t){const s=e.attr,n=s.target;let r=s.rawValue;return r=r===""?Te(n):r,new ta(n,t.parse(r,Ft),n)}}kh.$au={type:Le,name:"attr"};class Ch{get ignoreAttr(){return!0}build(e,t){return new ta("style",t.parse(e.attr.rawValue,Ft),e.attr.target)}}Ch.$au={type:Le,name:"style"};class xh{get ignoreAttr(){return!0}build(e,t){let s=e.attr.target;if(s.includes(",")){const n=s.split(",").filter(r=>r.length>0);if(n.length===0)throw fe(723);s=n.join(" ")}return new ta("class",t.parse(e.attr.rawValue,Ft),s)}}xh.$au={type:Le,name:"class"};class Ah{get ignoreAttr(){return!0}build(e,t){return new Rp(t.parse(e.attr.rawValue,Ft),e.attr.target)}}Ah.$au={type:Le,name:"ref"};class Sh{get ignoreAttr(){return!1}build(e){return new yo(e.attr.target,e.attr.rawValue)}}Sh.$au={type:Le,name:"spread"};const Np=Mt("ITemplateElementFactory",i=>i.singleton(jp)),ll={};class jp{constructor(){this.p=$(Ii),this._template=this.t()}t(){return this.p.document.createElement("template")}createTemplate(e){if(G(e)){let s=ll[e];if(s===void 0){const n=this._template;n.innerHTML=e;const r=n.content.firstElementChild;t(r)?(this._template=this.t(),s=n):(n.content.removeChild(r),s=r),ll[e]=s}return s.cloneNode(!0)}if(e.nodeName!=="TEMPLATE"){const s=this.t();return s.content.appendChild(e),s}return e.parentNode?.removeChild(e),e.cloneNode(!0);function t(s){if(s==null||s.nodeName!=="TEMPLATE"||s.nextElementSibling!=null)return!0;const r=s.previousSibling;if(r!=null)switch(r.nodeType){case 3:return r.textContent.trim().length>0}const o=s.nextSibling;if(o!=null)switch(o.nodeType){case 3:return o.textContent.trim().length>0}return!1}}}const jr="au-start",Vr="au-end",Hr=(i,e,t)=>i.insertBefore(e,t),cl=(i,e,t)=>{if(i===null)return;const s=t.length;let n=0;for(;s>n;)i.insertBefore(t[n],e),++n},Es=(i,e)=>i.content.appendChild(e),hl=(i,e)=>{const t=e.length;let s=0;for(;t>s;)i.content.appendChild(e[s]),++s},ul=i=>i.nodeType===1,dl=i=>i.nodeType===3,Mi="au-slot",fl="default",Fi=(i=>()=>`anonymous-${++i}`)(0);class $h{constructor(){this.debug=!1,this.resolveResources=!0}compile(e,t){if(e.template==null||e.needsCompile===!1)return e;const s=new Yn(e,t,null,null,void 0),n=G(e.template)||!e.enhance?s._templateFactory.createTemplate(e.template):e.template,r=n.nodeName===zr&&n.content!=null,o=r?n.content:n,a=qp.findAll(t),c=a.length;let l=0;if(c>0)for(;c>l;)a[l].compiling?.(n),++l;if(n.hasAttribute(Co))throw fe(701,e);return this._compileLocalElement(o,s),this._compileNode(o,s),{...e,name:e.name||Fi(),dependencies:(e.dependencies??U).concat(s.deps??U),instructions:s.rows,surrogates:r?this._compileSurrogate(n,s):U,template:n,hasSlots:s.hasSlot,needsCompile:!1}}compileSpread(e,t,s,n,r){const o=new Yn(e,s,null,null,void 0),a=[],c=r??o._findElement(n.nodeName.toLowerCase()),l=c!==null,h=o._exprParser,u=t.length;let d=0,g,m=null,p,f,w,T,R,S=null,x,P,I,M;for(;u>d;++d){if(g=t[d],I=g.target,M=g.rawValue,I==="...$attrs"){a.push(new ol);continue}if(S=o._getCommand(g),S!==null&&S.ignoreAttr){O.node=n,O.attr=g,O.bindable=null,O.def=null,a.push(S.build(O,o._exprParser,o._attrMapper));continue}if(l&&(w=o._getBindables(c),T=w.attrs[I],T!==void 0)){S==null?(x=h.parse(M,gt),a.push(new al(x==null?new si(M,T.name):new Vt(x,T.name)))):(O.node=n,O.attr=g,O.bindable=T,O.def=c,a.push(new al(S.build(O,o._exprParser,o._attrMapper))));continue}if(m=o._findAttr(I),m!==null){if(m.isTemplateController)throw fe(9998,I);w=o._getBindables(m),P=m.noMultiBindings===!1&&S===null&&Ur(M),P?f=this._compileMultiBindings(n,M,m,o):(R=w.primary,S===null?(x=h.parse(M,gt),f=[x===null?new si(M,R.name):new Vt(x,R.name)]):(O.node=n,O.attr=g,O.bindable=R,O.def=m,f=[S.build(O,o._exprParser,o._attrMapper)])),(p??=[]).push(new Nr(this.resolveResources?m:m.name,m.aliases!=null&&m.aliases.includes(I)?I:void 0,f));continue}if(S==null)if(x=h.parse(M,gt),x!=null)a.push(new Vt(x,o._attrMapper.map(n,I)??Te(I)));else switch(I){case"class":a.push(new nl(M));break;case"style":a.push(new rl(M));break;default:a.push(new il(M,I))}else O.node=n,O.attr=g,O.bindable=null,O.def=null,a.push(S.build(O,o._exprParser,o._attrMapper))}return Tn(),p!=null?p.concat(a):a}_compileSurrogate(e,t){const s=[],n=e.attributes,r=t._exprParser;let o=n.length,a=0,c,l,h,u,d=null,g,m,p,f,w=null,T,R,S,x;for(;o>a;++a){if(c=n[a],l=c.name,h=c.value,u=t._attrParser.parse(l,h),S=u.target,x=u.rawValue,Hp[S])throw fe(702,l);if(w=t._getCommand(u),w!==null&&w.ignoreAttr){O.node=e,O.attr=u,O.bindable=null,O.def=null,s.push(w.build(O,t._exprParser,t._attrMapper));continue}if(d=t._findAttr(S),d!==null){if(d.isTemplateController)throw fe(703,S);p=t._getBindables(d),R=d.noMultiBindings===!1&&w===null&&Ur(x),R?m=this._compileMultiBindings(e,x,d,t):(f=p.primary,w===null?(T=r.parse(x,gt),m=T===null?x===""?[]:[new si(x,f.name)]:[new Vt(T,f.name)]):(O.node=e,O.attr=u,O.bindable=f,O.def=d,m=[w.build(O,t._exprParser,t._attrMapper)])),e.removeAttribute(l),--a,--o,(g??=[]).push(new Nr(this.resolveResources?d:d.name,d.aliases!=null&&d.aliases.includes(S)?S:void 0,m));continue}if(w===null)if(T=r.parse(x,gt),T!=null)e.removeAttribute(l),--a,--o,s.push(new Vt(T,t._attrMapper.map(e,S)??Te(S)));else switch(l){case"class":s.push(new nl(x));break;case"style":s.push(new rl(x));break;default:s.push(new il(x,l))}else O.node=e,O.attr=u,O.bindable=null,O.def=null,s.push(w.build(O,t._exprParser,t._attrMapper))}return Tn(),g!=null?g.concat(s):s}_compileNode(e,t){switch(e.nodeType){case 1:switch(e.nodeName){case"LET":return this._compileLet(e,t);default:return this._compileElement(e,t)}case 3:return this._compileText(e,t);case 11:{let s=e.firstChild;for(;s!==null;)s=this._compileNode(s,t);break}}return e.nextSibling}_compileLet(e,t){const s=e.attributes,n=s.length,r=[],o=t._exprParser;let a=!1,c=0,l,h,u,d,g,m,p,f;for(;n>c;++c){if(l=s[c],u=l.name,d=l.value,u==="to-binding-context"){a=!0;continue}if(h=t._attrParser.parse(u,d),m=h.target,p=h.rawValue,g=t._getCommand(h),g!==null){if(h.command==="bind")r.push(new sl(o.parse(p,Ft),Te(m)));else throw fe(704,h);continue}f=o.parse(p,gt),f===null&&console.warn(`[DEV:aurelia] Property "${m}" is declared with literal string ${p}. Did you mean ${m}.bind="${p}"?`),r.push(new sl(f===null?new Ee(p):f,Te(m)))}return t.rows.push([new Dp(r,a)]),this._markAsTarget(e,t).nextSibling}_compileElement(e,t){const s=e.nextSibling,n=(e.getAttribute("as-element")??e.nodeName).toLowerCase(),r=t._findElement(n),o=r!==null,a=o&&r.shadowOptions!=null,c=r?.capture,l=c!=null&&typeof c!="boolean",h=c?[]:U,u=t._exprParser,d=this.debug?ut:()=>{e.removeAttribute(T),--f,--p};let g=e.attributes,m,p=g.length,f=0,w,T,R,S,x,P,I=null,M=!1,N,V,ge,Ie,_e,de,ve,K=null,A,ne,D,te,He=!0,b=!1,y=!1,v=!1,C,_=0;if(n==="slot"){if(t.root.def.shadowOptions==null)throw fe(717,t.root.def.name);t.root.hasSlot=!0}for(o&&(C={},He=r.processContent?.call(r.Type,e,t.p,C),g=e.attributes,p=g.length);p>f;++f){switch(w=g[f],T=w.name,R=w.value,T){case"as-element":case"containerless":d(),b=b||T==="containerless";continue}if(S=t._attrParser.parse(T,R),K=t._getCommand(S),D=S.target,te=S.rawValue,c&&(!l||l&&c(D))){if(K!=null&&K.ignoreAttr){d(),h.push(S);continue}if(y=D!==Mi&&D!=="slot"&&((_=D.indexOf("..."))===-1||_===0&&D==="...$attrs"),y&&(A=t._getBindables(r),A.attrs[D]==null&&!t._findAttr(D)?.isTemplateController)){d(),h.push(S);continue}}if(D==="...$attrs"){(x??=[]).push(new ol),d();continue}if(K?.ignoreAttr){O.node=e,O.attr=S,O.bindable=null,O.def=null,(x??=[]).push(K.build(O,t._exprParser,t._attrMapper)),d();continue}if(D.indexOf("...")===0){if(o&&(D=D.slice(3))!=="$element"){(P??=[]).push(new yo("$bindables",D==="$bindables"?te:D)),d();continue}throw(D==="$bindable"||D==="bindables")&&console.warn(`[DEV:aurelia] Detected usage of ${D} on <${e.nodeName}>, did you mean "$bindables"?`),fe(720,D)}if(o){if(A=t._getBindables(r),N=A.attrs[D],N!==void 0){K===null?(de=u.parse(te,gt),(P??=[]).push(de==null?new si(te,N.name):new Vt(de,N.name))):(O.node=e,O.attr=S,O.bindable=N,O.def=r,(P??=[]).push(K.build(O,t._exprParser,t._attrMapper))),d(),I=t._findAttr(D),I!==null&&console.warn(`[DEV:aurelia] Binding with bindable "${D}" on custom element "${r.name}" is ambiguous.There is a custom attribute with the same name.`);continue}if(D==="$bindables"){if(K!=null){O.node=e,O.attr=S,O.bindable=null,O.def=r;{const L=K.build(O,t._exprParser,t._attrMapper);L instanceof yo||console.warn(`[DEV:aurelia] Binding with "$bindables" on custom element "${r.name}" with command ${S.command}  did not result in a spread binding instruction. This likely won't work as expected.`),(P??=[]).push(L)}}else console.warn(`[DEV:aurelia] Usage of "$bindables" on custom element "<${r.name}>" is ignored.`);d();continue}}if(D==="$bindables")throw fe(721,e.nodeName,D,te);if(I=t._findAttr(D),I!==null){A=t._getBindables(I),M=I.noMultiBindings===!1&&K===null&&Ur(te),M?ge=this._compileMultiBindings(e,te,I,t):(ne=A.primary,K===null?(de=u.parse(te,gt),ge=de===null?te===""?[]:[new si(te,ne.name)]:[new Vt(de,ne.name)]):(O.node=e,O.attr=S,O.bindable=ne,O.def=I,ge=[K.build(O,t._exprParser,t._attrMapper)])),d(),I.isTemplateController?(Ie??=[]).push(new Lp(Vp,this.resolveResources?I:I.name,void 0,ge)):(V??=[]).push(new Nr(this.resolveResources?I:I.name,I.aliases!=null&&I.aliases.includes(D)?D:void 0,ge));continue}if(K===null){de=u.parse(te,gt),de!=null&&(d(),(x??=[]).push(new Vt(de,t._attrMapper.map(e,D)??Te(D))));continue}O.node=e,O.attr=S,O.bindable=null,O.def=null,(x??=[]).push(K.build(O,t._exprParser,t._attrMapper)),d()}Tn(),this._shouldReorderAttrs(e,x)&&x!=null&&x.length>1&&this._reorder(e,x),o&&(ve=new Op(this.resolveResources?r:r.name,P??U,null,b,h,C)),(x!=null||ve!=null||V!=null)&&(m=U.concat(ve??U,V??U,x??U),v=!0);let k;if(Ie!=null){p=Ie.length-1,f=p,_e=Ie[f];let L;pl(e)?(L=t.t(),hl(L,[t._marker(),t._comment(jr),t._comment(Vr)])):(this._replaceByMarker(e,t),e.nodeName==="TEMPLATE"?L=e:(L=t.t(),Es(L,e)));const Pe=L,he=t._createChild(m==null?[]:[m]);let Ke,Qe,ft=!1,wt,Fe,yt,kt,Oi,ns,Ts=0,Oa=0,ze=e.firstChild,La=!1;if(He!==!1)for(;ze!==null;){if(Qe=ul(ze)?ze.getAttribute(Mi):null,ft=Qe!==null||o&&!a,Ke=ze.nextSibling,ft){if(!o)throw fe(706,Qe,n);ze.removeAttribute?.(Mi),La=dl(ze)&&ze.textContent.trim()==="",La||((Fe??={})[Qe||fl]??=[]).push(ze),e.removeChild(ze)}ze=Ke}if(Fe!=null){wt={};for(Qe in Fe){for(L=t.t(),yt=Fe[Qe],Ts=0,Oa=yt.length;Oa>Ts;++Ts)kt=yt[Ts],kt.nodeName==="TEMPLATE"?kt.attributes.length>0?Es(L,kt):Es(L,kt.content):Es(L,kt);ns=t._createChild(),this._compileNode(L.content,ns),wt[Qe]={name:Fi(),type:ri,template:L,instructions:ns.rows,needsCompile:!1}}ve.projections=wt}if(v&&(o&&(b||r.containerless)?this._replaceByMarker(e,t):this._markAsTarget(e,t)),k=!o||!r.containerless&&!b&&He!==!1,k)if(e.nodeName===zr)this._compileNode(e.content,he);else for(ze=e.firstChild;ze!==null;)ze=this._compileNode(ze,he);for(_e.def={name:Fi(),type:ri,template:Pe,instructions:he.rows,needsCompile:!1};f-- >0;)_e=Ie[f],L=t.t(),Oi=t._marker(),hl(L,[Oi,t._comment(jr),t._comment(Vr)]),_e.def={name:Fi(),type:ri,template:L,needsCompile:!1,instructions:[[Ie[f+1]]]};t.rows.push([_e])}else{m!=null&&t.rows.push(m);let L=e.firstChild,Pe,he,Ke=!1,Qe=null,ft,wt,Fe,yt,kt,Oi=!1,ns=0,Ts=0;if(He!==!1)for(;L!==null;){if(he=ul(L)?L.getAttribute(Mi):null,Ke=he!==null||o&&!a,Pe=L.nextSibling,Ke){if(!o)throw fe(706,he,n);L.removeAttribute?.(Mi),Oi=dl(L)&&L.textContent.trim()==="",Oi||((ft??={})[he||fl]??=[]).push(L),e.removeChild(L)}L=Pe}if(ft!=null){Qe={};for(he in ft){for(yt=t.t(),wt=ft[he],ns=0,Ts=wt.length;Ts>ns;++ns)Fe=wt[ns],Fe.nodeName===zr?Fe.attributes.length>0?Es(yt,Fe):Es(yt,Fe.content):Es(yt,Fe);kt=t._createChild(),this._compileNode(yt.content,kt),Qe[he]={name:Fi(),type:ri,template:yt,instructions:kt.rows,needsCompile:!1}}ve.projections=Qe}if(v&&(o&&(b||r.containerless)?this._replaceByMarker(e,t):this._markAsTarget(e,t)),k=!o||!r.containerless&&!b&&He!==!1,k&&e.childNodes.length>0)for(L=e.firstChild;L!==null;)L=this._compileNode(L,t)}return s}_compileText(e,t){const s=e.parentNode,n=t._exprParser.parse(e.textContent,gt),r=e.nextSibling;let o,a,c,l,h;if(n!==null){for({parts:o,expressions:a}=n,(h=o[0])&&Hr(s,t._text(h),e),c=0,l=a.length;l>c;++c)cl(s,e,[t._marker(),t._text(" ")]),(h=o[c+1])&&Hr(s,t._text(h),e),t.rows.push([new Mp(a[c])]);s.removeChild(e)}return r}_compileMultiBindings(e,t,s,n){const r=n._getBindables(s),o=t.length,a=[];let c,l,h=0,u=0,d,g,m,p;for(let f=0;f<o;++f)if(u=t.charCodeAt(f),u===92)++f;else if(u===58){for(c=t.slice(h,f);t.charCodeAt(++f)<=32;);for(h=f;f<o;++f)if(u=t.charCodeAt(f),u===92)++f;else if(u===59){l=t.slice(h,f);break}if(l===void 0&&(l=t.slice(h)),g=n._attrParser.parse(c,l),m=n._getCommand(g),p=r.attrs[g.target],p==null)throw fe(707,g.target,s.name);for(m===null?(d=n._exprParser.parse(l,gt),a.push(d===null?new si(l,p.name):new Vt(d,p.name))):(O.node=e,O.attr=g,O.bindable=p,O.def=s,a.push(m.build(O,n._exprParser,n._attrMapper)));f<o&&t.charCodeAt(++f)<=32;);h=f,c=void 0,l=void 0}return Tn(),a}_compileLocalElement(e,t){const s=t.root.def.name,n=e,r=Rr(n.querySelectorAll("template[as-custom-element]")),o=r.length;if(o===0)return;if(o===n.childElementCount)throw fe(708,s);const a=new Set,c=[];for(const h of r){if(h.parentNode!==n)throw fe(709,s);const u=Wp(s,h,a),d=h.content,g=Rr(d.querySelectorAll("bindable")),m=new Set,p=new Set,f=g.reduce((T,R)=>{if(R.parentNode!==d)throw fe(710,u);const S=R.getAttribute("name");if(S===null)throw fe(711,R,u);const x=R.getAttribute("attribute");if(x!==null&&p.has(x)||m.has(S))throw fe(712,m,x);x!==null&&p.add(x),m.add(S);const P=Rr(R.attributes).filter(I=>!gl.includes(I.name));return P.length>0&&console.warn(`[DEV:aurelia] The attribute(s) ${P.map(I=>I.name).join(", ")} will be ignored for ${R.outerHTML}. Only ${gl.join(", ")} are processed.`),R.remove(),T[S]={name:S,attribute:x??void 0,mode:R.getAttribute("mode")??"default"},T},{});class w{}w.$au={type:ri,name:u,template:h,bindables:f},Reflect.defineProperty(w,"name",{value:hc(u)}),c.push(w),n.removeChild(h)}const l=(t.root.def.dependencies??[]).concat(t.root.def.Type==null?U:[t.root.def.Type]);for(const h of c)h.dependencies=l.concat(c.filter(u=>u!==h)),t._addLocalDep(h)}_shouldReorderAttrs(e,t){const s=e.nodeName;return s==="INPUT"&&zp[e.type]===1||s==="SELECT"&&(e.hasAttribute("multiple")||t?.some(n=>n.type===ea&&n.to==="multiple"))}_reorder(e,t){switch(e.nodeName){case"INPUT":{const s=t;let n,r,o=0,a;for(let c=0;c<s.length&&o<3;c++)switch(a=s[c],a.to){case"model":case"value":case"matcher":n=c,o++;break;case"checked":r=c,o++;break}r!==void 0&&n!==void 0&&r<n&&([s[n],s[r]]=[s[r],s[n]]);break}case"SELECT":{const s=t;let n=0,r=0,o=0,a;for(let c=0;c<s.length&&o<2;++c){switch(a=s[c],a.to){case"multiple":r=c,o++;break;case"value":n=c,o++;break}o===2&&n<r&&([s[r],s[n]]=[s[n],s[r]])}}}}_markAsTarget(e,t){return Hr(e.parentNode,t._comment("au*"),e),e}_replaceByMarker(e,t){if(pl(e))return e;const s=e.parentNode,n=t._marker();return cl(s,e,[n,t._comment(jr),t._comment(Vr)]),s.removeChild(e),n}}$h.register=yn(dr);const zr="TEMPLATE",pl=i=>i.nodeValue==="au*";class Yn{constructor(e,t,s,n,r){this.hasSlot=!1,this.deps=null;const o=s!==null;if(this.c=t,this.root=n===null?this:n,this.def=e,this.parent=s,this._resourceResolver=o?s._resourceResolver:t.get(Ih),this._commandResolver=o?s._commandResolver:t.get(Up),this._templateFactory=o?s._templateFactory:t.get(Np),this._attrParser=o?s._attrParser:t.get(Zo),this._exprParser=o?s._exprParser:t.get(Ti),this._attrMapper=o?s._attrMapper:t.get(Hc),this._logger=o?s._logger:t.get(zs),typeof(this.p=o?s.p:t.get(Ii)).document?.nodeType!="number")throw fe(722);this.localEls=o?s.localEls:new Set,this.rows=r??[]}_addLocalDep(e){return(this.root.deps??=[]).push(e),this.root.c.register(e),this}_text(e){return this.p.document.createTextNode(e)}_comment(e){return this.p.document.createComment(e)}_marker(){return this._comment("au*")}h(e){const t=this.p.document.createElement(e);return e==="template"&&this.p.document.adoptNode(t.content),t}t(){return this.h("template")}_findElement(e){return this._resourceResolver.el(this.c,e)}_findAttr(e){return this._resourceResolver.attr(this.c,e)}_getBindables(e){return this._resourceResolver.bindables(e)}_createChild(e){return new Yn(this.def,this.c,this,this.root,e)}_getCommand(e){const t=e.command;return t===null?null:this._commandResolver.get(this.c,t)}}const Ur=i=>{const e=i.length;let t=0,s=0;for(;e>s;){if(t=i.charCodeAt(s),t===92)++s;else{if(t===58)return!0;if(t===36&&i.charCodeAt(s+1)===123)return!1}++s}return!1},Tn=()=>{O.node=O.attr=O.bindable=O.def=null},Vp={name:"unnamed",type:ri},O={node:null,attr:null,bindable:null,def:null},Hp={id:!0,name:!0,"au-slot":!0,"as-element":!0},zp={checkbox:1,radio:1},Ih=Mt("IResourceResolver"),Up=Mt("IBindingCommandResolver",i=>{class e{constructor(){this._cache=new WeakMap}get(s,n){let r=this._cache.get(s);return r||this._cache.set(s,r={}),n in r?r[n]:r[n]=Fp.get(s,n)}}return i.singleton(e)}),gl=Ei(["name","attribute","mode"]),Co="as-custom-element",Wp=(i,e,t)=>{const s=e.getAttribute(Co);if(s===null||s==="")throw fe(715,i);if(t.has(s))throw fe(716,s,i);return t.add(s),e.removeAttribute(Co),s},ml=Mt("ITemplateCompilerHooks"),qp=Ei({name:Js("compiler-hooks"),define(i){return{register(e){Xo(ml,i).register(e)}}},findAll(i){return i.get(Nd(ml))}}),Kp=Object.prototype.hasOwnProperty,gs=Reflect.defineProperty;function Rt(i,e,t){return gs(i,e,{configurable:!0,writable:!0,value:t}),t}function qt(i,e,t){e in i||Rt(i,e,t)}const Th=Object.assign,sa=Object.freeze,Ci=String,fr=ws.createInterface,Qp=es.get,Gp=es.define,z=(i,...e)=>new Error(`AUR${Ci(i).padStart(4,"0")}: ${Yp(i,...e)}`),Xp={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",113:"Ast eval error: infinite loop detected. Increment operators should only be used in event handlers.",114:'Ast eval error: cannot access property "{{0}}" of {{1}}.',115:'Ast eval error: cannot access key "{{0}}" of {{1}}.',116:'Ast eval error: cannot assign value to property "{{0}}" of null/undefined.',151:'Expression error: invalid start: "{{0}}"',152:'Expression error: spread operator is not supported: "{{0}}"',153:'Expression error: expected identifier: "{{0}}"',154:'Expression error: invalid member expression: "{{0}}"',155:'Expression error: unexpected end of expression: "{{0}}"',156:'Expression error: unconsumed token: "{{0}}" at position {{1}} of "{{2}}"',157:"Expression error: invalid empty expression. Empty expression is only valid in event bindings (trigger, delegate, capture etc...)",158:'Expression error: left hand side of expression is not assignable: "{{0}}"',159:'Expression error: expected identifier to come after value converter operator: "{{0}}"',160:"Expression error: expected identifier to come after binding behavior operator: {{0}}",161:'Expression error: unexpected keyword "of": "{{0}}"',162:'Expression error: unexpected keyword "import": "{{0}}"',163:'Expression error: invalid BindingIdentifier at left hand side of "of": "{{0}}" | kind: {{1}}',164:'Expression error: invalid or unsupported property definition in object literal: "{{0}}"',165:'Expression error: unterminated quote in string literal: "{{0}}"',166:'Expression error: unterminated template string: "{{0}}"',167:'Expression error: missing expected token "{{0}}" in "{{1}}"',168:'Expression error: unexpected character: "{{0}}"',170:'Expression error: unexpected "{{0}}" at position "{{1}}" for destructuring assignment in "{{2}}"',171:'Expression error: unexpected {{0}} at position "{{1}}" for optional chain in "{{2}}"',172:'Expression error: invalid tagged template on optional chain in "{{1}}"',173:'Expression error: invalid arrow parameter list in "{{0}}"',174:'Expression error: arrow function with default parameters is not supported: "{{0}}"',175:'Expression error: arrow function with destructuring parameters is not supported: "{{0}}"',176:'Expression error: rest parameter must be last formal parameter in arrow function: "{{0}}"',178:'Expression error: arrow function with function body is not supported: "{{0}}"',179:`Expression error: unexpected token '.' at position "{{1}}" in "{{0}}"`,199:"Trying to observe property {{0}} on null/undefined",203:"Trying to retrieve a property or build a scope from a null/undefined scope",204:"Trying to create a scope with null/undefined binding context",206:"Trying to switch to a null/undefined connectable",207:"Trying to enter an active connectable",208:"Trying to pop a null/undefined connectable",209:"Trying to exit an inactive connectable",210:"Unrecognised collection type {{0:toString}}.",217:"There is no registration for IDirtyChecker interface. If you want to use your own dirty checker, make sure you register it.",218:"Dirty checked is not permitted in this application. Property key {{0}} is being dirty checked.",219:"Trying to set value for property {{0}} in dirty checker",220:'Map/Set "size" is a readonly property',221:'Trying to assign value to readonly property "{{0}}" through computed observer.',224:"Invalid @observable decorator usage, cannot determine property name",225:"Trying to stop an effect that has already been stopped",226:"Maximum number of recursive effect run reached. Consider handle effect dependencies differently."},Yp=(i,...e)=>{let t=Xp[i];for(let s=0;s<e.length;++s){const n=new RegExp(`{{${s}(:.*)?}}`,"g");let r=n.exec(t);for(;r!=null;){const o=r[1]?.slice(1);let a=e[s];if(a!=null)switch(o){case"typeof":a=typeof a;break;case"toString":a=Object.prototype.toString.call(a);break;case"join(!=)":a=a.join("!=");break;case"element":a=a==="*"?"all elements":`<${a} />`;break;default:o?.startsWith(".")?a=Ci(a[o.slice(1)]):a=Ci(a)}t=t.slice(0,r.index)+a+t.slice(n.lastIndex),r=n.exec(t)}}return t};class xe{constructor(e,t,s,n){this.parent=e,this.bindingContext=t,this.overrideContext=s,this.isBoundary=n}static getContext(e,t,s){if(e==null)throw z(203);let n=e.overrideContext,r=e;if(s>0){for(;s>0;)if(s--,r=r.parent,r==null)return;return n=r.overrideContext,t in n?n:r.bindingContext}for(;r!=null&&!r.isBoundary&&!(t in r.overrideContext)&&!(t in r.bindingContext);)r=r.parent;return r==null?e.bindingContext:(n=r.overrideContext,t in n?n:r.bindingContext)}static create(e,t,s){if(e==null)throw z(204);return new xe(null,e,t??new _l,s??!1)}static fromParent(e,t,s=new _l){if(e==null)throw z(203);return new xe(e,t,s,!1)}}class bl{constructor(e,t){e!==void 0&&(this[e]=t)}}class _l{}const{astAssign:bn,astEvaluate:ce,astBind:ks,astUnbind:Cs}=(()=>{const i="AccessThis",e="AccessBoundary",t="AccessGlobal",s="AccessScope",n="ArrayLiteral",r="ObjectLiteral",o="PrimitiveLiteral",c="Template",l="Unary",h="CallScope",u="CallMember",d="CallFunction",g="CallGlobal",m="AccessMember",p="AccessKeyed",f="TaggedTemplate",w="Binary",T="Conditional",R="Assign",S="ArrowFunction",x="ValueConverter",P="BindingBehavior",I="ArrayBindingPattern",M="ObjectBindingPattern",N="BindingIdentifier",V="ForOfStatement",ge="Interpolation",Ie="ArrayDestructuring",_e="ObjectDestructuring",de="DestructuringAssignmentLeaf",ve="Custom",K=xe.getContext;function A(b,y,v,C){switch(b.$kind){case i:{let _=y.overrideContext,k=y,L=b.ancestor;for(;L--&&_;)k=k.parent,_=k?.overrideContext??null;return L<1&&k?k.bindingContext:void 0}case e:{let _=y;for(;_!=null&&!_.isBoundary;)_=_.parent;return _?_.bindingContext:void 0}case s:{const _=K(y,b.name,b.ancestor);C!==null&&C.observe(_,b.name);const k=_[b.name];if(k==null){if(b.name==="$host")throw z(105);return k}return v?.boundFn&&ee(k)?k.bind(_):k}case t:return globalThis[b.name];case g:{const _=globalThis[b.name];if(ee(_))return _(...b.args.map(k=>A(k,y,v,C)));if(!v?.strict&&_==null)return;throw z(107)}case n:return b.elements.map(_=>A(_,y,v,C));case r:{const _={};for(let k=0;k<b.keys.length;++k)_[b.keys[k]]=A(b.values[k],y,v,C);return _}case o:return b.value;case"New":{const _=A(b.func,y,v,C);if(ee(_))return new _(...b.args.map(k=>A(k,y,v,C)));throw z(107)}case c:{let _=b.cooked[0];for(let k=0;k<b.expressions.length;++k)_+=Ci(A(b.expressions[k],y,v,C)),_+=b.cooked[k+1];return _}case l:{const _=A(b.expression,y,v,C);switch(b.operation){case"void":return;case"typeof":return typeof _;case"!":return!_;case"-":return-_;case"+":return+_;case"--":if(C!=null)throw z(113);return ne(b.expression,y,v,C,_-1)+b.pos;case"++":if(C!=null)throw z(113);return ne(b.expression,y,v,C,_+1)-b.pos;default:throw z(109,b.operation)}}case h:{const _=K(y,b.name,b.ancestor);if(_==null){if(v?.strict)throw z(114,b.name,_);return}const k=_[b.name];if(ee(k))return k.apply(_,b.args.map(L=>A(L,y,v,C)));if(k==null){if(v?.strict&&!b.optional)throw z(111,b.name);return}throw z(111,b.name)}case u:{const _=A(b.object,y,v,C);if(_==null&&v?.strict&&!b.optionalMember)throw z(114,b.name,_);const k=_?.[b.name];if(k==null){if(!b.optionalCall&&v?.strict)throw z(111,b.name);return}if(!ee(k))throw z(111,b.name);const L=k.apply(_,b.args.map(Pe=>A(Pe,y,v,C)));return we(_)&&He.includes(b.name)&&C?.observeCollection(_),L}case d:{const _=A(b.func,y,v,C);if(ee(_))return _(...b.args.map(k=>A(k,y,v,C)));if(_==null){if(!b.optional&&v?.strict)throw z(107);return}throw z(107)}case S:return(...k)=>{const L=b.args,Pe=b.rest,he=L.length-1,Ke=L.reduce((ft,wt,Fe)=>(Pe&&Fe===he?ft[wt.name]=k.slice(Fe):ft[wt.name]=k[Fe],ft),{}),Qe=xe.fromParent(y,Ke);return A(b.body,Qe,v,C)};case m:{const _=A(b.object,y,v,C);if(_==null){if(!b.optional&&v?.strict)throw z(114,b.name,_);return}C!==null&&!b.accessGlobal&&C.observe(_,b.name);const k=_[b.name];return v?.boundFn&&ee(k)?k.bind(_):k}case p:{const _=A(b.object,y,v,C),k=A(b.key,y,v,C);if(_==null){if(!b.optional&&v?.strict)throw z(115,k,_);return}return C!==null&&!b.accessGlobal&&C.observe(_,k),_[k]}case f:{const _=b.expressions.map(L=>A(L,y,v,C)),k=A(b.func,y,v,C);if(!ee(k))throw z(110);return k(b.cooked,..._)}case w:{const _=b.left,k=b.right;switch(b.operation){case"&&":return A(_,y,v,C)&&A(k,y,v,C);case"||":return A(_,y,v,C)||A(k,y,v,C);case"??":return A(_,y,v,C)??A(k,y,v,C);case"==":return A(_,y,v,C)==A(k,y,v,C);case"===":return A(_,y,v,C)===A(k,y,v,C);case"!=":return A(_,y,v,C)!=A(k,y,v,C);case"!==":return A(_,y,v,C)!==A(k,y,v,C);case"instanceof":{const L=A(k,y,v,C);return ee(L)?A(_,y,v,C)instanceof L:!1}case"in":{const L=A(k,y,v,C);return Un(L)?A(_,y,v,C)in L:!1}case"+":return A(_,y,v,C)+A(k,y,v,C);case"-":return A(_,y,v,C)-A(k,y,v,C);case"*":return A(_,y,v,C)*A(k,y,v,C);case"/":return A(_,y,v,C)/A(k,y,v,C);case"%":return A(_,y,v,C)%A(k,y,v,C);case"**":return A(_,y,v,C)**A(k,y,v,C);case"<":return A(_,y,v,C)<A(k,y,v,C);case">":return A(_,y,v,C)>A(k,y,v,C);case"<=":return A(_,y,v,C)<=A(k,y,v,C);case">=":return A(_,y,v,C)>=A(k,y,v,C);default:throw z(108,b.operation)}}case T:return A(b.condition,y,v,C)?A(b.yes,y,v,C):A(b.no,y,v,C);case R:{let _=A(b.value,y,v,C);if(b.op!=="="){if(C!=null)throw z(113);const k=A(b.target,y,v,C);switch(b.op){case"/=":_=k/_;break;case"*=":_=k*_;break;case"+=":_=k+_;break;case"-=":_=k-_;break;default:throw z(108,b.op)}}return ne(b.target,y,v,C,_)}case x:return v?.useConverter?.(b.name,"toView",A(b.expression,y,v,C),b.args.map(_=>A(_,y,v,C)));case P:return A(b.expression,y,v,C);case N:return b.name;case V:return A(b.iterable,y,v,C);case ge:if(b.isMulti){let _=b.parts[0],k=0;for(;k<b.expressions.length;++k)_+=Ci(A(b.expressions[k],y,v,C)),_+=b.parts[k+1];return _}else return`${b.parts[0]}${A(b.firstExpression,y,v,C)}${b.parts[1]}`;case de:return A(b.target,y,v,C);case Ie:return b.list.map(_=>A(_,y,v,C));case I:case M:case _e:default:return;case ve:return b.evaluate(y,v,C)}}function ne(b,y,v,C,_){switch(b.$kind){case s:{if(b.name==="$host")throw z(106);const k=K(y,b.name,b.ancestor);return k[b.name]=_}case m:{const k=A(b.object,y,v,C);if(k==null){if(v?.strict)throw z(116,b.name);ne(b.object,y,v,C,{[b.name]:_})}else Un(k)&&(b.name==="length"&&we(k)&&!isNaN(_)?k.splice(_):k[b.name]=_);return _}case p:{const k=A(b.object,y,v,C),L=A(b.key,y,v,C);if(k==null){if(v?.strict)throw z(116,L);return ne(b.object,y,v,C,{[L]:_}),_}if(we(k)){if(L==="length"&&!isNaN(_))return k.splice(_),_;if(fn(L))return k.splice(L,1,_),_}return k[L]=_}case R:return ne(b.value,y,v,C,_),ne(b.target,y,v,C,_);case x:return _=v?.useConverter?.(b.name,"fromView",_,b.args.map(k=>A(k,y,v,C))),ne(b.expression,y,v,C,_);case P:return ne(b.expression,y,v,C,_);case Ie:case _e:{const k=b.list,L=k.length;let Pe,he;for(Pe=0;Pe<L;Pe++)switch(he=k[Pe],he.$kind){case de:ne(he,y,v,C,_);break;case Ie:case _e:{if(typeof _!="object"||_===null)throw z(112);let Ke=A(he.source,xe.create(_),v,null);Ke===void 0&&he.initializer&&(Ke=A(he.initializer,y,v,null)),ne(he,y,v,C,Ke);break}}break}case de:{if(b instanceof Bc){if(_==null)return;if(typeof _!="object")throw z(112);let k=A(b.source,xe.create(_),v,C);k===void 0&&b.initializer&&(k=A(b.initializer,y,v,C)),ne(b.target,y,v,C,k)}else{if(_==null)return;if(typeof _!="object")throw z(112);const k=b.indexOrProperties;let L;if(fn(k)){if(!Array.isArray(_))throw z(112);L=_.slice(k)}else L=Object.entries(_).reduce((Pe,[he,Ke])=>(k.includes(he)||(Pe[he]=Ke),Pe),{});ne(b.target,y,v,C,L)}break}case ve:return b.assign(y,v,_);default:return}}function D(b,y,v){switch(b.$kind){case P:{v.bindBehavior?.(b.name,y,b.args.map(C=>A(C,y,v,null))),D(b.expression,y,v);break}case x:{v.bindConverter?.(b.name),D(b.expression,y,v);break}case V:{D(b.iterable,y,v);break}case ve:b.bind?.(y,v)}}function te(b,y,v){switch(b.$kind){case P:{v.unbindBehavior?.(b.name,y),te(b.expression,y,v);break}case x:{v.unbindConverter?.(b.name),te(b.expression,y,v);break}case V:{te(b.iterable,y,v);break}case ve:b.unbind?.(y,v)}}const He="at map filter includes indexOf lastIndexOf findIndex find flat flatMap join reduce reduceRight slice every some sort".split(" ");return{astEvaluate:A,astAssign:ne,astBind:D,astUnbind:te}})(),Jp=i=>{const e=i.prototype;["bindBehavior","unbindBehavior","bindConverter","unbindConverter","useConverter"].forEach(t=>{Rt(e,t,()=>{throw z(99,t)})})},Wr="pending",Zp="running",vl="completed",Hi="canceled",Eh=Promise.resolve();let qr=!1,xo=!1;const Ue=[];let fs=0,ls=null,ps=[],Jn=null,xi=null;const Zn=()=>{qr||(qr=!0,Eh.then(()=>{qr=!1,xo=!0,eg()}))},sn=i=>{if(ls&&Ue.length===0&&fs===0)if(ls=null,ps.length>0){const e=ps;ps=[],e.length===1?xi(e[0]):xi(new AggregateError(e,"One or more tasks failed."))}else Jn(i)},eg=()=>{const i=!xo;xo=!1,ls??=new Promise((n,r)=>{Jn=n,xi=r});let e=-Ue.length;const t=Ue.length===0;for(;Ue.length>0;){if(++e>1e4){const r=new Error("Potential deadlock detected. More than 10000 extra tasks were queued from within tasks.");throw Ue.length=0,xi?.(r),ls=null,r}const n=Ue.shift();if(typeof n=="function")try{n()}catch(r){ps.push(r)}else n.run()}const s=ps.slice();if(sn(!t),i&&s.length>0)throw s.length===1?s[0]:new AggregateError(s,"One or more tasks failed.")},tg=()=>ls||(Ue.length>0||fs>0?ls??=new Promise((i,e)=>{Jn=i,xi=e}):Eh.then(()=>Ue.length>0||fs>0?ls??=new Promise((i,e)=>{Jn=i,xi=e}):!1)),Pt=i=>{Zn(),Ue.push(i)},nn=(i,e)=>{const t=new Bh(i,e?.delay);return t.delay!=null&&t.delay>0?(++fs,t._timerId=setTimeout(()=>{if(--fs,t._timerId=void 0,t.status===Hi){sn(!0);return}Ue.push(t),Zn()},t.delay)):(Ue.push(t),Zn()),t};let wl=class extends Error{constructor(e){super(`Task ${e.id} was canceled.`),this.task=e}},Bh=class Rh{get result(){return this._result}get status(){return this._status}constructor(e,t){this.callback=e,this.delay=t,this.id=++Rh._taskId,this._status=Wr,this._result=new Promise((s,n)=>{this._resolve=s,this._reject=n})}run(){if(this._status!==Wr)throw new Error(`Cannot run task in ${this._status} state`);this._status=Zp;let e;try{e=this.callback()}catch(t){this._status=Hi,this._reject(t),ps.push(t);return}e instanceof Promise?(++fs,e.then(t=>{this._status=vl,this._resolve(t)}).catch(t=>{this._status=Hi,this._reject(t),ps.push(t)}).finally(()=>{--fs,sn(!0)})):(this._status=vl,this._resolve(e))}cancel(){if(this._timerId!==void 0){clearTimeout(this._timerId),--fs,this._timerId=void 0,this._status=Hi;const e=new wl(this);return this._reject(e),this._result.catch(ut),sn(!0),!0}if(this._status===Wr){const e=Ue.indexOf(this);if(e>-1){Ue.splice(e,1),this._status=Hi;const t=new wl(this);return this._reject(t),this._result.catch(ut),sn(!0),!0}}return!1}};Bh._taskId=0;const sg=(i,e)=>{const t=new pr(i,Math.max(e?.interval,0));return t._start(),t};class pr{constructor(e,t){this._callback=e,this._interval=t,this.id=++pr._nextId,this._canceled=!1,this._nextResolvers=[]}run(){try{this._callback()}catch(e){ps.push(e);return}}_start(){this._canceled||(this._timerId=setTimeout(()=>{this._tick(),this._canceled||this._start()},this._interval))}_tick(){Ue.push(this),Zn();const e=this._nextResolvers.splice(0);for(const t of e)t()}next(){return this._canceled?Promise.resolve():new Promise(e=>this._nextResolvers.push(e))}cancel(){this._canceled=!0,this._timerId!==void 0&&(clearTimeout(this._timerId),this._timerId=void 0);const e=this._nextResolvers.splice(0);for(const t of e)t()}}pr._nextId=0;const Ph=ws.createInterface("ICoercionConfiguration"),gr=0,xs=1,ig=2,ng=4,ia=sa({None:gr,Observer:xs,Node:ig,Layout:ng});function qs(i=0){const e=Array(i);let t=0;for(;t<i;)e[t]=t++;return e.deletedIndices=[],e.deletedItems=[],e.isIndexMap=!0,e}let rg=!1;const _t=(()=>{function i(a,c){return a==null?r:r(a)}function e(){return Rt(this,"subs",new o)}function t(a){return this.subs.add(a)}function s(a){return this.subs.remove(a)}const n=new WeakSet;function r(a,c){if(!n.has(a)){n.add(a);const l=a.prototype;gs(l,"subs",{get:e}),qt(l,"subscribe",t),qt(l,"unsubscribe",s)}return a}class o{constructor(){this.count=0,this._subs=[],this._requestDirtySubs=[],this._hasDirtySubs=!1}add(c){return this._subs.includes(c)?!1:(this._subs[this._subs.length]=c,"handleDirty"in c&&(this._requestDirtySubs[this._requestDirtySubs.length]=c,this._hasDirtySubs=!0),++this.count,!0)}remove(c){let l=this._subs.indexOf(c);return l!==-1?(this._subs.splice(l,1),l=this._requestDirtySubs.indexOf(c),l!==-1&&(this._requestDirtySubs.splice(l,1),this._hasDirtySubs=this._requestDirtySubs.length>0),--this.count,!0):!1}notify(c,l){for(const h of this._subs.slice(0))h.handleChange(c,l)}notifyCollection(c,l){const h=this._subs.slice(0),u=h.length;let d=0;for(;d<u;++d)h[d].handleCollectionChange(c,l)}notifyDirty(){if(this._hasDirtySubs)for(const c of this._requestDirtySubs.slice(0))c.handleDirty()}}return i})();class Oh{constructor(e){this.owner=e,this.type=xs,this._value=(this._obj=e.collection).length}getValue(){return this._obj.length}setValue(e){e!==this._value&&(Number.isNaN(e)?console.warn(`Invalid value "${e}" for array length`):(this._obj.splice(e),this._value=this._obj.length))}handleDirty(){this._value!==this._obj.length&&this.subs.notifyDirty()}handleCollectionChange(e,t){const s=this._value,n=this._obj.length;(this._value=n)!==s&&(this.subs.notifyDirty(),this.subs.notify(this._value,s))}}Lh(Oh);class na{constructor(e){this.owner=e,this.type=xs,this._value=(this._obj=e.collection).size}getValue(){return this._obj.size}setValue(){throw z(220)}handleDirty(){this._value!==this._obj.size&&this.subs.notifyDirty()}handleCollectionChange(e,t){const s=this._value,n=this._obj.size;(this._value=n)!==s&&this.subs.notify(this._value,s)}}Lh(na);function Lh(i){const e=i.prototype;return qt(e,"subscribe",og),qt(e,"unsubscribe",ag),_t(i,null)}function og(i){this.subs.add(i)&&this.subs.count===1&&this.owner.subscribe(this)}function ag(i){this.subs.remove(i)&&this.subs.count===0&&this.owner.subscribe(this)}const rn=(()=>{const i=Symbol.for("__au_arr_obs__"),e=Array[i]??Rt(Array,i,new WeakMap);function t(p,f){return p===f?0:(p=p===null?"null":p.toString(),f=f===null?"null":f.toString(),p<f?-1:1)}function s(p,f){return p===void 0?f===void 0?0:1:f===void 0?-1:0}function n(p,f,w,T,R){let S,x,P,I,M,N,V;for(N=w+1;N<T;N++){for(S=p[N],x=f[N],V=N-1;V>=w&&(P=p[V],I=f[V],M=R(P,S),M>0);V--)p[V+1]=P,f[V+1]=I;p[V+1]=S,f[V+1]=x}}function r(p,f,w,T,R){let S=0,x=0,P,I,M,N,V,ge,Ie,_e,de,ve,K,A,ne,D,te,He,b,y,v;for(;;){if(T-w<=10){n(p,f,w,T,R);return}S=w+(T-w>>1),P=p[w],N=f[w],I=p[T-1],V=f[T-1],M=p[S],ge=f[S],Ie=R(P,I),Ie>0&&(ve=P,K=N,P=I,N=V,I=ve,V=K),_e=R(P,M),_e>=0?(ve=P,K=N,P=M,N=ge,M=I,ge=V,I=ve,V=K):(de=R(I,M),de>0&&(ve=I,K=V,I=M,V=ge,M=ve,ge=K)),p[w]=P,f[w]=N,p[T-1]=M,f[T-1]=ge,A=I,ne=V,D=w+1,te=T-1,p[S]=p[D],f[S]=f[D],p[D]=A,f[D]=ne;e:for(x=D+1;x<te;x++)if(He=p[x],b=f[x],y=R(He,A),y<0)p[x]=p[D],f[x]=f[D],p[D]=He,f[D]=b,D++;else if(y>0){do{if(te--,te==x)break e;v=p[te],y=R(v,A)}while(y>0);p[x]=p[te],f[x]=f[te],p[te]=He,f[te]=b,y<0&&(He=p[x],b=f[x],p[x]=p[D],f[x]=f[D],p[D]=He,f[D]=b,D++)}T-te<D-w?(r(p,f,te,T,R),T=D):(r(p,f,w,D,R),w=te)}}const o=Array.prototype,a=["push","unshift","pop","shift","splice","reverse","sort"];let c;function l(){const p=o.push,f=o.unshift,w=o.pop,T=o.shift,R=o.splice,S=o.reverse,x=o.sort;c={push:function(...P){const I=e.get(this);if(I===void 0)return p.apply(this,P);const M=this.length,N=P.length;if(N===0)return M;this.length=I.indexMap.length=M+N;let V=M;for(;V<this.length;)this[V]=P[V-M],I.indexMap[V]=-2,V++;return I.notify(),this.length},unshift:function(...P){const I=e.get(this);if(I===void 0)return f.apply(this,P);const M=P.length,N=new Array(M);let V=0;for(;V<M;)N[V++]=-2;f.apply(I.indexMap,N);const ge=f.apply(this,P);return I.notify(),ge},pop:function(){const P=e.get(this);if(P===void 0)return w.call(this);const I=P.indexMap,M=w.call(this),N=I.length-1;return I[N]>-1&&(I.deletedIndices.push(I[N]),I.deletedItems.push(M)),w.call(I),P.notify(),M},shift:function(){const P=e.get(this);if(P===void 0)return T.call(this);const I=P.indexMap,M=T.call(this);return I[0]>-1&&(I.deletedIndices.push(I[0]),I.deletedItems.push(M)),T.call(I),P.notify(),M},splice:function(...P){const I=P[0],M=P[1],N=e.get(this);if(N===void 0)return R.apply(this,P);const V=this.length,ge=I|0,Ie=ge<0?Math.max(V+ge,0):Math.min(ge,V),_e=N.indexMap,de=P.length,ve=de===0?0:de===1?V-Ie:M;let K=Ie;if(ve>0){const ne=K+ve;for(;K<ne;)_e[K]>-1&&(_e.deletedIndices.push(_e[K]),_e.deletedItems.push(this[K])),K++}if(K=0,de>2){const ne=de-2,D=new Array(ne);for(;K<ne;)D[K++]=-2;R.call(_e,I,M,...D)}else R.apply(_e,P);const A=R.apply(this,P);return(ve>0||K>0)&&N.notify(),A},reverse:function(){const P=e.get(this);if(P===void 0)return S.call(this),this;const I=this.length,M=I/2|0;let N=0;for(;N!==M;){const V=I-N-1,ge=this[N],Ie=P.indexMap[N],_e=this[V],de=P.indexMap[V];this[N]=_e,P.indexMap[N]=de,this[V]=ge,P.indexMap[V]=Ie,N++}return P.notify(),this},sort:function(P){const I=e.get(this);if(I===void 0)return x.call(this,P),this;let M=this.length;if(M<2)return this;r(this,I.indexMap,0,M,s);let N=0;for(;N<M&&this[N]!==void 0;)N++;(P===void 0||!ee(P))&&(P=t),r(this,I.indexMap,0,N,P);let V=!1;for(N=0,M=I.indexMap.length;M>N;++N)if(I.indexMap[N]!==N){V=!0;break}return(V||rg)&&I.notify(),this}};for(const P of a)gs(c[P],"observing",{value:!0})}let h=!1;const u="__au_arr_on__";function d(){if(c===void 0&&l(),!(Qp(u,Array)??!1)){Gp(!0,Array,u);for(const p of a)o[p].observing!==!0&&Rt(o,p,c[p])}}class g{constructor(f){this.type=xs,h||(h=!0,d()),this.indexObservers={},this.collection=f,this.indexMap=qs(f.length),this.lenObs=void 0,e.set(f,this)}notify(){const f=this.subs;f.notifyDirty();const w=this.indexMap,T=this.collection,R=T.length;this.indexMap=qs(R),f.notifyCollection(T,w)}getLengthObserver(){return this.lenObs??=new Oh(this)}getIndexObserver(f){return this.indexObservers[f]??=new m(this,f)}}_t(g,null);class m{constructor(f,w){this.owner=f,this.index=w,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(f){if(f===this.getValue())return;const w=this.owner,T=this.index,R=w.indexMap;R[T]>-1&&R.deletedIndices.push(R[T]),R[T]=-2,w.collection[T]=f,w.notify()}handleDirty(){this.value!==this.getValue()&&this.subs.notifyDirty()}handleCollectionChange(f,w){const T=this.index;if(w[T]===T)return;const S=this.value,x=this.value=this.getValue();S!==x&&this.subs.notify(x,S)}subscribe(f){this.subs.add(f)&&this.subs.count===1&&this.owner.subscribe(this)}unsubscribe(f){this.subs.remove(f)&&this.subs.count===0&&this.owner.unsubscribe(this)}}return _t(m,null),function(f){let w=e.get(f);return w===void 0&&(e.set(f,w=new g(f)),d()),w}})(),er=(()=>{const i=Symbol.for("__au_set_obs__"),e=Set[i]??Rt(Set,i,new WeakMap),{add:t,clear:s,delete:n}=Set.prototype,r=["add","clear","delete"],o={add:function(l){const h=e.get(this);if(h===void 0)return t.call(this,l),this;const u=this.size;return t.call(this,l),this.size===u?this:(h.indexMap[u]=-2,h.notify(),this)},clear:function(){const l=e.get(this);if(l===void 0)return s.call(this);if(this.size>0){const u=l.indexMap;let d=0;for(const g of this.keys())u[d]>-1&&(u.deletedIndices.push(u[d]),u.deletedItems.push(g)),d++;s.call(this),u.length=0,l.notify()}},delete:function(l){const h=e.get(this);if(h===void 0)return n.call(this,l);if(this.size===0)return!1;let d=0;const g=h.indexMap;for(const m of this.keys()){if(m===l){g[d]>-1&&(g.deletedIndices.push(g[d]),g.deletedItems.push(m)),g.splice(d,1);const p=n.call(this,l);return p===!0&&h.notify(),p}d++}return!1}};function a(l){for(const h of r)Rt(l,h,o[h])}class c{constructor(h){this.type=xs,this.collection=h,this.indexMap=qs(h.size),this.lenObs=void 0}notify(){const h=this.subs;h.notifyDirty();const u=this.indexMap,d=this.collection,g=d.size;this.indexMap=qs(g),h.notifyCollection(d,u)}getLengthObserver(){return this.lenObs??=new na(this)}}return _t(c,null),function(h){let u=e.get(h);return u===void 0&&(e.set(h,u=new c(h)),a(h)),u}})(),tr=(()=>{const i=Symbol.for("__au_map_obs__"),e=Map[i]??Rt(Map,i,new WeakMap),{set:t,clear:s,delete:n}=Map.prototype,r=["set","clear","delete"],o={set:function(l,h){const u=e.get(this);if(u===void 0)return t.call(this,l,h),this;const d=this.get(l),g=this.size;if(t.call(this,l,h),this.size===g){let p=0;for(const f of this.entries()){if(f[0]===l)return f[1]!==d&&(u.indexMap.deletedIndices.push(u.indexMap[p]),u.indexMap.deletedItems.push(f),u.indexMap[p]=-2,u.notify()),this;p++}return this}return u.indexMap[g]=-2,u.notify(),this},clear:function(){const l=e.get(this);if(l===void 0)return s.call(this);if(this.size>0){const u=l.indexMap;let d=0;for(const g of this.keys())u[d]>-1&&(u.deletedIndices.push(u[d]),u.deletedItems.push(g)),d++;s.call(this),u.length=0,l.notify()}},delete:function(l){const h=e.get(this);if(h===void 0)return n.call(this,l);if(this.size===0)return!1;let d=0;const g=h.indexMap;for(const m of this.keys()){if(m===l){g[d]>-1&&(g.deletedIndices.push(g[d]),g.deletedItems.push(m)),g.splice(d,1);const p=n.call(this,l);return p===!0&&h.notify(),p}++d}return!1}};function a(l){for(const h of r)Rt(l,h,o[h])}class c{constructor(h){this.type=xs,this.collection=h,this.indexMap=qs(h.size),this.lenObs=void 0}notify(){const h=this.subs;h.notifyDirty();const u=this.indexMap,d=this.collection,g=d.size;this.indexMap=qs(g),h.notifyCollection(d,u)}getLengthObserver(){return this.lenObs??=new na(this)}}return _t(c,null),function(h){let u=e.get(h);return u===void 0&&(e.set(h,u=new c(h)),a(h)),u}})(),yl=(()=>{class i{constructor(h){this.version=0,this.count=0,this.o=new Map,this.b=h}add(h){this.o.has(h)||(h.subscribe(this.b),++this.count),this.o.set(h,this.version)}clear(){this.o.forEach(t,this),this.count=this.o.size}clearAll(){this.o.forEach(e,this),this.o.clear(),this.count=0}}function e(l,h){h.unsubscribe(this.b)}function t(l,h){this.version!==l&&(h.unsubscribe(this.b),this.o.delete(h))}function s(){return Rt(this,"obs",new i(this))}function n(l,h){this.obs.add(this.oL.getObserver(l,h))}function r(l){let h;if(we(l))h=rn(l);else if($i(l))h=er(l);else if(us(l))h=tr(l);else throw z(210,l);this.obs.add(h)}function o(l){this.obs.add(l)}function a(){throw z(99,"handleChange")}function c(){throw z(99,"handleCollectionChange")}return function(h,u){const d=h.prototype;return qt(d,"observe",n),qt(d,"observeCollection",r),qt(d,"subscribeTo",o),gs(d,"obs",{get:s}),qt(d,"handleChange",a),qt(d,"handleCollectionChange",c),h}})();function dt(i,e){return i==null?yl:yl(i,e)}let Q=null;const ui=[];let Jt=!1;function lg(){Jt=!1}function cg(){Jt=!0}function ra(){return Q}function oa(i){if(i==null)throw z(206);if(Q==null){Q=i,ui[0]=Q,Jt=!0;return}if(Q===i)throw z(207);ui.push(i),Q=i,Jt=!0}function aa(i){if(i==null)throw z(208);if(Q!==i)throw z(209);ui.pop(),Q=ui.length>0?ui[ui.length-1]:null,Jt=Q!=null}const hg=sa({get current(){return Q},get connecting(){return Jt},enter:oa,exit:aa,pause:lg,resume:cg}),Ai=Reflect.get,ug=Object.prototype.toString,Ao=new WeakMap,dg="__au_nw__",fg="__au_nw";function Dh(i){switch(ug.call(i)){case"[object Object]":return i.constructor[dg]!==!0;case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const Ri="__raw__";function q(i){return Dh(i)?mr(i):i}function mr(i){return Ao.get(i)??pg(i)}function J(i){return i[Ri]??i}function je(i){return Dh(i)&&i[Ri]||i}function la(i,e){if(e==="constructor"||e==="__proto__"||e==="$observers"||e===Symbol.toPrimitive||e===Symbol.toStringTag||i.constructor[`${fg}_${Ci(e)}__`]===!0)return!0;const t=Reflect.getOwnPropertyDescriptor(i,e);return t?.configurable===!1&&t.writable===!1}function pg(i){const e=we(i)?mg:us(i)||$i(i)?Ng:gg,t=new Proxy(i,e);return Ao.set(i,t),Ao.set(t,t),t}const gg={get(i,e,t){if(e===Ri)return i;const s=ra();return!Jt||la(i,e)||s==null?Ai(i,e,t):(s.observe(i,e),q(Ai(i,e,t)))},deleteProperty(i,e){return console.warn("[DEV:aurelia] deletion of a property will not always be working with Aurelia observation system, as it depends on getter/setter installation."),delete i[e]}},mg={get(i,e,t){if(e===Ri)return i;if(!Jt||la(i,e)||Q==null)return Ai(i,e,t);switch(e){case"length":return Q.observe(i,"length"),i.length;case"map":return bg;case"includes":return wg;case"indexOf":return yg;case"lastIndexOf":return kg;case"every":return _g;case"filter":return vg;case"find":return xg;case"findIndex":return Cg;case"flat":return Ag;case"flatMap":return Sg;case"join":return $g;case"push":return Tg;case"pop":return Ig;case"reduce":return Mg;case"reduceRight":return Fg;case"reverse":return Pg;case"shift":return Eg;case"unshift":return Bg;case"slice":return Dg;case"splice":return Rg;case"some":return Og;case"sort":return Lg;case"keys":return Mh;case"values":case Symbol.iterator:return So;case"entries":return $o}return Q.observe(i,e),q(Ai(i,e,t))},ownKeys(i){return ra()?.observe(i,"length"),Reflect.ownKeys(i)}};function bg(i,e){const t=J(this),s=t.map((n,r)=>je(i.call(e,q(n),r,this)));return be(Q,t),q(s)}function _g(i,e){const t=J(this),s=t.every((n,r)=>i.call(e,q(n),r,this));return be(Q,t),s}function vg(i,e){const t=J(this),s=t.filter((n,r)=>je(i.call(e,q(n),r,this)));return be(Q,t),q(s)}function wg(i){const e=J(this),t=e.includes(je(i));return be(Q,e),t}function yg(i){const e=J(this),t=e.indexOf(je(i));return be(Q,e),t}function kg(i){const e=J(this),t=e.lastIndexOf(je(i));return be(Q,e),t}function Cg(i,e){const t=J(this),s=t.findIndex((n,r)=>je(i.call(e,q(n),r,this)));return be(Q,t),s}function xg(i,e){const t=J(this),s=t.find((n,r)=>i(q(n),r,this),e);return be(Q,t),q(s)}function Ag(){const i=J(this);return be(Q,i),q(i.flat())}function Sg(i,e){const t=J(this);return be(Q,t),mr(t.flatMap((s,n)=>q(i.call(e,q(s),n,this))))}function $g(i){const e=J(this);return be(Q,e),e.join(i)}function Ig(){return q(J(this).pop())}function Tg(...i){return J(this).push(...i)}function Eg(){return q(J(this).shift())}function Bg(...i){return J(this).unshift(...i)}function Rg(...i){return q(J(this).splice(...i))}function Pg(...i){return q(J(this).reverse())}function Og(i,e){const t=J(this),s=t.some((n,r)=>je(i.call(e,q(n),r,this)));return be(Q,t),s}function Lg(i){const e=J(this),t=e.sort(i);return be(Q,e),q(t)}function Dg(i,e){const t=J(this);return be(Q,t),mr(t.slice(i,e))}function Mg(i,e){const t=J(this),s=t.reduce((n,r,o)=>i(n,q(r),o,this),e);return be(Q,t),q(s)}function Fg(i,e){const t=J(this),s=t.reduceRight((n,r,o)=>i(n,q(r),o,this),e);return be(Q,t),q(s)}const Ng={get(i,e,t){if(e===Ri)return i;const s=ra();if(!Jt||la(i,e)||s==null)return Ai(i,e,t);switch(e){case"size":return s.observe(i,"size"),i.size;case"clear":return Wg;case"delete":return qg;case"forEach":return jg;case"add":if($i(i))return Ug;break;case"get":if(us(i))return Hg;break;case"set":if(us(i))return zg;break;case"has":return Vg;case"keys":return Mh;case"values":return So;case"entries":return $o;case Symbol.iterator:return us(i)?$o:So}return q(Ai(i,e,t))}};function jg(i,e){const t=J(this);return be(Q,t),t.forEach((s,n)=>{i.call(e,q(s),q(n),this)})}function Vg(i){const e=J(this);return be(Q,e),e.has(je(i))}function Hg(i){const e=J(this);return be(Q,e),q(e.get(je(i)))}function zg(i,e){return q(J(this).set(je(i),je(e)))}function Ug(i){return q(J(this).add(je(i)))}function Wg(){return q(J(this).clear())}function qg(i){return q(J(this).delete(je(i)))}function Mh(){const i=J(this);be(Q,i);const e=i.keys();return{next(){const t=e.next(),s=t.value,n=t.done;return n?{value:void 0,done:n}:{value:q(s),done:n}},[Symbol.iterator](){return this}}}function So(){const i=J(this);be(Q,i);const e=i.values();return{next(){const t=e.next(),s=t.value,n=t.done;return n?{value:void 0,done:n}:{value:q(s),done:n}},[Symbol.iterator](){return this}}}function $o(){const i=J(this);be(Q,i);const e=i.entries();return{next(){const t=e.next(),s=t.value,n=t.done;return n?{value:void 0,done:n}:{value:[q(s[0]),q(s[1])],done:n}},[Symbol.iterator](){return this}}}const be=(i,e)=>i?.observeCollection(e),Kg=sa({getProxy:mr,getRaw:J,wrap:q,unwrap:je,rawKey:Ri});class sr{constructor(e,t,s,n,r="async"){this.type=xs,this._oldValue=void 0,this._value=void 0,this._notified=!1,this._isQueued=!1,this._isDirty=!1,this._callback=void 0,this._coercer=void 0,this._coercionConfig=void 0,this._obj=e,this._wrapped=q(e),this.$get=t,this.$set=s,this.oL=n,this._flush=r}init(e){this._value=e,this._isDirty=!1}getValue(){return this.subs.count===0?this.$get.call(this._obj,this._obj,this):(this._isDirty&&(this.compute(),this._isDirty=!1,this._notified=!1),this._value)}setValue(e){if(ee(this.$set))this._coercer!==void 0&&(e=this._coercer.call(null,e,this._coercionConfig)),Yt(e,this._value)||(this.$set.call(this._obj,e),this.run());else throw z(221)}useCoercer(e,t){return this._coercer=e,this._coercionConfig=t,!0}useCallback(e){return this._callback=e,!0}handleDirty(){this._isDirty||(this._isDirty=!0,this.subs.notifyDirty())}handleChange(){this._isDirty=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this._isDirty=!0,this.subs.count>0&&this.run()}subscribe(e){this.subs.add(e)&&this.subs.count===1&&(this._oldValue=this.compute(),this._isDirty=!1,this._notified=!1)}unsubscribe(e){this.subs.remove(e)&&this.subs.count===0&&(this._isDirty=!0,this.obs.clearAll(),this._oldValue=void 0,this._notified=!0)}run(){if(this._flush==="sync"){this._run();return}this._isQueued||(this._isQueued=!0,Pt(()=>{this._isQueued=!1,this._run()}))}_run(){const e=this._value,t=this._oldValue,s=this.compute();this._isDirty=!1,(!this._notified||!Yt(s,e))&&(this._callback?.(s,t),this.subs.notify(s,t),this._oldValue=this._value=s,this._notified=!0)}compute(){this.obs.version++;try{return oa(this),this._value=je(this.$get.call(this._wrapped,this._wrapped,this))}finally{this.obs.clear(),aa(this)}}}dt(sr,null),_t(sr,null);const Qg=(()=>{const i=new WeakMap,e=t=>ud(t)?t:String(t);return{get:(t,s)=>i.get(t)?.get(e(s)),_getFlush:(t,s)=>i.get(t)?.get(e(s))?.flush,set:(t,s,n)=>{i.has(t)||i.set(t,new Map),i.get(t).set(e(s),n)}}})(),ca=fr("IDirtyChecker",i=>i.callback(()=>{throw z(217)})),Gg={timeoutsPerCheck:25};class Xg{static register(e){e.register(Hs.singleton(this,this),Hs.aliasTo(this,ca))}constructor(){this.tracked=[],this._task=null,this._elapsedFrames=0,this.p=$(Ii),this.check=()=>{if(++this._elapsedFrames<Gg.timeoutsPerCheck)return;this._elapsedFrames=0;const e=this.tracked.slice(0),t=e.length;let s,n=0;for(;n<t;++n)s=e[n],s.isDirty()&&s.flush()},_t(kl,null)}createProperty(e,t){return new kl(this,e,t)}addProperty(e){this.tracked.push(e),this.tracked.length===1&&(this._task=sg(this.check,{interval:0}))}removeProperty(e){this.tracked.splice(this.tracked.indexOf(e),1),this.tracked.length===0&&(this._task.cancel(),this._task=null)}}class kl{constructor(e,t,s){this.obj=t,this.key=s,this.type=gr,this._oldValue=void 0,this._dirtyChecker=e}getValue(){return this.obj[this.key]}setValue(e){throw z(219,this.key)}isDirty(){return this._oldValue!==this.obj[this.key]}flush(){const e=this._oldValue,t=this.getValue();this._oldValue=t,this.subs.notify(t,e)}subscribe(e){this.subs.add(e)&&this.subs.count===1&&(this._oldValue=this.obj[this.key],this._dirtyChecker.addProperty(this))}unsubscribe(e){this.subs.remove(e)&&this.subs.count===0&&this._dirtyChecker.removeProperty(this)}}class Yg{get doNotCache(){return!0}constructor(e,t){this.type=gr,this._obj=e,this._key=t}getValue(){return this._obj[this._key]}setValue(){}subscribe(){}unsubscribe(){}}class Fh{constructor(){this.type=gr}getValue(e,t){return e[t]}setValue(e,t,s){t[s]=e}}class ha{constructor(e,t){this.type=xs,this._value=void 0,this._observing=!1,this._callback=void 0,this._coercer=void 0,this._coercionConfig=void 0,this._obj=e,this._key=t}getValue(){return this._value}setValue(e){this._coercer!==void 0&&(e=this._coercer.call(void 0,e,this._coercionConfig));const t=this._value;if(this._observing){if(Yt(e,this._value))return;this._value=e,this.subs.notifyDirty(),this.subs.notify(e,t),Yt(e,this._value)&&this._callback?.(e,t)}else this._value=this._obj[this._key]=e,this._callback?.(e,t)}useCallback(e){return this._callback=e,this.start(),!0}useCoercer(e,t){return this._coercer=e,this._coercionConfig=t,this.start(),!0}subscribe(e){this._observing===!1&&this.start(),this.subs.add(e)}start(){return this._observing===!1&&(this._observing=!0,this._value=this._obj[this._key],gs(this._obj,this._key,{enumerable:!0,configurable:!0,get:Th(()=>this.getValue(),{getObserver:()=>this}),set:e=>{this.setValue(e)}})),this}stop(){return this._observing&&(gs(this._obj,this._key,{enumerable:!0,configurable:!0,writable:!0,value:this._value}),this._observing=!1),this}}_t(ha,null);const Io=new Fh,Pi=fr("IObserverLocator",i=>i.singleton(em)),ua=fr("INodeObserverLocator",i=>i.cachedCallback(e=>(e.getAll(zs).forEach(t=>{t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).")}),new Jg)));class Jg{handles(){return!1}getObserver(){return Io}getAccessor(){return Io}}const Zg=fr("IComputedObserverLocator",i=>i.singleton(class{getObserver(t,s,n,r){const o=new sr(t,n.get,n.set,r,Qg._getFlush(t,s));return gs(t,s,{enumerable:n.enumerable,configurable:!0,get:Th((()=>o.getValue()),{getObserver:()=>o}),set:a=>{o.setValue(a)}}),o}}));class em{constructor(){this._adapters=[],this._dirtyChecker=$(ca),this._nodeObserverLocator=$(ua),this._computedObserverLocator=$(Zg)}addAdapter(e){this._adapters.push(e)}getObserver(e,t){if(e==null)throw z(199,t);if(!lc(e))return new Yg(e,ee(t)?"":t);if(ee(t))return new sr(e,t,void 0,this);const s=Nh(e);let n=s[t];return n===void 0&&(n=this.createObserver(e,t),n.doNotCache||(s[t]=n)),n}getAccessor(e,t){const s=e.$observers?.[t];return s!==void 0?s:this._nodeObserverLocator.handles(e,t,this)?this._nodeObserverLocator.getAccessor(e,t,this):Io}getArrayObserver(e){return rn(e)}getMapObserver(e){return tr(e)}getSetObserver(e){return er(e)}createObserver(e,t){if(this._nodeObserverLocator.handles(e,t,this))return this._nodeObserverLocator.getObserver(e,t,this);switch(t){case"length":if(we(e))return rn(e).getLengthObserver();break;case"size":if(us(e))return tr(e).getLengthObserver();if($i(e))return er(e).getLengthObserver();break;default:if(we(e)&&fn(t))return rn(e).getIndexObserver(Number(t));break}let s=xl(e,t);if(s===void 0){let n=Cl(e);for(;n!==null&&(s=xl(n,t),s===void 0);)n=Cl(n)}if(s!==void 0&&!Kp.call(s,"value")){let n=this._getAdapterObserver(e,t,s);return n==null&&(n=s.get?.getObserver?.(e)),n??(s.configurable?this._computedObserverLocator.getObserver(e,t,s,this):this._dirtyChecker.createProperty(e,t))}return new ha(e,t)}_getAdapterObserver(e,t,s){if(this._adapters.length>0)for(const n of this._adapters){const r=n.getObserver(e,t,s,this);if(r!=null)return r}return null}}const da=i=>{let e;return we(i)?e=rn(i):us(i)?e=tr(i):$i(i)&&(e=er(i)),e},Cl=Object.getPrototypeOf,xl=Object.getOwnPropertyDescriptor,Nh=i=>{let e=i.$observers;return e===void 0&&gs(i,"$observers",{value:e=se()}),e};class tm{constructor(e,t){this.oL=e,this.fn=t,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1,this._cleanupTask=void 0,this.run=()=>{if(this.stopped)throw z(225);if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{this._cleanupTask?.call(void 0),oa(this),this._cleanupTask=this.fn(this)}finally{this.obs.clear(),this.running=!1,aa(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,z(226);this.run()}else this.runCount=0}},this.stop=()=>{this._cleanupTask?.call(void 0),this._cleanupTask=void 0,this.stopped=!0,this.obs.clearAll()}}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}}dt(tm,null);class Al{constructor(e,t,s,n){this.oL=t,this._value=void 0,this.boundFn=!1,this._scope=e,this.ast=s,this._callback=n}handleChange(){this.run()}handleCollectionChange(){this.run()}run(){this.obs.version++;const e=this._value,t=ce(this.ast,this._scope,this,this);this.obs.clear(),Yt(t,e)||(this._value=t,this._callback.call(void 0,t,e))}stop(){this.obs.clearAll(),this._value=void 0}}dt(Al,null),Jp(Al);const Ni="pending",Vn="running",Kr="completed",En="canceled",Qr=new Map,Sl=i=>()=>{throw Ks(`AUR1005: The PLATFORM did not receive a valid reference to the global function '${i}'.`)};class fa{constructor(e,t={}){this.macroTaskRequested=!1,this.macroTaskHandle=-1,this.globalThis=e,"decodeURI decodeURIComponent encodeURI encodeURIComponent Date Reflect console".split(" ").forEach(s=>{this[s]=s in t?t[s]:e[s]}),"clearInterval clearTimeout queueMicrotask setInterval setTimeout".split(" ").forEach(s=>{this[s]=s in t?t[s]:e[s]?.bind(e)??Sl(s)}),this.performanceNow="performanceNow"in t?t.performanceNow:e.performance?.now?.bind(e.performance)??Sl("performance.now"),this.flushMacroTask=this.flushMacroTask.bind(this),this.taskQueue=new pa(this,this.requestMacroTask.bind(this),this.cancelMacroTask.bind(this))}static getOrCreate(e,t={}){let s=Qr.get(e);return s===void 0&&Qr.set(e,s=new fa(e,t)),s}static set(e,t){Qr.set(e,t)}requestMacroTask(){this.macroTaskRequested=!0,this.macroTaskHandle===-1&&(this.macroTaskHandle=this.setTimeout(this.flushMacroTask,0))}cancelMacroTask(){this.macroTaskRequested=!1,this.macroTaskHandle>-1&&(this.clearTimeout(this.macroTaskHandle),this.macroTaskHandle=-1)}flushMacroTask(){this.macroTaskHandle=-1,this.macroTaskRequested===!0&&(this.macroTaskRequested=!1,this.taskQueue.flush())}}class pa{get isEmpty(){return this._pendingAsyncCount===0&&this._processing.length===0&&this._pending.length===0&&this._delayed.length===0}get _hasNoMoreFiniteWork(){return this._pendingAsyncCount===0&&this._processing.every(Gr)&&this._pending.every(Gr)&&this._delayed.every(Gr)}constructor(e,t,s){this.platform=e,this.$request=t,this.$cancel=s,this._suspenderTask=void 0,this._pendingAsyncCount=0,this._processing=[],this._pending=[],this._delayed=[],this._flushRequested=!1,this._yieldPromise=void 0,this._lastRequest=0,this._lastFlush=0,this._requestFlush=()=>{this._tracer.enabled&&this._tracer.enter(this,"requestFlush"),this._flushRequested||(this._flushRequested=!0,this._lastRequest=this._now(),this.$request()),this._tracer.enabled&&this._tracer.leave(this,"requestFlush")},this._now=e.performanceNow,this._tracer=new nm(e.console)}flush(e=this._now()){if(this._tracer.enabled&&this._tracer.enter(this,"flush"),this._flushRequested=!1,this._lastFlush=e,this._suspenderTask===void 0){let t;if(this._pending.length>0&&(this._processing.push(...this._pending),this._pending.length=0),this._delayed.length>0)for(let n=0;n<this._delayed.length;++n)t=this._delayed[n],t.queueTime<=e&&(this._processing.push(t),this._delayed.splice(n--,1));let s;for(;this._processing.length>0;)if((s=this._processing.shift()).run(),s.status===Vn)if(s.suspend===!0){this._suspenderTask=s,this._requestFlush(),this._tracer.enabled&&this._tracer.leave(this,"flush early async");return}else++this._pendingAsyncCount;if(this._pending.length>0&&(this._processing.push(...this._pending),this._pending.length=0),this._delayed.length>0)for(let n=0;n<this._delayed.length;++n)t=this._delayed[n],t.queueTime<=e&&(this._processing.push(t),this._delayed.splice(n--,1));if((this._processing.length>0||this._delayed.length>0||this._pendingAsyncCount>0)&&this._requestFlush(),this._yieldPromise!==void 0&&this._hasNoMoreFiniteWork){const n=this._yieldPromise;this._yieldPromise=void 0,n.resolve()}}else this._requestFlush();this._tracer.enabled&&this._tracer.leave(this,"flush full")}cancel(){this._tracer.enabled&&this._tracer.enter(this,"cancel"),this._flushRequested&&(this.$cancel(),this._flushRequested=!1),this._tracer.enabled&&this._tracer.leave(this,"cancel")}async yield(){this._tracer.enabled&&this._tracer.enter(this,"yield"),this.isEmpty?this._tracer.enabled&&this._tracer.leave(this,"yield empty"):(this._yieldPromise===void 0&&(this._tracer.enabled&&this._tracer.trace(this,"yield - creating promise"),this._yieldPromise=Hh()),await this._yieldPromise,this._tracer.enabled&&this._tracer.leave(this,"yield task"))}queueTask(e,t){this._tracer.enabled&&this._tracer.enter(this,"queueTask");const{delay:s,preempt:n,persistent:r,suspend:o}={...rm,...t};if(n){if(s>0)throw am();if(r)throw lm()}this._processing.length===0&&this._requestFlush();const a=this._now(),c=new im(this._tracer,this,a,a+s,n,r,o,e);return n?this._processing[this._processing.length]=c:s===0?this._pending[this._pending.length]=c:this._delayed[this._delayed.length]=c,this._tracer.enabled&&this._tracer.leave(this,"queueTask"),c}remove(e){this._tracer.enabled&&this._tracer.enter(this,"remove");let t=this._processing.indexOf(e);if(t>-1){this._processing.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove processing");return}if(t=this._pending.indexOf(e),t>-1){this._pending.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove pending");return}if(t=this._delayed.indexOf(e),t>-1){this._delayed.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove delayed");return}throw this._tracer.enabled&&this._tracer.leave(this,"remove error"),Ks(`Task #${e.id} could not be found`)}_resetPersistentTask(e){this._tracer.enabled&&this._tracer.enter(this,"resetPersistentTask"),e.reset(this._now()),e.createdTime===e.queueTime?this._pending[this._pending.length]=e:this._delayed[this._delayed.length]=e,this._tracer.enabled&&this._tracer.leave(this,"resetPersistentTask")}_completeAsyncTask(e){if(this._tracer.enabled&&this._tracer.enter(this,"completeAsyncTask"),e.suspend===!0){if(this._suspenderTask!==e)throw this._tracer.enabled&&this._tracer.leave(this,"completeAsyncTask error"),Ks(`Async task completion mismatch: suspenderTask=${this._suspenderTask?.id}, task=${e.id}`);this._suspenderTask=void 0}else--this._pendingAsyncCount;if(this._yieldPromise!==void 0&&this._hasNoMoreFiniteWork){const t=this._yieldPromise;this._yieldPromise=void 0,t.resolve()}this.isEmpty&&this.cancel(),this._tracer.enabled&&this._tracer.leave(this,"completeAsyncTask")}}class $l extends Error{constructor(e){super("Task was canceled."),this.task=e}}let sm=0;class im{get result(){const e=this._result;if(e===void 0)switch(this._status){case Ni:{const t=this._result=Hh();return this._resolve=t.resolve,this._reject=t.reject,t}case Vn:throw Ks("Trying to await task from within task will cause a deadlock.");case Kr:return this._result=Promise.resolve();case En:return this._result=Promise.reject(new $l(this))}return e}get status(){return this._status}constructor(e,t,s,n,r,o,a,c){this.taskQueue=t,this.createdTime=s,this.queueTime=n,this.preempt=r,this.persistent=o,this.suspend=a,this.callback=c,this.id=++sm,this._resolve=void 0,this._reject=void 0,this._result=void 0,this._status=Ni,this._tracer=e}run(e=this.taskQueue.platform.performanceNow()){if(this._tracer.enabled&&this._tracer.enter(this,"run"),this._status!==Ni)throw this._tracer.enabled&&this._tracer.leave(this,"run error"),Ks(`Cannot run task in ${this._status} state`);const{persistent:t,taskQueue:s,callback:n,_resolve:r,_reject:o,createdTime:a}=this;let c;this._status=Vn;try{c=n(e-a),c instanceof Promise?c.then(l=>{this.persistent?s._resetPersistentTask(this):(t?this._status=En:this._status=Kr,this.dispose()),s._completeAsyncTask(this),this._tracer.enabled&&this._tracer.leave(this,"run async then"),r!==void 0&&r(l)}).catch(l=>{if(this.persistent||this.dispose(),s._completeAsyncTask(this),this._tracer.enabled&&this._tracer.leave(this,"run async catch"),o!==void 0)o(l);else throw l}):(this.persistent?s._resetPersistentTask(this):(t?this._status=En:this._status=Kr,this.dispose()),this._tracer.enabled&&this._tracer.leave(this,"run sync success"),r!==void 0&&r(c))}catch(l){if(this.persistent||this.dispose(),this._tracer.enabled&&this._tracer.leave(this,"run sync error"),o!==void 0)o(l);else throw l}}cancel(){if(this._tracer.enabled&&this._tracer.enter(this,"cancel"),this._status===Ni){const e=this.taskQueue,t=this._reject;return e.remove(this),e.isEmpty&&e.cancel(),this._status=En,this.dispose(),t!==void 0&&t(new $l(this)),this._tracer.enabled&&this._tracer.leave(this,"cancel true =pending"),!0}else if(this._status===Vn&&this.persistent)return this.persistent=!1,this._tracer.enabled&&this._tracer.leave(this,"cancel true =running+persistent"),!0;return this._tracer.enabled&&this._tracer.leave(this,"cancel false"),!1}reset(e){this._tracer.enabled&&this._tracer.enter(this,"reset");const t=this.queueTime-this.createdTime;this.createdTime=e,this.queueTime=e+t,this._status=Ni,this._resolve=void 0,this._reject=void 0,this._result=void 0,this._tracer.enabled&&this._tracer.leave(this,"reset")}dispose(){this._tracer.enabled&&this._tracer.trace(this,"dispose"),this.callback=void 0,this._resolve=void 0,this._reject=void 0,this._result=void 0}}class nm{constructor(e){this.console=e,this.enabled=!1,this.depth=0}enter(e,t){this.log(`${"  ".repeat(this.depth++)}> `,e,t)}leave(e,t){this.log(`${"  ".repeat(--this.depth)}< `,e,t)}trace(e,t){this.log(`${"  ".repeat(this.depth)}- `,e,t)}log(e,t,s){if(t instanceof pa){const n=t._processing.length,r=t._pending.length,o=t._delayed.length,a=t._flushRequested,c=!!t._suspenderTask,l=`processing=${n} pending=${r} delayed=${o} flushReq=${a} susTask=${c}`;this.console.log(`${e}[Q.${s}] ${l}`)}else{const n=t.id,r=Math.round(t.createdTime*10)/10,o=Math.round(t.queueTime*10)/10,a=t.preempt,c=t.persistent,l=t.suspend,h=t._status,u=`id=${n} created=${r} queue=${o} preempt=${a} persistent=${c} status=${h} suspend=${l}`;this.console.log(`${e}[T.${s}] ${u}`)}}}const rm={delay:0,preempt:!1,persistent:!1,suspend:!1};let jh,Vh;const om=(i,e)=>{jh=i,Vh=e},Hh=()=>{const i=new Promise(om);return i.resolve=jh,i.reject=Vh,i},Gr=i=>i.persistent,am=()=>Ks("AUR1006: Invalid arguments: preempt cannot be combined with a greater-than-zero delay"),lm=()=>Ks("AUR1007: Invalid arguments: preempt cannot be combined with persistent"),Ks=i=>new Error(i);class cs extends fa{static getOrCreate(e,t={}){let s=cs._lookup.get(e);return s===void 0&&cs._lookup.set(e,s=new cs(e,t)),s}static set(e,t){cs._lookup.set(e,t)}get domWriteQueue(){return this.console.log("[DEV:aurelia] platform.domQueue is deprecated, please use platform.domQueue instead."),this.domQueue}get domReadQueue(){return this.console.log("[DEV:aurelia] platform.domReadQueue has been removed, please use platform.domQueue instead."),this.domQueue}constructor(e,t={}){super(e,t);const s=n=>()=>{throw new Error(`The PLATFORM did not receive a valid reference to the global function '${n}'.`)};"Node Element HTMLElement CustomEvent CSSStyleSheet ShadowRoot MutationObserver window document customElements".split(" ").forEach(n=>this[n]=n in t?t[n]:e[n]),"fetch requestAnimationFrame cancelAnimationFrame".split(" ").forEach(n=>this[n]=n in t?t[n]:e[n]?.bind(e)??s(n)),this.domQueue=(()=>{let n=!1,r=-1;const o=()=>{n=!0,r===-1&&(r=this.requestAnimationFrame(c))},a=()=>{n=!1,r>-1&&(this.cancelAnimationFrame(r),r=-1)},c=()=>{r=-1,n===!0&&(n=!1,l.flush())},l=new pa(this,o,a);return l})()}}cs._lookup=new WeakMap;const{default:ga,oneTime:br,toView:me,fromView:Zt,twoWay:zh}=xn,De=es.get,_r=es.has,vt=es.define,{annotation:cm}=pc,ts=cm.keyFor,Sn=Object,Qs=String,Uh=Sn.prototype,Ns=Uh.hasOwnProperty,ss=Sn.freeze,Wh=Sn.assign,qh=Sn.getOwnPropertyNames,ma=Sn.keys,Il=se(),To=(i,e,t)=>{if(Il[e]===!0)return!0;if(!G(e))return!1;const s=e.slice(0,5);return Il[e]=s==="aria-"||s==="data-"||t.isStandardSvgAttribute(i,e)},Eo=i=>{throw i},Kh=Reflect.defineProperty,Ze=(i,e,t)=>(Kh(i,e,{enumerable:!1,configurable:!0,writable:!0,value:t}),t),Qh=(i,e,t)=>i.addSignalListener(e,t),Gh=(i,e,t)=>i.removeSignalListener(e,t),hm="Interpolation",um="IsIterator",dm="IsFunction",Ot="IsProperty",Tl="pending",Xr="running",ba=ia.Observer,As=ia.Node,Nt=ia.Layout,E=(i,...e)=>{const t=Qs(i).padStart(4,"0"),s=pm(i,...e),n=`https://docs.aurelia.io/developer-guides/error-messages/runtime-html/aur${t}`;return new Error(`AUR${t}: ${s}

For more information, see: ${n}`)},fm={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",113:"Ast eval error: infinite loop detected. Increment operators should only be used in event handlers.",114:'Ast eval error: cannot access property "{{0}}" of {{1}}.',115:'Ast eval error: cannot access key "{{0}}" of {{1}}.',116:'Ast eval error: cannot assign value to property "{{0}}" of null/undefined.',151:"No binding behavior definition found for type {{0:name}}",152:"No value converter definition found for type {{0:name}}",153:'Element "{{0}}" has already been registered.',154:'Attribute "{{0}}" has already been registered.',155:"Value converter {{0}} has already been registered.",156:"Binding behavior {{0}} has already been registered.",157:"Binding command {{0}} has already been registered.",203:"Trying to retrieve a property or build a scope from a null/undefined scope",204:"Trying to create a scope with null/undefined binding context",227:"@bindable is not supported for properties that uses a symbol for name. Use a string for the property name instead.",228:"@bindable cannot be used as a class decorator when no configuration object is supplied.",229:"@bindable cannot be used as a class decorator when no property name is supplied in the configuration object.",500:"There is no cached controller for the provided ViewModel: {{0}}",501:"Invalid combination: cannot combine the containerless custom element option with Shadow DOM.",502:"Trying to activate a disposed controller: {{0}}.",503:"Controller at {{0}} is in an unexpected state: {{1}} during activation.",504:"Synthetic view at {{0}} is being activated with null/undefined scope.",505:"Controller at {{0}} is in an unexpected state: {{1}} during deactivation.",506:"Invalid callback for @watch decorator: {{0}}",507:"Observer for bindable property {{0}} does not support coercion.",508:"Observer for property {{0}} does not support change handler.",759:"No attribute definition found for type {{0:name}}",760:"No element definition found for type {{0:name}}",761:"Cannot create a custom element definition with only a name and no type: {{0}}",762:"Trying to retrieve a custom element controller from a node, but the provided node <{{0:nodeName}} /> is not a custom element or containerless host.",763:"Trying to retrieve a custom element controller from a node, but the provided node <{{0:nodeName}} /> is not a custom element or containerless host.",764:"Trying to retrieve a custom element controller from a node. But the provided node <{{0:nodeName}} /> does not appear to be part of an Aurelia app DOM tree, or it was added to the DOM in a way that Aurelia cannot properly resolve its position in the component tree.",765:"Trying to retrieve a custom element controller from a node. But the provided node <{{0:nodeName}} /> does not appear to be part of an Aurelia app DOM tree, or it was added to the DOM in a way that Aurelia cannot properly resolve its position in the component tree.",766:"Invalid @processContent hook. Expected the hook to be a function (when defined in a class, it needs to be a static function) but got a {{0:typeof}}.",652:"Aurelia is unable to observe property {{0}}. Register observation mapping with .useConfig().",653:"Mapping for property {{0}} of <{{1}} /> already exists",654:"Array values can only be bound to a multi-select.",714:'Template compilation error: primary already exists on element/attribute "{{0}}"',719:"Attribute {{0}} has been already registered for {{1:element}}",767:"Aurelia.root was accessed without a valid root.",768:"An instance of Aurelia is already registered with the container or an ancestor of it.",769:"Failed to initialize the platform object. The host element's ownerDocument does not have a defaultView, did you create the host from a DOMParser and forget to call adoptNode()?",770:"Aurelia.start() was called without a composition root",771:"The aurelia instance must be fully stopped before it can be disposed",750:"view.ref is not supported. If you are migrating from v1, this can be understood as the controller.",751:`Attempted to reference "{{0}}", but it was not found amongst the target's API.`,752:"Element {{0:.res}} is not registered in {{1:name}}.",753:"Attribute {{0:.res}} is not registered in {{1:name}}.",754:"Attribute {{0:.res}} is not registered in {{1:name}}.",755:"Cannot resolve ViewFactory before the provider was prepared.",756:"Cannot resolve ViewFactory without a (valid) name.",757:"AUR0757: The compiled template is not aligned with the render instructions. There are {{0}} targets and {{1}} instructions.",772:"Invalid @watch decorator config. Expected an expression or a fn but received null/undefined.",773:'Invalid @watch decorator change handler config.Method "{{0}}" not found in class {{1}}',774:"Invalid @watch decorator usage: decorated target {{0}} is not a class method.",775:'Invalid command "{{0}}" usage with [repeat]',776:'Invalid [repeat] usage, found extraneous target "{{0}}"',777:"Unsupported: [repeat] cannot iterate over {{0:toString}}",778:"Unsupported: [repeat] cannot count {{0:toString}}",814:"[repeat] encountered an error: number of views != number of items {{0:join(!=)}}",779:"Invalid portal insertion position: {{0}}",801:'"& self" binding behavior only supports listener binding via trigger/capture command.',802:`"& updateTrigger" invalid usage. This binding behavior requires at least one event name argument: eg <input value.bind="firstName & updateTrigger:'blur'">`,803:'"& updateTrigger" invalid usage. This binding behavior can only be applied to two-way/ from-view bindings.',805:'Invalid scope behavior "{{0}}" on <au-compose />. Only "scoped" or "auto" allowed.',806:`<au-compose /> couldn't find a custom element with name "{{0}}", did you forget to register it locally or globally?`,807:"Composition has already been activated/deactivated. Id: {{0:controller}}",808:"Composition has already been deactivated.",810:"Invalid [else] usage, it should follow an [if]",811:"Invalid portal strict target query, empty query.",812:"Invalid portal strict target resolution, target not found.",813:'Invalid [pending]/[then]/[catch] usage. The parent [promise].resolve not found; only "*[promise.resolve] > *[pending|then|catch]" relation is supported.',815:'Invalid [case/default-case] usage. The parent [switch] not found; only "*[switch] > *[case|default-case]" relation is supported.',816:"Invalid [default-case] usage. Multiple 'default-case's are not allowed.",817:'"& signal" binding behavior can only be used with bindings that have a "handleChange" method',818:`"& signal" invalid usage. At least one signal name must be passed to the signal behavior, e.g. "expr & signal:'my-signal'"`,819:"Spreading to bindables onto non custom element",820:"Invalid spread target {{0}}",9999:"No scope context for spread binding.",9998:"Spread binding does not support spreading custom attributes/template controllers. Did you build the spread instruction manually?",9997:"Marker is malformed. This likely happens when a compiled template has been modified. Did you accidentally modified some compiled template? You can modify template before compilation with compiling Template compiler hook.",9996:"Invalid usage, a rate limit has already been applied. Did you have both throttle and debounce on the same binding?",9995:"The binding already has a target subscriber.",9994:`"& attr" can be only used on property binding. It's used on {{0:ctor}}`,9993:'"& updateTrigger" binding behavior only works with the default implementation of Aurelia HTML observation. Implement your own node observation + updateTrigger',9992:'"& updateTrigger" uses node observer to observe, but it does not know how to use events to observe property <{{0:target@property}} />',9991:"Invalid @children usage. @children decorator can only be used on a field",9990:"Invalid @slotted usage. @slotted decorator can only be used on a field",9989:"Invalid query selector. Only selectors with alpha-numeric characters, or $all are allowed. Got {{0}} instead."},pm=(i,...e)=>{let t=fm[i];for(let s=0;s<e.length;++s){const n=new RegExp(`{{${s}(:.*)?}}`,"g");let r=n.exec(t);for(;r!=null;){const o=r[1]?.slice(1);let a=e[s];if(a!=null)switch(o){case"nodeName":a=a.nodeName.toLowerCase();break;case"name":a=a.name;break;case"typeof":a=typeof a;break;case"ctor":a=a.constructor.name;break;case"controller":a=a.controller.name;break;case"target@property":a=`${a.target}@${a.targetProperty}`;break;case"toString":a=Object.prototype.toString.call(a);break;case"join(!=)":a=a.join("!=");break;case"bindingCommandHelp":a=gm(a);break;case"element":a=a==="*"?"all elements":`<${a} />`;break;default:o?.startsWith(".")?a=Qs(a[o.slice(1)]):a=Qs(a)}t=t.slice(0,r.index)+a+t.slice(n.lastIndex),r=n.exec(t)}}return t};function gm(i){switch(i){case"delegate":return`
The ".delegate" binding command has been removed in v2. Binding command ".trigger" should be used instead. If you are migrating v1 application, install compat package to add back the ".delegate" binding command for ease of migration.`;case"call":return`
The ".call" binding command has been removed in v2. If you want to pass a callback that preserves the context of the function call, you can use lambda instead. Refer to lambda expression doc for more details.`;default:return""}}function Yr(i,e){let t;function s(n,r){let o;switch(r.kind){case"getter":case"field":{const l=r.name;if(typeof l!="string")throw E(227);o=l;break}case"class":if(t==null)throw E(228);if(typeof t=="string")o=t;else{const l=t.name;if(!l)throw E(229);if(typeof l!="string")throw E(227);o=l}break}const a=t==null||typeof t=="string"?{name:o}:t,c=r.metadata[oi]??=se();c[o]=Qt.create(o,a)}if(arguments.length>1){t={},s(i,e);return}else if(G(i))return t=i,s;return t=i===void 0?{}:i,s}const oi=ts("bindables"),Ye=ss({name:oi,keyFrom:i=>`${oi}:${i}`,from(...i){const e={},t=Array.isArray;function s(o){e[o]=Qt.create(o)}function n(o,a){e[o]=a instanceof Qt?a:Qt.create(o,a===!0?{}:a)}function r(o){t(o)?o.forEach(a=>G(a)?s(a):n(a.name,a)):o instanceof Qt?e[o.name]=o:o!==void 0&&ma(o).forEach(a=>n(a,o[a]))}return i.forEach(r),e},getAll(i){const e=[],t=gd(i);let s=t.length,n;for(;--s>=0;){n=t[s];const r=De(oi,n);r!=null&&e.push(...Object.values(r))}return e},_add(i,e){let t=De(oi,e);t==null&&vt(t=se(),e,oi),t[i.name]=i}});class Qt{constructor(e,t,s,n,r,o){this.attribute=e,this.callback=t,this.mode=s,this.primary=n,this.name=r,this.set=o}static create(e,t={}){const s=t.mode??me;return new Qt(t.attribute??uc(e),t.callback??`${e}Changed`,G(s)?xn[s]??ga:s,t.primary??!1,t.name??e,t.set??mm(t))}}const Bo={key:ts("coercer"),define(i,e){vt(i[e].bind(i),i,Bo.key)},for(i){return De(Bo.key,i)}};function mm(i={}){const e=i.type??null;if(e==null)return ut;let t;switch(e){case Number:case Boolean:case String:case BigInt:t=e;break;default:{const s=e.coerce;t=typeof s=="function"?s.bind(e):Bo.for(e)??ut;break}}return t===ut?t:bm(t,i.nullable)}function bm(i,e){return function(t,s){return s?.enableCoercion?(e??!(s?.coerceNullish??!1))&&t==null?t:i(t,s):t}}const oe=ws.createInterface,jt=Hs.singleton,ms=Hs.aliasTo,Xh=Hs.instance,le=(i,e,t)=>i.registerResolver(e,t),_m="custom-element",vm="custom-attribute",bs=(i,e,t,s="__au_static_resource__")=>{let n=De(s,i);return n==null&&i.$au?.type===e&&(n=t(i.$au,i),vt(n,i,s)),n};class on{constructor(e,t,s,n){this.Type=e,this.name=t,this.aliases=s,this.key=n}static create(e,t){let s,n;return G(e)?(s=e,n={name:s}):(s=e.name,n=e),new on(t,as(El(t,"name"),s),ye(El(t,"aliases"),n.aliases,t.aliases),Yh.keyFrom(s))}register(e,t){const s=this.Type,n=typeof t=="string"?an(t):this.key,r=this.aliases;e.has(n,!1)?console.warn(`[DEV:aurelia] ${E(156,this.name)}`):e.register(e.has(s,!1)?null:jt(s,s),ms(s,n),...r.map(o=>ms(s,an(o))))}}const ht="binding-behavior",ai=Js(ht),El=(i,e)=>De(ts(e),i),an=i=>`${ai}:${i}`,Yh=ss({name:ai,keyFrom:an,isType(i){return ee(i)&&(_r(ai,i)||i.$au?.type===ht)},define(i,e){const t=on.create(i,e),s=t.Type;return vt(t,s,ai,$t),s},getDefinition(i){const e=De(ai,i)??bs(i,ht,on.create);if(e===void 0)throw E(151,i);return e},find(i,e){const t=i.find(ht,e);return t==null?null:De(ai,t)??bs(t,ht,on.create)??null},get(i,e){try{return i.get(ki(an(e)))}catch(t){throw console.error("[DEV:aurelia] Cannot retrieve binding behavior with name",e),t}return i.get(ki(an(e)))}}),Jr=new Map,vr=i=>({type:ht,name:i});class wr{bind(e,t){Jr.set(t,t.mode),t.mode=this.mode}unbind(e,t){t.mode=Jr.get(t),Jr.delete(t)}}class Jh extends wr{get mode(){return br}}Jh.$au=vr("oneTime");class Zh extends wr{get mode(){return me}}Zh.$au=vr("toView");class eu extends wr{get mode(){return Zt}}eu.$au=vr("fromView");class tu extends wr{get mode(){return zh}}tu.$au=vr("twoWay");const Zr=new WeakMap,wm=200;class su{constructor(){this._platform=$(Ii)}bind(e,t,s,n){const r={type:"debounce",delay:s??wm,now:this._platform.performanceNow,queue:this._platform.taskQueue,signals:G(n)?[n]:n??U},o=t.limit?.(r);o==null?console.warn(`Binding ${t.constructor.name} does not support debounce rate limiting`):Zr.set(t,o)}unbind(e,t){Zr.get(t)?.dispose(),Zr.delete(t)}}su.$au={type:ht,name:"debounce"};const ir=oe("ISignaler",i=>i.singleton(ym));class ym{constructor(){this.signals=se()}dispatchSignal(e){const t=this.signals[e];if(t===void 0)return;let s;for(s of t.keys())s.handleChange(void 0,void 0)}addSignalListener(e,t){(this.signals[e]??=new Set).add(t)}removeSignalListener(e,t){this.signals[e]?.delete(t)}}class iu{constructor(){this._lookup=new Map,this._signaler=$(ir)}bind(e,t,...s){if(!("handleChange"in t))throw E(817);if(s.length===0)throw E(818);this._lookup.set(t,s);let n;for(n of s)Qh(this._signaler,n,t)}unbind(e,t){const s=this._lookup.get(t);this._lookup.delete(t);let n;for(n of s)Gh(this._signaler,n,t)}}iu.$au={type:ht,name:"signal"};const eo=new WeakMap,km=200;class nu{constructor(){({performanceNow:this._now,taskQueue:this._taskQueue}=$(Ii))}bind(e,t,s,n){const r={type:"throttle",delay:s??km,now:this._now,queue:this._taskQueue,signals:G(n)?[n]:n??U},o=t.limit?.(r);o==null?console.warn(`Binding ${t.constructor.name} does not support debounce rate limiting`):eo.set(t,o)}unbind(e,t){eo.get(t)?.dispose(),eo.delete(t)}}nu.$au={type:ht,name:"throttle"};const Bl=oe("IAppTask"),qe=Ii;class Cm{}const It=(()=>{const i=new WeakMap;let e=!1;return new class{get hideProp(){return e}set hideProp(t){e=t}get(t,s){return i.get(t)?.[s]??null}set(t,s,n){const r=i.get(t)??(i.set(t,new Cm),i.get(t));if(s in r)throw new Error(`Node already associated with a controller, remove the ref "${s}" first before associating with another controller`);return e||(t.$au??=r),r[s]=n}}})(),yr=oe("INode"),Ro=(()=>{const i=new WeakMap;return ss({add(e,t){let s=i.get(e);s==null&&i.set(e,s=[]),s.push(t)},getDefinitions(e){return i.get(e)??U}})})();class Gs{get type(){return vm}constructor(e,t,s,n,r,o,a,c,l,h,u){this.Type=e,this.name=t,this.aliases=s,this.key=n,this.defaultBindingMode=r,this.isTemplateController=o,this.bindables=a,this.noMultiBindings=c,this.watches=l,this.dependencies=h,this.containerStrategy=u}static create(e,t){let s,n;G(e)?(s=e,n={name:s}):(s=e.name,n=e);const r=as(Ut(t,"defaultBindingMode"),n.defaultBindingMode,t.defaultBindingMode,me);for(const o of Object.values(Ye.from(n.bindables)))Ye._add(o,t);return new Gs(t,as(Ut(t,"name"),s),ye(Ut(t,"aliases"),n.aliases,t.aliases),vi(s),G(r)?xn[r]??ga:r,as(Ut(t,"isTemplateController"),n.isTemplateController,t.isTemplateController,!1),Ye.from(...Ye.getAll(t),Ut(t,"bindables"),t.bindables,n.bindables),as(Ut(t,"noMultiBindings"),n.noMultiBindings,t.noMultiBindings,!1),ye(Ro.getDefinitions(t),t.watches),ye(Ut(t,"dependencies"),n.dependencies,t.dependencies),as(Ut(t,"containerStrategy"),n.containerStrategy,t.containerStrategy,"reuse"))}register(e,t){const s=this.Type,n=typeof t=="string"?vi(t):this.key,r=this.aliases;e.has(n,!1)?(Gs.warnDuplicate&&e.get(zs).warn(E(154,this.name)),console.warn(`[DEV:aurelia] ${E(154,this.name)}`)):e.register(e.has(s,!1)?null:jt(s,s),ms(s,n),...r.map(o=>ms(s,vi(o))))}toString(){return`au:ca:${this.name}`}}Gs.warnDuplicate=!0;const Me="custom-attribute",Si=Js(Me),vi=i=>`${Si}:${i}`,Ut=(i,e)=>De(ts(e),i),xm=i=>ee(i)&&(_r(Si,i)||i.$au?.type===Me),ru=(i,e)=>It.get(i,vi(e))??void 0,_a=(i,e)=>{const t=Gs.create(i,e),s=t.Type;return vt(t,s,Si,$t),s},va=i=>{const e=De(Si,i)??bs(i,Me,Gs.create);if(e===void 0)throw E(759,i);return e},Am=(i,e)=>{let t="",s="";if(G(e))t=vi(e),s=e;else{const r=va(e);t=r.key,s=r.name}let n=i;for(;n!==null;){const r=It.get(n,t);if(r?.is(s))return r;n=or(n)}return null},wa=ss({name:Si,keyFrom:vi,isType:xm,for:ru,closest:Am,define:_a,getDefinition:va,annotate(i,e,t){vt(t,i,ts(e))},getAnnotation:Ut,find(i,e){const t=i.find(Me,e);return t===null?null:De(Si,t)??bs(t,Me,Gs.create)??null}}),ii=oe("ILifecycleHooks");class Sm{constructor(e,t){this.definition=e,this.instance=t}}class ya{constructor(e,t){this.Type=e,this.propertyNames=t}static create(e,t){const s=new Set;let n=t.prototype;for(;n!==Uh;){for(const r of qh(n))r!=="constructor"&&!r.startsWith("_")&&s.add(r);n=Object.getPrototypeOf(n)}return new ya(t,s)}}const Rl=(()=>{const i=new WeakMap,e=new WeakMap;return ss({define(t,s){const n=ya.create(t,s),r=n.Type;return e.set(r,n),{register(o){jt(ii,r).register(o)}}},resolve(t){let s=i.get(t);if(s===void 0){i.set(t,s=new $m);const n=t.root,r=n===t?t.getAll(ii):t.has(ii,!1)?n.getAll(ii).concat(t.getAll(ii)):n.getAll(ii);let o,a,c,l,h;for(o of r){a=e.get(o.constructor),c=new Sm(a,o);for(l of a.propertyNames)h=s[l],h===void 0?s[l]=[c]:h.push(c)}}return s}})})();class $m{}class ln{constructor(e,t,s,n){this.Type=e,this.name=t,this.aliases=s,this.key=n}static create(e,t){let s,n;return G(e)?(s=e,n={name:s}):(s=e.name,n=e),new ln(t,as(Po(t,"name"),s),ye(Po(t,"aliases"),n.aliases,t.aliases),ou.keyFrom(s))}register(e,t){const s=this.Type,n=typeof t=="string"?cn(t):this.key,r=this.aliases;e.has(n,!1)?console.warn(`[DEV:aurelia] ${E(155,this.name)}`):e.register(e.has(s,!1)?null:jt(s,s),ms(s,n),...r.map(o=>ms(s,cn(o))))}}const di="value-converter",li=Js(di),Po=(i,e)=>De(ts(e),i),cn=i=>`${li}:${i}`,ou=ss({name:li,keyFrom:cn,isType(i){return ee(i)&&(_r(li,i)||i.$au?.type===di)},define(i,e){const t=ln.create(i,e),s=t.Type;return vt(t,s,li,$t),s},getDefinition(i){const e=De(li,i)??bs(i,di,ln.create);if(e===void 0)throw E(152,i);return e},annotate(i,e,t){vt(t,i,ts(e))},getAnnotation:Po,find(i,e){const t=i.find(di,e);return t==null?null:De(li,t)??bs(t,di,ln.create)??null},get(i,e){try{return i.get(ki(cn(e)))}catch(t){throw console.error("[DEV:aurelia] Cannot retrieve value converter with name",e),t}return i.get(ki(cn(e)))}});class Im{constructor(e,t){this._value=void 0,this.b=e,this._flushQueue=t}flush(){this.b.isBound&&this.b.updateSource(this._value)}handleChange(e,t){const s=this.b;e!==ce(s.ast,s._scope,s,null)&&(this._value=e,this._flushQueue.add(this))}}const Ss=(()=>{function i(e){this._scope=e}return e=>{Ze(e.prototype,"useScope",i)}})(),is=(()=>{class i{}const e=new WeakMap,t=new WeakMap,s=new WeakMap;function n(d){return this.l.get(d)}function r(d,g){let m=t.get(d);return m==null&&t.set(d,m=new i),m[g]??=Yh.get(d.l,g)}function o(d,g,m){const p=r(this,d);if(p==null)throw E(101,d);let f=s.get(this);if(f==null&&s.set(this,f={}),f[d])throw E(102,d);p.bind?.(g,this,...m)}function a(d,g){const m=r(this,d),p=s.get(this);m?.unbind?.(g,this),p!=null&&(p[d]=!1)}function c(d,g){let m=e.get(d);return m==null&&e.set(d,m=new i),m[g]??=ou.get(d.l,g)}function l(d){const g=c(this,d);if(g==null)throw E(103,d);const m=g.signals;if(m!=null){const p=this.l.get(ir),f=m.length;let w=0;for(;w<f;++w)p.addSignalListener(m[w],this)}}function h(d){const g=c(this,d);if(g?.signals===void 0)return;const m=this.l.get(ir);let p=0;for(;p<g.signals.length;++p)m.removeSignalListener(g.signals[p],this)}function u(d,g,m,p){const f=c(this,d);if(f==null)throw E(103,d);const w=f.withContext===!0;let T=null;switch(w&&(T={source:this.l.get(_s).controller.viewModel,binding:this}),g){case"toView":return"toView"in f?w?f.toView(m,T,...p):f.toView(m,...p):m;case"fromView":return"fromView"in f?w?f.fromView?.(m,T,...p):f.fromView?.(m,...p):m}}return d=>{const g=d.prototype;Ze(g,"get",n),Ze(g,"bindBehavior",o),Ze(g,"unbindBehavior",a),Ze(g,"bindConverter",l),Ze(g,"unbindConverter",h),Ze(g,"useConverter",u)}})(),Tm=oe("IFlushQueue",i=>i.singleton(Em));class Em{constructor(){this._flushing=!1,this._items=new Set}get count(){return this._items.size}add(e){if(this._items.add(e),!this._flushing){this._flushing=!0;try{this._items.forEach(Bm)}finally{this._flushing=!1}}}clear(){this._items.clear(),this._flushing=!1}}const Bm=function(i,e,t){t.delete(i),i.flush()},$s=(()=>{const i=new WeakSet,e=(s,n,r)=>{let o,a,c,l=!1;const h=()=>n(c),u=g=>{c=g,r.isBound?(a=o,o=nn(h,{delay:s.delay}),a?.cancel()):h()},d=u.dispose=()=>{a?.cancel(),o?.cancel(),a=o=void 0};return u.flush=()=>{l=o?.status===Tl,d(),l&&h()},u},t=(s,n,r)=>{let o,a,c=0,l=0,h,u=!1;const d=()=>s.now(),g=()=>n(h),m=f=>{h=f,r.isBound?(l=d()-c,a=o,l>s.delay?(c=d(),g()):o=nn(()=>{c=d(),g()},{delay:s.delay-l}),a?.cancel()):g()},p=m.dispose=()=>{a?.cancel(),o?.cancel(),a=o=void 0};return m.flush=()=>{u=o?.status===Tl,p(),u&&g()},m};return(s,n)=>{Ze(s.prototype,"limit",function(r){if(i.has(this))throw E(9996);i.add(this);const o=n(this,r),a=r.signals,c=a.length>0?this.get(ir):null,l=this[o],h=(...g)=>l.call(this,...g),u=r.type==="debounce"?e(r,h,this):t(r,h,this),d=c?{handleChange:u.flush}:null;return this[o]=u,c&&a.forEach(g=>Qh(c,g,d)),{dispose:()=>{c&&a.forEach(g=>Gh(c,g,d)),i.delete(this),u.dispose(),delete this[o]}}})}})(),Is=((i=new WeakSet)=>e=>function(){i.has(this)||(i.add(this),e.call(this))})();class ct{constructor(e,t,s,n,r,o,a,c,l){this.targetAttribute=o,this.targetProperty=a,this.mode=c,this.strict=l,this.isBound=!1,this._scope=void 0,this._isQueued=!1,this._value=void 0,this.boundFn=!1,this._isMulti=!1,this.l=t,this.ast=n,this._controller=e,this.target=r,this.oL=s,(this._isMulti=a.indexOf(" ")>-1)&&!ct._splitString.has(a)&&ct._splitString.set(a,a.split(" "))}updateTarget(e){const t=this.target,s=this.targetAttribute,n=this.targetProperty;switch(s){case"class":if(this._isMulti){const r=!!e;for(const o of ct._splitString.get(n))t.classList.toggle(o,r)}else t.classList.toggle(n,!!e);break;case"style":{let r="",o=Qs(e);G(o)&&o.includes("!important")&&(r="important",o=o.replace("!important","")),t.style.setProperty(n,o,r);break}default:e==null?t.removeAttribute(s):t.setAttribute(s,Qs(e))}}handleChange(){this.isBound&&(this._isQueued||(this._isQueued=!0,Pt(()=>{if(this._isQueued=!1,!this.isBound)return;this.obs.version++;const e=ce(this.ast,this._scope,this,(this.mode&me)>0?this:null);this.obs.clear(),e!==this._value&&(this._value=e,this.updateTarget(e))})))}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ks(this.ast,e,this),this.mode&(me|br)&&this.updateTarget(this._value=ce(this.ast,e,this,(this.mode&me)>0?this:null)),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Cs(this.ast,this._scope,this),this._scope=void 0,this._value=void 0,this.obs.clearAll())}}ct.mix=Is(()=>{Ss(ct),$s(ct,()=>"updateTarget"),dt(ct,null),is(ct)});ct._splitString=new Map;class Rm{constructor(e,t,s,n,r,o,a,c){this.ast=n,this.target=r,this.targetProperty=o,this.mode=a,this.strict=c,this.isBound=!1,this._scope=void 0,this._isQueued=!1,this._controller=e,this.oL=s,this._targetObserver=s.getAccessor(r,o);const l=n.expressions,h=this.partBindings=Array(l.length),u=l.length;let d=0;for(;u>d;++d)h[d]=new Os(l[d],r,o,t,s,c,this)}_handlePartChange(){if(!this.isBound)return;if(this._controller.state!==At&&(this._targetObserver.type&Nt)>0){if(this._isQueued)return;this._isQueued=!0,Pt(()=>{this._isQueued=!1,this.isBound&&this.updateTarget()})}else this.updateTarget()}updateTarget(){const e=this.partBindings,t=this.ast,s=this.target,n=this.targetProperty,r=t.parts,o=e.length;let a="",c=0;if(o===1)a=r[0]+e[0]._evaluate()+r[1];else for(a=r[0];o>c;++c)a+=e[c]._evaluate()+r[c+1];this._targetObserver.setValue(a,s,n)}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e;const t=this.partBindings,s=t.length;let n=0;for(;s>n;++n)t[n].bind(e);this.updateTarget(),this.isBound=!0}unbind(){if(!this.isBound)return;this.isBound=!1,this._scope=void 0;const e=this.partBindings,t=e.length;let s=0;for(;t>s;++s)e[s].unbind()}useAccessor(e){this._targetObserver=e}}class Os{constructor(e,t,s,n,r,o,a){this.ast=e,this.target=t,this.targetProperty=s,this.strict=o,this.owner=a,this.mode=me,this.isBound=!1,this._value="",this.boundFn=!1,this._isDirty=!1,this.l=n,this.oL=r}updateTarget(){this.owner._handlePartChange()}handleChange(){this.isBound&&(this._isDirty=!0,this.updateTarget())}handleCollectionChange(){this.isBound&&(this._isDirty=!0,this.updateTarget())}_evaluate(){if(!this._isDirty)return this._value;this.obs.version++;const e=ce(this.ast,this._scope,this,(this.mode&me)>0?this:null);return this.obs.clear(),this._value=e,we(e)&&this.observeCollection(e),this._isDirty=!1,this._value}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ks(this.ast,e,this),this._value=ce(this.ast,this._scope,this,(this.mode&me)>0?this:null),we(this._value)&&this.observeCollection(this._value),this._isDirty=!1,this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,this._value=void 0,this._isDirty=!1,Cs(this.ast,this._scope,this),this._scope=void 0,this.obs.clearAll())}}Os.mix=Is(()=>{Ss(Os),$s(Os,()=>"updateTarget"),dt(Os,null),is(Os)});class Ls{constructor(e,t,s,n,r,o,a){this.p=n,this.ast=r,this.target=o,this.strict=a,this.isBound=!1,this.mode=me,this._isQueued=!1,this._value="",this._needsRemoveNode=!1,this.boundFn=!1,this.l=t,this._controller=e,this.oL=s}updateTarget(e){const t=this.target,s=this._value;this._value=e,this._needsRemoveNode&&(s.parentNode?.removeChild(s),this._needsRemoveNode=!1),e instanceof this.p.Node&&(t.parentNode?.insertBefore(e,t),e="",this._needsRemoveNode=!0),t.textContent=Qs(e??"")}handleChange(){this.isBound&&(this._isQueued||(this._isQueued=!0,Pt(()=>{if(this._isQueued=!1,!this.isBound)return;this.obs.version++;const e=ce(this.ast,this._scope,this,(this.mode&me)>0?this:null);this.obs.clear(),e!==this._value&&this.updateTarget(e)})))}handleCollectionChange(){this.isBound&&(this._isQueued||(this._isQueued=!0,Pt(()=>{if(this._isQueued=!1,!this.isBound)return;this.obs.version++;const e=this._value=ce(this.ast,this._scope,this,(this.mode&me)>0?this:null);this.obs.clear(),we(e)&&this.observeCollection(e),this.updateTarget(e)})))}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ks(this.ast,e,this);const t=this._value=ce(this.ast,this._scope,this,(this.mode&me)>0?this:null);we(t)&&this.observeCollection(t),this.updateTarget(t),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Cs(this.ast,this._scope,this),this._needsRemoveNode&&this._value.parentNode?.removeChild(this._value),this._scope=void 0,this.obs.clearAll())}}Ls.mix=Is(()=>{Ss(Ls),$s(Ls,()=>"updateTarget"),dt(Ls,null),is(Ls)});class Ds{constructor(e,t,s,n,r,o){this.ast=s,this.targetProperty=n,this.isBound=!1,this._scope=void 0,this.target=null,this.boundFn=!1,this.l=e,this.oL=t,this.strict=o,this._toBindingContext=r}updateTarget(){this.target[this.targetProperty]=this._value}handleChange(){this.isBound&&(this.obs.version++,this._value=ce(this.ast,this._scope,this,this),this.obs.clear(),this.updateTarget())}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,this.target=this._toBindingContext?e.bindingContext:e.overrideContext,ks(this.ast,e,this),this._value=ce(this.ast,this._scope,this,this),this.updateTarget(),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Cs(this.ast,this._scope,this),this._scope=void 0,this.obs.clearAll())}}Ds.mix=Is(()=>{Ss(Ds),$s(Ds,()=>"updateTarget"),dt(Ds,null),is(Ds)});class Ne{constructor(e,t,s,n,r,o,a,c){this.ast=n,this.target=r,this.targetProperty=o,this.mode=a,this.strict=c,this.isBound=!1,this._scope=void 0,this._targetObserver=void 0,this._isQueued=!1,this._targetSubscriber=null,this.boundFn=!1,this.l=t,this._controller=e,this.oL=s}updateTarget(e){this._targetObserver.setValue(e,this.target,this.targetProperty)}updateSource(e){bn(this.ast,this._scope,this,null,e)}handleChange(){if(!this.isBound)return;if(this._controller.state!==At&&(this._targetObserver.type&Nt)>0){if(this._isQueued)return;this._isQueued=!0,Pt(()=>{this._isQueued=!1,this.isBound&&this._handleChange()})}else this._handleChange()}_handleChange(){this.obs.version++;const e=ce(this.ast,this._scope,this,(this.mode&me)>0?this:null);this.obs.clear(),this.updateTarget(e)}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ks(this.ast,e,this);const t=this.oL,s=this.mode;let n=this._targetObserver;n||(s&Zt?n=t.getObserver(this.target,this.targetProperty):n=t.getAccessor(this.target,this.targetProperty),this._targetObserver=n);const r=(s&me)>0;s&(me|br)&&this.updateTarget(ce(this.ast,this._scope,this,r?this:null)),s&Zt&&(n.subscribe(this._targetSubscriber??=new Im(this,this.l.get(Tm))),r||this.updateSource(n.getValue(this.target,this.targetProperty))),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,this._targetSubscriber&&(this._targetObserver.unsubscribe(this._targetSubscriber),this._targetSubscriber=null),Cs(this.ast,this._scope,this),this._scope=void 0,this.obs.clearAll())}useTargetObserver(e){this._targetObserver?.unsubscribe(this),(this._targetObserver=e).subscribe(this)}useTargetSubscriber(e){if(this._targetSubscriber!=null)throw E(9995);this._targetSubscriber=e}}Ne.mix=Is(()=>{Ss(Ne),$s(Ne,i=>i.mode&Zt?"updateSource":"updateTarget"),dt(Ne,null),is(Ne)});class Ms{constructor(e,t,s,n,r){this.oL=t,this.ast=s,this.target=n,this.strict=r,this.isBound=!1,this._scope=void 0,this.l=e}updateSource(){this.isBound?(this.obs.version++,bn(this.ast,this._scope,this,this,this.target),this.obs.clear()):bn(this.ast,this._scope,this,null,null)}handleChange(){this.isBound&&this.updateSource()}handleCollectionChange(){this.isBound&&this.updateSource()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ks(this.ast,e,this),this.isBound=!0,this.updateSource()}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),ce(this.ast,this._scope,this,null)===this.target&&this.updateSource(),Cs(this.ast,this._scope,this),this._scope=void 0)}}Ms.mix=Is(()=>{dt(Ms,null),$s(Ms,()=>"updateSource"),Ss(Ms),is(Ms)});class Pm{constructor(e,t=!1,s){this.prevent=e,this.capture=t,this.onError=s}}class fi{constructor(e,t,s,n,r,o,a){this.ast=t,this.target=s,this.targetEvent=n,this.strict=a,this.isBound=!1,this.self=!1,this.boundFn=!0,this._modifiedEventHandler=null,this.l=e,this._options=r,this._modifiedEventHandler=o}callSource(e){const t=this._scope.overrideContext;t.$event=e;let s=ce(this.ast,this._scope,this,null);delete t.$event,ee(s)&&(s=s(e)),s!==!0&&this._options.prevent&&e.preventDefault()}handleEvent(e){if(!(this.self&&this.target!==e.composedPath()[0])&&this._modifiedEventHandler?.(e)!==!1)try{this.callSource(e)}catch(t){this._options.onError(e,t)}}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ks(this.ast,e,this),this.target.addEventListener(this.targetEvent,this,this._options),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Cs(this.ast,this._scope,this),this._scope=void 0,this.target.removeEventListener(this.targetEvent,this,this._options))}}fi.mix=Is(function(){Ss(fi),$s(fi,()=>"callSource"),is(fi)});const kr=oe("IEventModifier"),au=oe("IKeyMapping",i=>i.instance({meta:ss(["ctrl","alt","shift","meta"]),keys:{escape:"Escape",enter:"Enter",space:"Space",tab:"tab",...Array.from({length:25}).reduce((e,t,s)=>{let n=String.fromCharCode(s+65);return e[s+65]=n,n=String.fromCharCode(s+97),e[s+97]=e[n]=n,e},{})}}));class ka{constructor(){this.type=["click","mousedown","mousemove","mouseup","dblclick","contextmenu"],this._mapping=$(au),this._mouseButtons=["left","middle","right"]}static register(e){e.register(jt(kr,ka))}getHandler(e){const t=e.split(/[:+.]/);return(s=>{let n=!1,r=!1,o;for(o of t){switch(o){case"prevent":n=!0;continue;case"stop":r=!0;continue;case"left":case"middle":case"right":if(s.button!==this._mouseButtons.indexOf(o))return!1;continue}if(this._mapping.meta.includes(o)&&s[`${o}Key`]!==!0)return!1;console.warn(`Modifier '${o}' is not supported for mouse events.`)}return n&&s.preventDefault(),r&&s.stopPropagation(),!0})}}class Ca{constructor(){this._mapping=$(au),this.type=["keydown","keyup"]}static register(e){e.register(jt(kr,Ca))}getHandler(e){const t=e.split(/[:+.]/);return(s=>{let n=!1,r=!1,o;for(o of t){switch(o){case"prevent":n=!0;continue;case"stop":r=!0;continue}if(this._mapping.meta.includes(o)){if(s[`${o}Key`]!==!0)return!1;continue}if(this._mapping.keys[o]!==s.key)return!1;console.warn(`Modifier '${o}' is not supported for keyboard event with key "${s.key}".`)}return n&&s.preventDefault(),r&&s.stopPropagation(),!0})}}class xa{constructor(){this.type=["$ALL"]}static register(e){e.register(jt(kr,xa))}getHandler(e){const t=e.split(/[:+.]/);return(s=>{let n=!1,r=!1,o;for(o of t){switch(o){case"prevent":n=!0;continue;case"stop":r=!0;continue}console.warn(`Modifier '${o}' is not supported for event "${s.type}".`)}return n&&s.preventDefault(),r&&s.stopPropagation(),!0})}}const lu=oe("IEventModifierHandler",i=>i.instance({getHandler:()=>(console.warn("No event modifier handler registered"),null)}));class Aa{constructor(){this._reg=$(Uo(kr)).reduce((e,t)=>((we(t.type)?t.type:[t.type]).forEach(n=>e[n]=t),e),{})}static register(e){e.register(jt(lu,Aa))}getHandler(e,t){return G(t)?(this._reg[e]??this._reg.$ALL)?.getHandler(t)??null:null}}const Om={register(i){i.register(Aa,ka,Ca,xa)}},st=oe("IViewFactory");class Cr{constructor(e,t){this.isCaching=!1,this._cache=null,this._cacheSize=-1,this.name=t.name,this.container=e,this.def=t}setCacheSize(e,t){e&&(e==="*"?e=Cr.maxCacheSize:G(e)&&(e=parseInt(e,10)),(this._cacheSize===-1||!t)&&(this._cacheSize=e)),this._cacheSize>0?this._cache=[]:this._cache=null,this.isCaching=this._cacheSize>0}canReturnToCache(e){return this._cache!=null&&this._cache.length<this._cacheSize}tryReturnToCache(e){return this.canReturnToCache(e)?(this._cache.push(e),!0):!1}create(e){const t=this._cache;let s;return t!=null&&t.length>0?(s=t.pop(),s):(s=et.$view(this,e),s)}}Cr.maxCacheSize=65535;const Lm=(()=>{const i=(e,t)=>e.document.createComment(t);return e=>{const t=i(e,"au-end");return t.$start=i(e,"au-start"),t}})(),Bn=(i,e,t)=>{if(i===null)return;const s=t.length;let n=0;for(;s>n;)i.insertBefore(t[n],e),++n},cu=(i,e)=>new i.ownerDocument.defaultView.MutationObserver(e),Dm=i=>i.nodeType===1,hu="default",Mm="au-slot",uu=oe("IAuSlotsInfo");class du{constructor(e){this.projectedSlots=e}}const Fm=oe("IAuSlotWatcher");class xr{static create(e,t,s,n,r,o,a,c){const l=[],h=n.renderers,u=g=>{let m=g,p=e;for(;p!=null&&m>0;)p=p.parent,--m;if(p==null)throw E(9999);return p},d=g=>{const m=u(g),p=new xr(m),f=r.compileSpread(m.controller.definition,m.instruction?.captures??U,m.controller.container,t,s);let w;for(w of f)switch(w.type){case Ae.spreadTransferedBinding:d(g+1);break;case Ae.spreadElementProp:h[w.instruction.type].render(p,wi(t),w.instruction,o,a,c);break;default:h[w.type].render(p,t,w,o,a,c)}l.push(p)};return d(0),l}get container(){return this.locator}get definition(){return this.$controller.definition}get state(){return this.$controller.state}constructor(e){this.isBound=!1,this._innerBindings=[],this.locator=(this.$controller=(this._hydrationContext=e).controller).container}get(e){return this.locator.get(e)}bind(e){if(this.isBound)return;this.isBound=!0;const t=this.scope=this._hydrationContext.controller.scope.parent??void 0;if(t==null)throw E(9999);this._innerBindings.forEach(s=>s.bind(t))}unbind(){this._innerBindings.forEach(e=>e.unbind()),this.isBound=!1}addBinding(e){this._innerBindings.push(e)}addChild(e){if(e.vmKind!==Rs)throw E(9998);this.$controller.addChild(e)}}class St{constructor(e,t,s,n,r,o,a){this.target=t,this.targetKeys=s,this.ast=n,this.strict=a,this.isBound=!1,this._scope=void 0,this.boundFn=!1,this._bindingCache={},this._scopeCache=new WeakMap,this._controller=e,this.oL=r,this.l=o}updateTarget(){this.obs.version++;const e=ce(this.ast,this._scope,this,this);this.obs.clear(),this._createBindings(e,!0)}handleChange(){this.isBound&&this.updateTarget()}handleCollectionChange(){this.isBound&&this.updateTarget()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this.isBound=!0,this._scope=e,ks(this.ast,e,this);const t=ce(this.ast,e,this,this);this._createBindings(t,!1)}unbind(){if(!this.isBound)return;this.isBound=!1,Cs(this.ast,this._scope,this),this._scope=void 0;let e;for(e in this._bindingCache)this._bindingCache[e].unbind()}_createBindings(e,t){let s;if(!lc(e)){console.warn(`[DEV:aurelia] $bindable spread is given a non object for properties: "${this.targetKeys.join(", ")}" of ${this.target.constructor.name}`);for(s in this._bindingCache)this._bindingCache[s]?.unbind();return}let n,r=this._scopeCache.get(e);r==null&&this._scopeCache.set(e,r=xe.fromParent(this._scope,e));for(s of this.targetKeys)n=this._bindingCache[s],s in e?(n==null&&(n=this._bindingCache[s]=new Ne(this._controller,this.l,this.oL,St._astCache[s]??=new en(s,0),this.target,s,xn.toView,this.strict)),n.bind(r)):t&&n?.unbind()}}St.mix=Is(()=>{Ss(St),$s(St,()=>"updateTarget"),dt(St,null),is(St)});St._astCache={};const Pl=(i,e,t,s)=>{i.addEventListener(e,t,s)},Ol=(i,e,t,s)=>{i.removeEventListener(e,t,s)},Sa=i=>{let e;const t=i.prototype;Ze(t,"subscribe",function(s){if(this.subs.add(s)&&this.subs.count===1){for(e of this._config.events)Pl(this._el,e,this);this._listened=!0,this._start?.()}}),Ze(t,"unsubscribe",function(s){if(this.subs.remove(s)&&this.subs.count===0){for(e of this._config.events)Ol(this._el,e,this);this._listened=!1,this._stop?.()}}),Ze(t,"useConfig",function(s){if(this._config=s,this._listened){for(e of this._config.events)Ol(this._el,e,this);for(e of this._config.events)Pl(this._el,e,this)}})},Ar=i=>{Ze(i.prototype,"subscribe",ut),Ze(i.prototype,"unsubscribe",ut)};class Sr{get doNotCache(){return!0}constructor(e,t={}){this.obj=e,this.mapping=t,this.type=As|Nt,this._value="",this._nameIndex={},this._version=0}getValue(){return this._value}setValue(e){e!==this._value&&(this._value=e,this._flushChanges())}_flushChanges(){const e=this._nameIndex,t=++this._version,s=this.obj.classList,n=fu(this._value),r=n.length;let o=0,a;if(r>0)for(;o<r;o++)a=n[o],a=this.mapping[a]||a,a.length!==0&&(e[a]=this._version,s.add(a));if(t!==1)for(a in e)a=this.mapping[a]||a,e[a]!==t&&s.remove(a)}}Ar(Sr);function fu(i){if(G(i))return Ll(i);if(typeof i!="object")return U;if(we(i)){const s=i.length;if(s>0){const n=[];let r=0;for(;s>r;++r)n.push(...fu(i[r]));return n}else return U}const e=[];let t;for(t in i)i[t]&&(t.includes(" ")?e.push(...Ll(t)):e.push(t));return e}function Ll(i){const e=i.match(/\S+/g);return e===null?U:e}const pu=i=>({$isResolver:!0,resolve(e,t){return t.get(_s).controller.container.get(Md(i))}}),gu=oe("IRenderer");function Be(i,e){const t=i[Symbol.metadata]??=Object.create(null);return t[Dt]={register(s){jt(gu,i).register(s)}},i}function Lt(i,e,t){return G(e)?i.parse(e,t):e}function $r(i){return i.viewModel!=null?i.viewModel:i}function Nm(i,e){if(e==="element")return i;switch(e){case"controller":return wi(i);case"view":throw E(750);case"component":return wi(i).viewModel;default:{const t=ru(i,e);if(t!==void 0)return t.viewModel;const s=wi(i,{name:e});if(s===void 0)throw E(751,e);return s.viewModel}}}const jm=Be(class{constructor(){this.target=Ae.setProperty}render(e,t,s){const n=$r(t);n.$observers?.[s.to]!==void 0?n.$observers[s.to].setValue(s.value):n[s.to]=s.value}}),Vm=Be(class{constructor(){this._rendering=$(Zs),this.target=Ae.hydrateElement}render(e,t,s,n,r,o){let a,c,l;const h=s.res,u=s.projections,d=e.container;switch(typeof h){case"string":if(a=hs.find(d,h),a==null)throw E(752,s,e);break;default:a=h}const m=s.containerless||a.containerless?_n(t):null,p=cb(n,e,t,s,m,u==null?void 0:new du(ma(u)));c=p.invoke(a.Type),l=et.$el(p,c,t,s,a,m);const f=this._rendering.renderers,w=s.props,T=w.length;let R=0,S;for(;T>R;)S=w[R],f[S.type].render(e,l,S,n,r,o),++R;e.addChild(l)}}),Hm=Be(class{constructor(){this._rendering=$(Zs),this.target=Ae.hydrateAttribute}render(e,t,s,n,r,o){let a=e.container,c;switch(typeof s.res){case"string":if(c=wa.find(a,s.res),c==null)throw E(753,s,e);break;default:c=s.res}const l=wu(n,c,e,t,s,void 0,void 0),h=et.$attr(l.ctn,l.vm,t,c);It.set(t,c.key,h);const u=this._rendering.renderers,d=s.props,g=d.length;let m=0,p;for(;g>m;)p=d[m],u[p.type].render(e,h,p,n,r,o),++m;e.addChild(h)}}),zm=Be(class{constructor(){this._rendering=$(Zs),this.target=Ae.hydrateTemplateController}render(e,t,s,n,r,o){let a=e.container,c;switch(typeof s.res){case"string":if(c=wa.find(a,s.res),c==null)throw E(754,s,e);break;default:c=s.res}const l=this._rendering.getViewFactory(s.def,c.containerStrategy==="new"?a.createChild({inheritParentResources:!0}):a),h=_n(t),u=wu(n,c,e,t,s,l,h),d=et.$attr(u.ctn,u.vm,t,c);It.set(h,c.key,d),u.vm.link?.(e,d,t,s);const g=this._rendering.renderers,m=s.props,p=m.length;let f=0,w;for(;p>f;)w=m[f],g[w.type].render(e,d,w,n,r,o),++f;e.addChild(d)}}),Um=Be(class{constructor(){this.target=Ae.hydrateLetElement,Ds.mix()}render(e,t,s,n,r,o){t.remove();const a=s.instructions,c=s.toBindingContext,l=e.container,h=a.length;let u,d,g=0;for(;h>g;)u=a[g],d=Lt(r,u.from,Ot),e.addBinding(new Ds(l,o,d,u.to,c,e.strict??!1)),++g}}),Wm=Be(class{constructor(){this.target=Ae.refBinding,Ms.mix()}render(e,t,s,n,r,o){e.addBinding(new Ms(e.container,o,Lt(r,s.from,Ot),Nm(t,s.to),e.strict??!1))}}),qm=Be(class{constructor(){this.target=Ae.interpolation,Os.mix()}render(e,t,s,n,r,o){const a=e.container,c=new Rm(e,a,o,Lt(r,s.from,hm),$r(t),s.to,me,e.strict??!1);if(s.to==="class"&&c.target.nodeType>0){const l=a.get(pu(nr));c.useAccessor(new Sr(c.target,l))}e.addBinding(c)}}),Km=Be(class{constructor(){this.target=Ae.propertyBinding,Ne.mix()}render(e,t,s,n,r,o){const a=e.container,c=new Ne(e,a,o,Lt(r,s.from,Ot),$r(t),s.to,s.mode,e.strict??!1);if(s.to==="class"&&c.target.nodeType>0){const l=a.get(pu(nr));c.useTargetObserver(new Sr(c.target,l))}e.addBinding(c)}}),Qm=Be(class{constructor(){this.target=Ae.iteratorBinding,Ne.mix()}render(e,t,s,n,r,o){e.addBinding(new Ne(e,e.container,o,Lt(r,s.forOf,um),$r(t),s.to,me,e.strict??!1))}}),Gm=Be(class{constructor(){this.target=Ae.textBinding,Ls.mix()}render(e,t,s,n,r,o){e.addBinding(new Ls(e,e.container,o,n,Lt(r,s.from,Ot),t,e.strict??!1))}}),Xm=oe("IListenerBindingOptions",i=>i.singleton(class{constructor(){this.p=$(qe),this.prevent=!1,this.onError=(e,t)=>{const s=new this.p.CustomEvent("au-event-error",{cancelable:!0,detail:{event:e,error:t}});if(this.p.window.dispatchEvent(s),!s.defaultPrevented)throw t}}})),Ym=Be(class{constructor(){this.target=Ae.listenerBinding,this._modifierHandler=$(lu),this._defaultOptions=$(Xm),fi.mix()}render(e,t,s,n,r){e.addBinding(new fi(e.container,Lt(r,s.from,dm),t,s.to,new Pm(this._defaultOptions.prevent,s.capture,this._defaultOptions.onError),this._modifierHandler.getHandler(s.to,s.modifier),e.strict??!1))}}),Jm=Be(class{constructor(){this.target=Ae.setAttribute}render(e,t,s){t.setAttribute(s.to,s.value)}}),Zm=Be(class{constructor(){this.target=Ae.setClassAttribute}render(e,t,s){ab(t.classList,s.value)}}),eb=Be(class{constructor(){this.target=Ae.setStyleAttribute}render(e,t,s){t.style.cssText+=s.value}}),tb=["height","width","border-width","padding","padding-left","padding-right","padding-top","padding-right","padding-inline","padding-block","margin","margin-left","margin-right","margin-top","margin-bottom","margin-inline","margin-block","top","right","bottom","left"],sb=Be(class{constructor(){this.target=Ae.stylePropertyBinding,Ne.mix()}render(e,t,s,n,r,o){if(tb.includes(s.to)){e.addBinding(new ib(e,e.container,o,Lt(r,s.from,Ot),t.style,s.to,me,e.strict??!1));return}e.addBinding(new Ne(e,e.container,o,Lt(r,s.from,Ot),t.style,s.to,me,e.strict??!1))}});class ib extends Ne{updateTarget(e){return typeof e=="number"&&e>0&&console.warn(`[DEV]: Setting number ${e} as value for style.${this.targetProperty}. Did you meant "${e}px"?`),super.updateTarget(e)}}const nb=Be(class{constructor(){this.target=Ae.attributeBinding,ct.mix()}render(e,t,s,n,r,o){const a=e.container,c=a.has(nr,!1)?a.get(nr):null;e.addBinding(new ct(e,a,o,Lt(r,s.from,Ot),t,s.attr,c==null?s.to:s.to.split(/\s/g).map(l=>c[l]??l).join(" "),me,e.strict??!1))}}),rb=Be(class{constructor(){this._compiler=$(dr),this._rendering=$(Zs),this.target=Ae.spreadTransferedBinding}render(e,t,s,n,r,o){xr.create(e.container.get(_s),t,void 0,this._rendering,this._compiler,n,r,o).forEach(a=>e.addBinding(a))}}),ob=Be(class{constructor(){this.target=Ae.spreadValueBinding,St.mix()}render(e,t,s,n,r,o){const a=s.target;if(a==="$bindables")e.addBinding(new St(e,t.viewModel,ma(t.definition.bindables),r.parse(s.from,Ot),o,e.container,e.strict??!1));else throw E(820,a)}});function ab(i,e){const t=e.length;let s=0;for(let n=0;n<t;++n)e.charCodeAt(n)===32?(n!==s&&i.add(e.slice(s,n)),s=n+1):n+1===t&&i.add(e.slice(s))}const mu="IController",bu="IInstruction",lb="IRenderLocation",_u="ISlotsInfo";function cb(i,e,t,s,n,r){const o=e.container.createChild();return Tr(o,t,i),le(o,Ir,new Ce(mu,e)),le(o,Bi,new Ce(bu,s)),le(o,Ve,n==null?ku:new yu(n)),le(o,st,Cu),le(o,uu,r==null?xu:new Ce(_u,r)),o}class vu{get $isResolver(){return!0}constructor(e){this.f=e}resolve(){const e=this.f;if(e===null)throw E(755);if(!G(e.name)||e.name.length===0)throw E(756);return e}}function wu(i,e,t,s,n,r,o,a){const c=t instanceof et?t:t.$controller,l=c.container.createChild();return Tr(l,s,i),le(l,Ir,new Ce(mu,c)),le(l,Bi,new Ce(bu,n)),le(l,Ve,o==null?ku:new Ce(lb,o)),le(l,st,r==null?Cu:new vu(r)),le(l,uu,xu),{vm:l.invoke(e.Type),ctn:l}}class yu{get name(){return"IRenderLocation"}get $isResolver(){return!0}constructor(e){this._location=e}resolve(){return this._location}}const ku=new yu(null),Cu=new vu(null),xu=new Ce(_u,new du(U)),Zs=oe("IRendering",i=>i.singleton(hb));class hb{get renderers(){return this._renderers??=this._ctn.getAll(gu,!1).reduce((e,t)=>(e[t.target]!==void 0&&console.warn(`[DEV:aurelia] Renderer for target ${t.target} already exists.`),e[t.target]??=t,e),se())}constructor(){this._compilationCache=new WeakMap,this._fragmentCache=new WeakMap;const e=this._ctn=$(kn).root,t=this._platform=e.get(qe);this._exprParser=e.get(Ti),this._observerLocator=e.get(Pi),this._marker=t.document.createElement("au-m"),this._empty=new no(t,t.document.createDocumentFragment())}compile(e,t){const s=t.get(dr),n=this._compilationCache;let r=n.get(e);return r==null&&n.set(e,r=We.create(e.needsCompile?s.compile(e,t):e)),r}getViewFactory(e,t){return new Cr(t,We.getOrCreate(e))}createNodes(e){if(e.enhance===!0)return new no(this._platform,this._transformMarker(e.template));let t,s=!1;const n=this._fragmentCache,r=this._platform,o=r.document;if(n.has(e))t=n.get(e);else{const a=e.template;let c;a==null?t=null:a instanceof r.Node?a.nodeName==="TEMPLATE"?(t=a.content,s=!0):(t=o.createDocumentFragment()).appendChild(a.cloneNode(!0)):(c=o.createElement("template"),G(a)&&(c.innerHTML=a),t=c.content,s=!0),this._transformMarker(t),n.set(e,t)}return t==null?this._empty:new no(this._platform,s?o.importNode(t,!0):o.adoptNode(t.cloneNode(!0)))}render(e,t,s,n){const r=s.instructions,o=this.renderers,a=t.length;let c=0,l=0,h=r.length,u,d,g;if(a!==h)throw E(757,a,h);if(n!=null&&(u=s.surrogates,(h=u.length)>0))for(l=0;h>l;)d=u[l],o[d.type].render(e,n,d,this._platform,this._exprParser,this._observerLocator),++l;if(a>0)for(;a>c;){for(u=r[c],g=t[c],l=0,h=u.length;h>l;)d=u[l],o[d.type].render(e,g,d,this._platform,this._exprParser,this._observerLocator),++l;++c}}_transformMarker(e){if(e==null)return null;const t=this._platform.document.createTreeWalker(e,128);let s;for(;(s=t.nextNode())!=null;)s.nodeValue==="au*"&&s.parentNode.replaceChild(t.currentNode=this._marker.cloneNode(),s);return e}}const Dl=oe("IShadowDOMStyles"),ub=oe("IShadowDOMGlobalStyles",i=>i.instance({applyTo:ut})),{enter:db,exit:fb}=hg,{wrap:pb,unwrap:gb}=Kg;class Au{get value(){return this._value}constructor(e,t,s,n,r="async"){this.obj=e,this.$get=s,this.isBound=!1,this._isQueued=!1,this._computeDepth=0,this._value=void 0,this._callback=n,this.oL=t,this._flush=r}handleChange(){this.run()}handleCollectionChange(){this.run()}bind(){this.isBound||(this.compute(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){if(this.isBound){if(this._flush==="sync"){this._run();return}this._isQueued||(this._isQueued=!0,Pt(()=>{this._isQueued=!1,this._run()}))}}_run(){if(!this.isBound)return;const e=this.obj,t=this._value;if(++this._computeDepth>100)throw new Error("AURXXXX: Possible infinitely recursive side-effect detected in a watcher.");const s=this.compute();Yt(s,t)||this._callback.call(e,s,t,e),this._isQueued||(this._computeDepth=0)}compute(){this.obs.version++;try{return db(this),this._value=gb(this.$get.call(void 0,pb(this.obj),this))}finally{this.obs.clear(),fb(this)}}}dt(Au,null);class Oo{get value(){return this._value}constructor(e,t,s,n,r,o="async"){this.scope=e,this.l=t,this.oL=s,this.isBound=!1,this._isQueued=!1,this.boundFn=!1,this.obj=e.bindingContext,this._expression=n,this._callback=r,this._flush=o}handleChange(){this.run()}handleCollectionChange(){this.run()}run(){if(this.isBound){if(this._flush==="sync"){this._run();return}this._isQueued||(this._isQueued=!0,Pt(()=>{this._isQueued=!1,this._run()}))}}_run(){if(!this.isBound)return;const e=this._expression,t=this.obj,s=this._value;this.obs.version++;const n=ce(e,this.scope,this,this);this.obs.clear(),Yt(n,s)||(this._value=n,this._callback.call(t,n,s,t))}bind(){this.isBound||(this.obs.version++,this._value=ce(this._expression,this.scope,this,this),this.obs.clear(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this._value=void 0)}}dt(Oo,null),is(Oo);class et{get lifecycleHooks(){return this._lifecycleHooks}get isActive(){return(this.state&(At|Fs))>0&&(this.state&hn)===0}get name(){if(this.parent===null)switch(this.vmKind){case Rs:return`[${this.definition.name}]`;case ot:return this.definition.name;case Oe:return this.viewFactory.name}switch(this.vmKind){case Rs:return`${this.parent.name}>[${this.definition.name}]`;case ot:return`${this.parent.name}>${this.definition.name}`;case Oe:return this.viewFactory.name===this.parent.definition?.name?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}get viewModel(){return this._vm}set viewModel(e){this._vm=e,this._vmHooks=e==null||this.vmKind===Oe?pi.none:new pi(e)}get strict(){return this.definition?.strict}constructor(e,t,s,n,r,o,a){this.container=e,this.vmKind=t,this.definition=s,this.viewFactory=n,this.host=o,this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.scope=null,this.isBound=!1,this._isBindingDone=!1,this.mountTarget=Su,this.shadowRoot=null,this.nodes=null,this.location=null,this._lifecycleHooks=null,this.state=to,this._fullyNamed=!1,this.$initiator=null,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this._activatingStack=0,this._detachingStack=0,this._unbindingStack=0,this._vm=r,this._vmHooks=t===Oe?pi.none:new pi(r),this.logger=null,this.debug=!1,this.location=a,this._rendering=e.root.get(Zs)}static getCached(e){return rs.get(e)}static getCachedOrThrow(e){const t=et.getCached(e);if(t===void 0)throw E(500,e);return t}static $el(e,t,s,n,r=void 0,o=null){if(rs.has(t))return rs.get(t);if(r==null)try{r=Eu(t.constructor)}catch(l){throw console.error(`[DEV:aurelia] Custom element definition not found for creating a controller with host: <${s.nodeName} /> and component ${t.constructor.name||"(Anonymous) class"}`),l}le(e,r.Type,new Ce(r.key,t,r.Type));const a=new et(e,ot,r,null,t,s,o),c=e.get(_c(_s));return r.dependencies.length>0&&e.register(...r.dependencies),le(e,_s,new Ce("IHydrationContext",new $u(a,n,c))),rs.set(t,a),(n==null||n.hydrate!==!1)&&a._hydrateCustomElement(n),a}static $attr(e,t,s,n){if(rs.has(t))return rs.get(t);n=n??va(t.constructor),le(e,n.Type,new Ce(n.key,t,n.Type));const r=new et(e,Rs,n,null,t,s,null);return n.dependencies.length>0&&e.register(...n.dependencies),rs.set(t,r),r._hydrateCustomAttribute(),r}static $view(e,t=void 0){const s=new et(e.container,Oe,null,e,null,null,null);return s.parent=t??null,s._hydrateSynthetic(),s}_hydrateCustomElement(e){this.logger=this.container.get(zs).root,this.debug=this.logger.config.level<=Hd.debug,this.debug&&(this.logger=this.logger.scopeTo(this.name));const t=this.container,s=this._vm,n=this.definition;this.scope=xe.create(s,null,!0),n.watches.length>0&&Nl(this,t,n,s),Ml(this,n,s),this._lifecycleHooks=Rl.resolve(t),t.register(n.Type),n.injectable!==null&&le(t,n.injectable,new Ce("definition.injectable",s)),(e==null||e.hydrate!==!1)&&(this._hydrate(),this._hydrateChildren())}_hydrate(){this._lifecycleHooks.hydrating!=null&&this._lifecycleHooks.hydrating.forEach(kb,this),this._vmHooks._hydrating&&(this.debug&&this.logger.trace("invoking hydrating() hook"),this._vm.hydrating(this));const e=this.definition,t=this._compiledDef=this._rendering.compile(e,this.container),s=t.shadowOptions,n=t.hasSlots,r=t.containerless,o=this.host;let a=this.location;if(r&&a==null&&(a=this.location=_n(o)),it(o,Re,this),it(o,e.key,this),s!==null||n){if(a!=null)throw E(501);it(this.shadowRoot=o.attachShadow(s??vb),Re,this),it(this.shadowRoot,e.key,this),this.mountTarget=Ui}else a!=null?(o!==a&&(it(a,Re,this),it(a,e.key,this)),this.mountTarget=Wi):this.mountTarget=zi;this._vm.$controller=this,this.nodes=this._rendering.createNodes(t),this._lifecycleHooks.hydrated!==void 0&&this._lifecycleHooks.hydrated.forEach(Cb,this),this._vmHooks._hydrated&&(this.debug&&this.logger.trace("invoking hydrated() hook"),this._vm.hydrated(this))}_hydrateChildren(){this._rendering.render(this,this.nodes.findTargets(),this._compiledDef,this.host),this._lifecycleHooks.created!==void 0&&this._lifecycleHooks.created.forEach(jl,this),this._vmHooks._created&&(this.debug&&this.logger.trace("invoking created() hook"),this._vm.created(this))}_hydrateCustomAttribute(){const e=this.definition,t=this._vm;e.watches.length>0&&Nl(this,this.container,e,t),Ml(this,e,t),t.$controller=this,this._lifecycleHooks=Rl.resolve(this.container),this._lifecycleHooks.created!==void 0&&this._lifecycleHooks.created.forEach(jl,this),this._vmHooks._created&&(this.debug&&this.logger.trace("invoking created() hook"),this._vm.created(this))}_hydrateSynthetic(){this._compiledDef=this._rendering.compile(this.viewFactory.def,this.container),this._rendering.render(this,(this.nodes=this._rendering.createNodes(this._compiledDef)).findTargets(),this._compiledDef,void 0)}activate(e,t,s){switch(this.state){case to:case gi:if(!(t===null||t.isActive))return;this.state=At;break;case Fs:return;case os:throw E(502,this.name);default:throw E(503,this.name,wb(this.state))}switch(this.parent=t,this.debug&&!this._fullyNamed&&(this._fullyNamed=!0,(this.logger??=this.container.get(zs).root.scopeTo(this.name)).trace("activate()")),this.vmKind){case ot:this.scope.parent=s??null;break;case Rs:this.scope=s??null;break;case Oe:if(s==null)throw E(504,this.name);this.hasLockedScope||(this.scope=s);break}this.$initiator=e,this._enterActivating();let n;return this.vmKind!==Oe&&this._lifecycleHooks.binding!=null&&(this.debug&&this.logger.trace("lifecycleHooks.binding()"),n=Se(...this._lifecycleHooks.binding.map(xb,this))),this._vmHooks._binding&&(this.debug&&this.logger.trace("binding()"),n=Se(n,this._vm.binding(this.$initiator,this.parent))),ke(n)?(this._ensurePromise(),n.then(()=>{this._isBindingDone=!0,this.state!==At?this._leaveActivating():this.bind()}).catch(r=>{this._reject(r)}),this.$promise):(this._isBindingDone=!0,this.bind(),this.$promise)}bind(){this.debug&&this.logger.trace("bind()");let e=0,t=0,s;if(this.bindings!==null)for(e=0,t=this.bindings.length;t>e;)this.bindings[e].bind(this.scope),++e;if(this.vmKind!==Oe&&this._lifecycleHooks.bound!=null&&(this.debug&&this.logger.trace("lifecycleHooks.bound()"),s=Se(...this._lifecycleHooks.bound.map(Ab,this))),this._vmHooks._bound&&(this.debug&&this.logger.trace("bound()"),s=Se(s,this._vm.bound(this.$initiator,this.parent))),ke(s)){this._ensurePromise(),s.then(()=>{this.isBound=!0,this.state!==At?this._leaveActivating():this._attach()}).catch(n=>{this._reject(n)});return}this.isBound=!0,this._attach()}_append(...e){switch(this.mountTarget){case zi:this.host.append(...e);break;case Ui:this.shadowRoot.append(...e);break;case Wi:{let t=0;for(;t<e.length;++t)this.location.parentNode.insertBefore(e[t],this.location);break}}}_attach(){switch(this.debug&&this.logger.trace("attach()"),this.mountTarget){case zi:this.nodes.appendTo(this.host,this.definition!=null&&this.definition.enhance);break;case Ui:{const s=this.container;(s.has(Dl,!1)?s.get(Dl):s.get(ub)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case Wi:this.nodes.insertBefore(this.location);break}let e=0,t;if(this.vmKind!==Oe&&this._lifecycleHooks.attaching!=null&&(this.debug&&this.logger.trace("lifecycleHooks.attaching()"),t=Se(...this._lifecycleHooks.attaching.map(Sb,this))),this._vmHooks._attaching&&(this.debug&&this.logger.trace("attaching()"),t=Se(t,this._vm.attaching(this.$initiator,this.parent))),ke(t)&&(this._ensurePromise(),this._enterActivating(),t.then(()=>{this._leaveActivating()}).catch(s=>{this._reject(s)})),this.children!==null)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.scope);this._leaveActivating()}deactivate(e,t){let s;switch(this.state&~mi){case Fs:this.state=hn;break;case At:this.state=hn,s=this.$promise?.catch(o=>{this.logger.warn("The activation error will be ignored, as the controller is already scheduled for deactivation. The activation was rejected with: %s",o)});break;case to:case gi:case os:case gi|os:return;default:throw E(505,this.name,this.state)}this.debug&&this.logger.trace("deactivate()"),this.$initiator=e,e===this&&this._enterDetaching();let n=0,r;if(this.children!==null)for(n=0;n<this.children.length;++n)this.children[n].deactivate(e,this);return H(s,()=>{if(this.isBound&&(this.vmKind!==Oe&&this._lifecycleHooks.detaching!=null&&(this.debug&&this.logger.trace("lifecycleHooks.detaching()"),r=Se(...this._lifecycleHooks.detaching.map(Ib,this))),this._vmHooks._detaching&&(this.debug&&this.logger.trace("detaching()"),r=Se(r,this._vm.detaching(this.$initiator,this.parent)))),ke(r)&&(this._ensurePromise(),e._enterDetaching(),r.then(()=>{e._leaveDetaching()}).catch(o=>{e._reject(o)})),e.head===null?e.head=this:e.tail.next=this,e.tail=this,e===this)return this._leaveDetaching(),this.$promise})}removeNodes(){switch(this.vmKind){case ot:case Oe:this.nodes.remove(),this.nodes.unlink()}}unbind(){this.debug&&this.logger.trace("unbind()");let e=0;if(this.bindings!==null)for(;e<this.bindings.length;++e)this.bindings[e].unbind();switch(this.parent=null,this.vmKind){case Rs:this.scope=null;break;case Oe:this.hasLockedScope||(this.scope=null),(this.state&mi)===mi&&!this.viewFactory.tryReturnToCache(this)&&this.$initiator===this&&this.dispose();break;case ot:this.scope.parent=null;break}this.state=gi,this.$initiator=null,this._resolve()}_ensurePromise(){this.$promise===void 0&&(this.$promise=new Promise((e,t)=>{this.$resolve=e,this.$reject=t}),this.$initiator!==this&&this.parent._ensurePromise())}_resolve(){this.$promise!==void 0&&(so=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,so(),so=void 0)}_reject(e){this.$promise!==void 0&&(io=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,io(e),io=void 0),this.$initiator!==this&&this.parent._reject(e)}_enterActivating(){++this._activatingStack,this.$initiator!==this&&this.parent._enterActivating()}_leaveActivating(){if(this.state!==At){--this._activatingStack,this._resolve(),this.$initiator!==this&&this.parent._leaveActivating();return}if(--this._activatingStack===0){if(this.vmKind!==Oe&&this._lifecycleHooks.attached!=null&&(Bs=Se(...this._lifecycleHooks.attached.map($b,this))),this._vmHooks._attached&&(this.debug&&this.logger.trace("attached()"),Bs=Se(Bs,this._vm.attached(this.$initiator))),ke(Bs)){this._ensurePromise(),Bs.then(()=>{this.state=Fs,this._resolve(),this.$initiator!==this&&this.parent._leaveActivating()}).catch(e=>{this._reject(e)}),Bs=void 0;return}Bs=void 0,this.state=Fs,this._resolve()}this.$initiator!==this&&this.parent._leaveActivating()}_enterDetaching(){++this._detachingStack}_leaveDetaching(){if(--this._detachingStack===0){this.debug&&this.logger.trace("detach()"),this._enterUnbinding(),this.removeNodes();let e=this.$initiator.head,t;for(;e!==null;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),e._isBindingDone&&(e.vmKind!==Oe&&e._lifecycleHooks.unbinding!=null&&(t=Se(...e._lifecycleHooks.unbinding.map(Tb,e))),e._vmHooks._unbinding&&(e.debug&&e.logger.trace("unbinding()"),t=Se(t,e.viewModel.unbinding(e.$initiator,e.parent)))),ke(t)&&(this._ensurePromise(),this._enterUnbinding(),t.then(()=>{this._leaveUnbinding()}).catch(s=>{this._reject(s)})),t=void 0,e=e.next;this._leaveUnbinding()}}_enterUnbinding(){++this._unbindingStack}_leaveUnbinding(){if(--this._unbindingStack===0){this.debug&&this.logger.trace("unbind()");let e=this.$initiator.head,t=null;for(;e!==null;)e!==this&&(e._isBindingDone=!1,e.isBound=!1,e.unbind()),t=e.next,e.next=null,e=t;this.head=this.tail=null,this._isBindingDone=!1,this.isBound=!1,this.unbind()}}addBinding(e){this.bindings===null?this.bindings=[e]:this.bindings[this.bindings.length]=e}addChild(e){this.children===null?this.children=[e]:this.children[this.children.length]=e}is(e){switch(this.vmKind){case Rs:case ot:return this.definition.name===e;case Oe:return this.viewFactory.name===e}}lockScope(e){this.scope=e,this.hasLockedScope=!0}setHost(e){return this.vmKind===ot&&(it(e,Re,this),it(e,this.definition.key,this)),this.host=e,this.mountTarget=zi,this}setShadowRoot(e){return this.vmKind===ot&&(it(e,Re,this),it(e,this.definition.key,this)),this.shadowRoot=e,this.mountTarget=Ui,this}setLocation(e){return this.vmKind===ot&&(it(e,Re,this),it(e,this.definition.key,this)),this.location=e,this.mountTarget=Wi,this}release(){this.state|=mi}dispose(){this.debug&&this.logger.trace("dispose()"),(this.state&os)!==os&&(this.state|=os,this._vmHooks._dispose&&this._vm.dispose(),this.children!==null&&(this.children.forEach(yb),this.children=null),this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,this._vm!==null&&(rs.delete(this._vm),this._vm=null),this._vm=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(e){if(e(this)===!0||this._vmHooks._accept&&this._vm.accept(e)===!0)return!0;if(this.children!==null){const{children:t}=this;for(let s=0,n=t.length;s<n;++s)if(t[s].accept(e)===!0)return!0}}}const rs=new WeakMap,Su=0,zi=1,Ui=2,Wi=3,mb=ss({none:Su,host:zi,shadowRoot:Ui,location:Wi}),bb=Fd(Ph);function Ml(i,e,t){const s=e.bindables,n=qh(s),r=n.length;if(r===0)return;const o=i.container.get(Pi),a="propertiesChanged"in t,c=i.vmKind===Oe?void 0:i.container.get(bb),l=a?(()=>{let h={},u=!1,d=0;const g=()=>{u||(u=!0,Pt(()=>{u=!1;const m=h;h={},d=0,i.isBound&&(t.propertiesChanged?.(m),d>0&&g())}))};return(m,p,f)=>{h[m]={newValue:p,oldValue:f},d++,g()}})():ut;for(let h=0;h<r;++h){const u=n[h],d=s[u],g=d.callback,m=o.getObserver(t,u);if(d.set!==ut&&m.useCoercer?.(d.set,c)!==!0)throw E(507,u);if(t[g]!=null||t.propertyChanged!=null||a){const p=(f,w)=>{i.isBound&&(t[g]?.(f,w),t.propertyChanged?.(u,f,w),l(u,f,w))};if(m.useCallback?.(p)!==!0)throw E(508,u)}}}const Fl=new Map,_b=i=>{let e=Fl.get(i);return e==null&&(e=new en(i,0),Fl.set(i,e)),e};function Nl(i,e,t,s){const n=e.get(Pi),r=e.get(Ti),o=t.watches,a=i.vmKind===ot?i.scope:xe.create(s,null,!0),c=o.length;let l,h,u,d,g=0;for(;c>g;++g){if({expression:l,callback:h,flush:d}=o[g],h=ee(h)?h:Reflect.get(s,h),!ee(h))throw E(506,h);ee(l)?i.addBinding(new Au(s,n,l,h,d)):(u=G(l)?r.parse(l,Ot):_b(l),i.addBinding(new Oo(a,e,n,u,h,d)))}}class pi{constructor(e){this._define="define"in e,this._hydrating="hydrating"in e,this._hydrated="hydrated"in e,this._created="created"in e,this._binding="binding"in e,this._bound="bound"in e,this._attaching="attaching"in e,this._attached="attached"in e,this._detaching="detaching"in e,this._unbinding="unbinding"in e,this._dispose="dispose"in e,this._accept="accept"in e}}pi.none=new pi({});const vb={mode:"open"},ot="customElement",Rs="customAttribute",Oe="synthetic",to=0,At=1,Fs=2,hn=4,gi=8,mi=16,os=32;function wb(i){const e=[];return(i&At)===At&&e.push("activating"),(i&Fs)===Fs&&e.push("activated"),(i&hn)===hn&&e.push("deactivating"),(i&gi)===gi&&e.push("deactivated"),(i&mi)===mi&&e.push("released"),(i&os)===os&&e.push("disposed"),e.length===0?"none":e.join("|")}const Ir=oe("IController"),_s=oe("IHydrationContext");class $u{constructor(e,t,s){this.instruction=t,this.parent=s,this.controller=e}}function yb(i){i.dispose()}function jl(i){i.instance.created(this._vm,this)}function kb(i){i.instance.hydrating(this._vm,this)}function Cb(i){i.instance.hydrated(this._vm,this)}function xb(i){return i.instance.binding(this._vm,this.$initiator,this.parent)}function Ab(i){return i.instance.bound(this._vm,this.$initiator,this.parent)}function Sb(i){return i.instance.attaching(this._vm,this.$initiator,this.parent)}function $b(i){return i.instance.attached(this._vm,this.$initiator)}function Ib(i){return i.instance.detaching(this._vm,this.$initiator,this.parent)}function Tb(i){return i.instance.unbinding(this._vm,this.$initiator,this.parent)}let so,io,Bs;const it=It.set,Eb=oe("IEventTarget",i=>i.cachedCallback(e=>e.has(lr,!0)?e.get(lr).host:e.get(qe).document)),Ve=oe("IRenderLocation"),nr=oe("ICssClassMapping"),rr=new WeakMap;function or(i){if(rr.has(i))return rr.get(i);let e=0,t=i.nextSibling;for(;t!==null;){if(t.nodeType===8)switch(t.textContent){case"au-start":++e;break;case"au-end":if(e--===0)return t}t=t.nextSibling}if(i.parentNode===null&&i.nodeType===11){const s=wi(i,{optional:!0});if(s==null)return null;if(s.mountTarget===mb.shadowRoot)return or(s.host)}return i.parentNode}function Bb(i,e){if(i.platform!==void 0&&!(i instanceof i.platform.Node)){const t=i.childNodes;for(let s=0,n=t.length;s<n;++s)rr.set(t[s],e)}else rr.set(i,e)}function _n(i){if(Iu(i))return i;const e=i.ownerDocument.createComment("au-end"),t=e.$start=i.ownerDocument.createComment("au-start"),s=i.parentNode;return s!==null&&(s.replaceChild(e,i),s.insertBefore(t,e)),e}function Iu(i){return i.textContent==="au-end"}class no{get firstChild(){return this._firstChild}get lastChild(){return this._lastChild}constructor(e,t){this.platform=e,this.next=void 0,this._isMounted=!1,this._isLinked=!1,this.ref=null;const s=(this.f=t).querySelectorAll("au-m");let n=0,r=s.length,o=this.t=Array(r),a,c;for(;r>n;)c=s[n],a=c.nextSibling,c.remove(),a.nodeType===8&&(c=a,(a=a.nextSibling).$start=c),o[n]=a,++n;const l=t.childNodes,h=this.childNodes=Array(r=l.length);for(n=0;r>n;)h[n]=l[n],++n;this._firstChild=t.firstChild,this._lastChild=t.lastChild}findTargets(){return this.t}insertBefore(e){if(this._isLinked&&this.ref)this.addToLinked();else{const t=e.parentNode;if(this._isMounted){let s=this._firstChild,n;const r=this._lastChild;for(;s!=null&&(n=s.nextSibling,t.insertBefore(s,e),s!==r);)s=n}else this._isMounted=!0,e.parentNode.insertBefore(this.f,e)}}appendTo(e,t=!1){if(this._isMounted){let s=this._firstChild,n;const r=this._lastChild;for(;s!=null&&(n=s.nextSibling,e.appendChild(s),s!==r);)s=n}else this._isMounted=!0,t||e.appendChild(this.f)}remove(){if(this._isMounted){this._isMounted=!1;const e=this.f,t=this._lastChild;let s,n=this._firstChild;for(;n!==null&&(s=n.nextSibling,e.appendChild(n),n!==t);)n=s}}addToLinked(){const e=this.ref,t=e.parentNode;if(this._isMounted){let s=this._firstChild,n;const r=this._lastChild;for(;s!=null&&(n=s.nextSibling,t.insertBefore(s,e),s!==r);)s=n}else this._isMounted=!0,t.insertBefore(this.f,e)}unlink(){this._isLinked=!1,this.next=void 0,this.ref=void 0}link(e){this._isLinked=!0,Iu(e)?this.ref=e:(this.next=e,this._obtainRefNode())}_obtainRefNode(){this.next!==void 0?this.ref=this.next.firstChild:this.ref=void 0}}const Tr=(i,e,t=i.get(qe))=>(le(i,t.HTMLElement,le(i,t.Element,le(i,yr,new Ce("ElementResolver",e)))),i);function Rb(i){return function(e,t){return t.addInitializer(function(){Tu(i,this)}),e}}const ro=new WeakMap;class We{get type(){return _m}constructor(e,t,s,n,r,o,a,c,l,h,u,d,g,m,p,f,w,T,R){this.Type=e,this.name=t,this.aliases=s,this.key=n,this.capture=r,this.template=o,this.instructions=a,this.dependencies=c,this.injectable=l,this.needsCompile=h,this.surrogates=u,this.bindables=d,this.containerless=g,this.shadowOptions=m,this.hasSlots=p,this.enhance=f,this.watches=w,this.strict=T,this.processContent=R}static create(e,t=null){if(t===null){const n=e;if(G(n))throw E(761,e);const r=Ct("name",n,ar);ee(n.Type)?t=n.Type:t=Bu(hc(r));for(const o of Object.values(Ye.from(n.bindables)))Ye._add(o,t);return new We(t,r,ye(n.aliases),Ct("key",n,()=>ci(r)),Ge("capture",n,t,rt),Ge("template",n,t,nt),ye(n.instructions),ye(Xe(t,"dependencies"),n.dependencies),Ct("injectable",n,nt),Ct("needsCompile",n,ao),ye(n.surrogates),Ye.from(Xe(t,"bindables"),n.bindables),Ge("containerless",n,t,rt),Ct("shadowOptions",n,nt),Ct("hasSlots",n,rt),Ct("enhance",n,rt),Ct("watches",n,Ob),Ct("strict",n,oo),pt("processContent",t,nt))}if(G(e))return new We(t,e,ye(Xe(t,"aliases"),t.aliases),ci(e),pt("capture",t,rt),pt("template",t,nt),ye(Xe(t,"instructions"),t.instructions),ye(Xe(t,"dependencies"),t.dependencies),pt("injectable",t,nt),pt("needsCompile",t,ao),ye(Xe(t,"surrogates"),t.surrogates),Ye.from(...Ye.getAll(t),Xe(t,"bindables"),t.bindables),pt("containerless",t,rt),pt("shadowOptions",t,nt),pt("hasSlots",t,rt),pt("enhance",t,rt),ye(Ro.getDefinitions(t),t.watches),pt("strict",t,oo),pt("processContent",t,nt));const s=Ct("name",e,ar);for(const n of Object.values(Ye.from(e.bindables)))Ye._add(n,t);return new We(t,s,ye(Xe(t,"aliases"),e.aliases,t.aliases),ci(s),Ge("capture",e,t,rt),Ge("template",e,t,nt),ye(Xe(t,"instructions"),e.instructions,t.instructions),ye(Xe(t,"dependencies"),e.dependencies,t.dependencies),Ge("injectable",e,t,nt),Ge("needsCompile",e,t,ao),ye(Xe(t,"surrogates"),e.surrogates,t.surrogates),Ye.from(...Ye.getAll(t),Xe(t,"bindables"),t.bindables,e.bindables),Ge("containerless",e,t,rt),Ge("shadowOptions",e,t,nt),Ge("hasSlots",e,t,rt),Ge("enhance",e,t,rt),ye(e.watches,Ro.getDefinitions(t),t.watches),Ge("strict",e,t,oo),Ge("processContent",e,t,nt))}static getOrCreate(e){if(e instanceof We)return e;if(ro.has(e))return ro.get(e);const t=We.create(e);return ro.set(e,t),vt(t,t.Type,Re),t}register(e,t){const s=this.Type,n=typeof t=="string"?ci(t):this.key,r=this.aliases;if(e.has(n,!1)){console.warn(E(153,this.name));return}e.register(e.has(s,!1)?null:jt(s,s),ms(s,n),...r.map(o=>ms(s,ci(o))))}toString(){return`au:ce:${this.name}`}}const Pb={name:void 0,searchParents:!1,optional:!1},nt=()=>null,oo=()=>{},rt=()=>!1,ao=()=>!0,Ob=()=>U,Xs="custom-element",Re=Js(Xs),ci=i=>`${Re}:${i}`,ar=(i=>()=>`unnamed-${++i}`)(0),Lb=(i,e,t)=>{vt(t,i,ts(e))},Tu=(i,e)=>{const t=We.create(i,e),s=t.Type;return vt(t,s,Re,$t),s},Db=i=>ee(i)&&(_r(Re,i)||i.$au?.type===Xs),wi=(i,e=Pb)=>{if(e.name===void 0&&e.searchParents!==!0){const s=It.get(i,Re);if(s===null){if(e.optional===!0)return null;throw E(762,i)}return s}if(e.name!==void 0){if(e.searchParents!==!0){const r=It.get(i,Re);if(r===null)throw E(763,i);return r.is(e.name)?r:void 0}let s=i,n=!1;for(;s!==null;){const r=It.get(s,Re);if(r!==null&&(n=!0,r.is(e.name)))return r;s=or(s)}if(n)return;throw E(764,i)}let t=i;for(;t!==null;){const s=It.get(t,Re);if(s!==null)return s;t=or(t)}throw E(765,i)},Xe=(i,e)=>De(ts(e),i),Eu=i=>{const e=De(Re,i)??bs(i,Xs,We.create);if(e==null)throw E(760,i);return e},Mb=()=>{const i={$isInterface:!1,register(){return{$isResolver:!0,resolve(e,t){return t.has(i,!0)?t.get(i):null}}}};return i},Bu=(function(){const i={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(t,s=e){const n=class{};return i.value=t,Kh(n,"name",i),s!==e&&Wh(n.prototype,s),n}})(),hs=ss({name:Re,keyFrom:ci,isType:Db,for:wi,define:Tu,getDefinition:Eu,annotate:Lb,getAnnotation:Xe,generateName:ar,createInjectable:Mb,generateType:Bu,find(i,e){const t=i.find(Xs,e);return t==null?null:De(Re,t)??bs(t,Xs,We.create)??null}}),lr=oe("IAppRoot");class Vl{get controller(){return this._controller}constructor(e,t,s,n=!1){this.config=e,this.container=t,this._hydratePromise=void 0,this._useOwnAppTasks=n;const r=this.host=e.host;s.prepare(this),le(t,Eb,new Ce("IEventTarget",r)),Tr(t,r,this.platform=this._createPlatform(t,r)),this._hydratePromise=H(this._runAppTasks("creating"),()=>{e.allowActionlessForm||r.addEventListener("submit",d=>{const g=d.target,m=!g.getAttribute("action");g.tagName==="FORM"&&m&&d.preventDefault()},!1);const o=n?t:t.createChild(),a=e.component;let c;ee(a)?c=o.invoke(a):c=e.component;const l={hydrate:!1,projections:null},h=n?We.create({name:ar(),template:this.host,enhance:!0,strict:e.strictBinding}):void 0,u=this._controller=et.$el(o,c,r,l,h);return u._hydrateCustomElement(l),H(this._runAppTasks("hydrating"),()=>(u._hydrate(),H(this._runAppTasks("hydrated"),()=>{u._hydrateChildren(),this._hydratePromise=void 0})))})}activate(){return H(this._hydratePromise,()=>H(this._runAppTasks("activating"),()=>H(this._controller.activate(this._controller,null,void 0),()=>this._runAppTasks("activated"))))}deactivate(){return H(this._runAppTasks("deactivating"),()=>H(this._controller.deactivate(this._controller,null),()=>this._runAppTasks("deactivated")))}_runAppTasks(e){const t=this.container,s=this._useOwnAppTasks&&!t.has(Bl,!1)?[]:t.getAll(Bl);return Se(...s.reduce((n,r)=>(r.slot===e&&n.push(r.run()),n),[]))}_createPlatform(e,t){let s;if(e.has(qe,!1))s=e.get(qe);else{if(t.ownerDocument.defaultView===null)throw E(769);s=new cs(t.ownerDocument.defaultView),e.register(Xh(qe,s))}return s}dispose(){this._controller?.dispose()}}const Hl=oe("IAurelia");let Fb=class Lo{get isRunning(){return this._isRunning}get isStarting(){return this._isStarting}get isStopping(){return this._isStopping}get root(){if(this._root==null){if(this.next==null)throw E(767);return this.next}return this._root}constructor(e=ws.createContainer()){if(this.container=e,this._isRunning=!1,this._isStarting=!1,this._isStopping=!1,this._root=void 0,this.next=void 0,this._startPromise=void 0,this._stopPromise=void 0,e.has(Hl,!0)||e.has(Lo,!0))throw E(768);le(e,Hl,new Ce("IAurelia",this)),le(e,Lo,new Ce("Aurelia",this)),le(e,lr,this._rootProvider=new Ce("IAppRoot"))}register(...e){return this.container.register(...e),this}app(e){return this.next=new Vl(e,this.container,this._rootProvider),this}enhance(e){const t=e.container??this.container.createChild(),s=le(t,lr,new Ce("IAppRoot")),n=new Vl({host:e.host,component:e.component},t,s,!0);return H(n.activate(),()=>n)}async waitForIdle(){const e=this.root.platform;await e.domQueue.yield(),await e.taskQueue.yield()}start(e=this.next){if(e==null)throw E(770);return ke(this._startPromise)?this._startPromise:this._startPromise=H(this.stop(),()=>(It.hideProp||Reflect.set(e.host,"$aurelia",this),this._rootProvider.prepare(this._root=e),this._isStarting=!0,H(e.activate(),()=>{this._isRunning=!0,this._isStarting=!1,this._startPromise=void 0,this._dispatchEvent(e,"au-started",e.host)})))}stop(e=!1){if(ke(this._stopPromise))return this._stopPromise;if(this._isRunning===!0){const t=this._root;return this._isRunning=!1,this._isStopping=!0,this._stopPromise=H(t.deactivate(),()=>H(tg(),()=>{Reflect.deleteProperty(t.host,"$aurelia"),e&&t.dispose(),this._root=void 0,this._rootProvider.dispose(),this._isStopping=!1,this._stopPromise=void 0,this._dispatchEvent(t,"au-stopped",t.host)}))}}dispose(){if(this._isRunning||this._isStopping)throw E(771);this.container.dispose()}_dispatchEvent(e,t,s){const n=new e.platform.window.CustomEvent(t,{detail:this,bubbles:!0,cancelable:!0});s.dispatchEvent(n)}};const Ru=oe("ISVGAnalyzer",i=>i.singleton(Nb));class Nb{isStandardSvgAttribute(e,t){return!1}}class Pu{constructor(){this.fns=[],this._tagAttrMap=se(),this._globalAttrMap=se(),this.svg=$(Ru),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}useMapping(e){let t,s,n,r;for(n in e){t=e[n],s=this._tagAttrMap[n]??=se();for(r in t){if(s[r]!==void 0)throw zl(r,n);s[r]=t[r]}}}useGlobalMapping(e){const t=this._globalAttrMap;for(const s in e){if(t[s]!==void 0)throw zl(s,"*");t[s]=e[s]}}useTwoWay(e){this.fns.push(e)}isTwoWay(e,t){return jb(e,t)||this.fns.length>0&&this.fns.some(s=>s(e,t))}map(e,t){return this._tagAttrMap[e.nodeName]?.[t]??this._globalAttrMap[t]??(To(e,t,this.svg)?t:null)}}Pu.register=yn(Hc);function jb(i,e){switch(i.nodeName){case"INPUT":switch(i.type){case"checkbox":case"radio":return e==="checked";default:return e==="value"||e==="files"||e==="value-as-number"||e==="value-as-date"}case"TEXTAREA":case"SELECT":return e==="value";default:switch(e){case"textcontent":case"innerhtml":return i.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}function zl(i,e){return E(719,i,e)}const Vb={register(i){i.register($h,Pu,Ou)}};class Hb{constructor(e,t,s){this.attrs=e,this.bindables=t,this.primary=s}}class Ou{constructor(){this._resourceCache=new WeakMap,this._bindableCache=new WeakMap}el(e,t){let s=this._resourceCache.get(e);return s==null&&this._resourceCache.set(e,s=new Ul),t in s._element?s._element[t]:s._element[t]=hs.find(e,t)}attr(e,t){let s=this._resourceCache.get(e);return s==null&&this._resourceCache.set(e,s=new Ul),t in s._attr?s._attr[t]:s._attr[t]=wa.find(e,t)}bindables(e){let t=this._bindableCache.get(e);if(t==null){const s=e.bindables,n=se();let r,o,a=!1,c,l;for(o in s){if(r=s[o],l=r.attribute,r.primary===!0){if(a)throw E(714,e);a=!0,c=r}else!a&&c==null&&(c=r);n[l]=Qt.create(o,r)}r==null&&e.type==="custom-attribute"&&(c=n.value=Qt.create("value",{mode:e.defaultBindingMode??ga})),this._bindableCache.set(e,t=new Hb(n,s,c??null))}return t}}Ou.register=yn(Ih);class Ul{constructor(){this._element=se(),this._attr=se()}}const zb=se();class vn{static forNs(e){return zb[e]??=new vn(e)}constructor(e){this.ns=e,this.type=As|Nt}getValue(e,t){return e.getAttributeNS(this.ns,t)}setValue(e,t,s){e==null?t.removeAttributeNS(this.ns,s):t.setAttributeNS(this.ns,s,e)}}Ar(vn);class Lu{constructor(){this.type=As|Nt}getValue(e,t){return e.getAttribute(t)}setValue(e,t,s){e==null?t.removeAttribute(s):t.setAttribute(s,e)}}Ar(Lu);const Hn=new Lu;class Vs{static _getSelectedOptions(e){const t=[];if(e.length===0)return t;const s=e.length;let n=0,r;for(;s>n;)r=e[n],r.selected&&(t[t.length]=Ns.call(r,"model")?r.model:r.value),++n;return t}static _defaultMatcher(e,t){return e===t}constructor(e,t,s,n){this.type=As|ba|Nt,this._value=void 0,this._oldValue=void 0,this._hasChanges=!1,this._arrayObserver=void 0,this._nodeObserver=void 0,this._observing=!1,this._listened=!1,this._el=e,this._observerLocator=n,this._config=s}getValue(){return this._observing?this._value:this._el.multiple?Vs._getSelectedOptions(this._el.options):this._el.value}setValue(e){this._oldValue=this._value,this._value=e,this._hasChanges=e!==this._oldValue,this._observeArray(e instanceof Array?e:null),this._flushChanges()}_flushChanges(){this._hasChanges&&(this._hasChanges=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){const e=this._value,t=this._el,s=we(e),n=t.matcher??Vs._defaultMatcher,r=t.options;let o=r.length;for(;o-- >0;){const a=r[o],c=Ns.call(a,"model")?a.model:a.value;if(s){a.selected=e.findIndex(l=>!!n(c,l))!==-1;continue}a.selected=!!n(c,e)}}syncValue(){const e=this._el,t=e.options,s=t.length,n=this._value;let r=0;if(e.multiple){if(!(n instanceof Array))return!0;let c;const l=e.matcher||Vs._defaultMatcher,h=[];for(;r<s;)c=t[r],c.selected&&h.push(Ns.call(c,"model")?c.model:c.value),++r;let u;for(r=0;r<n.length;)u=n[r],h.findIndex(d=>!!l(u,d))===-1?n.splice(r,1):++r;for(r=0;r<h.length;)u=h[r],n.findIndex(d=>!!l(u,d))===-1&&n.push(u),++r;return!1}let o=null,a;for(;r<s;){if(a=t[r],a.selected){o=Ns.call(a,"model")?a.model:a.value;break}++r}return this._oldValue=this._value,this._value=o,!0}_start(){(this._nodeObserver=cu(this._el,this._handleNodeChange.bind(this))).observe(this._el,{childList:!0,subtree:!0,characterData:!0}),this._observeArray(this._value instanceof Array?this._value:null),this._observing=!0}_stop(){this._nodeObserver.disconnect(),this._arrayObserver?.unsubscribe(this),this._nodeObserver=this._arrayObserver=void 0,this._observing=!1}_observeArray(e){if(this._arrayObserver?.unsubscribe(this),this._arrayObserver=void 0,e!=null){if(!this._el.multiple)throw E(654);(this._arrayObserver=this._observerLocator.getArrayObserver(e)).subscribe(this)}}handleEvent(){this.syncValue()&&this._flush()}_handleNodeChange(e){this.syncOptions(),this.syncValue()&&this._flush()}_flush(){const e=this._oldValue;this._oldValue=this._value,this.subs.notify(this._value,e)}}Sa(Vs),_t(Vs,null);const Ub="--";class Du{constructor(e){this.obj=e,this.type=As|Nt,this._value="",this._oldValue="",this.styles={},this.version=0,this._hasChanges=!1}getValue(){return this.obj.style.cssText}setValue(e){this._value=e,this._hasChanges=e!==this._oldValue,this._flushChanges()}_getStyleTuplesFromString(e){const t=[],s=/url\([^)]+$/;let n=0,r="",o,a,c,l;for(;n<e.length;){if(o=e.indexOf(";",n),o===-1&&(o=e.length),r+=e.substring(n,o),n=o+1,s.test(r)){r+=";";continue}a=r.indexOf(":"),c=r.substring(0,a).trim(),l=r.substring(a+1).trim(),t.push([c,l]),r=""}return t}_getStyleTuplesFromObject(e){let t,s;const n=[];for(s in e)if(t=e[s],t!=null){if(G(t)){if(s.startsWith(Ub)){n.push([s,t]);continue}n.push([uc(s),t]);continue}n.push(...this._getStyleTuples(t))}return n}_getStyleTuplesFromArray(e){const t=e.length;if(t>0){const s=[];let n=0;for(;t>n;++n)s.push(...this._getStyleTuples(e[n]));return s}return U}_getStyleTuples(e){return G(e)?this._getStyleTuplesFromString(e):e instanceof Array?this._getStyleTuplesFromArray(e):e instanceof Object?this._getStyleTuplesFromObject(e):U}_flushChanges(){if(this._hasChanges){this._hasChanges=!1;const e=this._value,t=this.styles,s=this._getStyleTuples(e);let n,r=this.version;this._oldValue=e;let o,a,c,l=0;const h=s.length;for(;l<h;++l)o=s[l],a=o[0],c=o[1],this.setProperty(a,c),t[a]=r;if(this.styles=t,this.version+=1,r===0)return;r-=1;for(n in t)!Ns.call(t,n)||t[n]!==r||this.obj.style.removeProperty(n)}}setProperty(e,t){let s="";t!=null&&ee(t.indexOf)&&t.includes("!important")&&(s="important",t=t.replace("!important","")),this.obj.style.setProperty(e,t,s)}bind(){this._value=this._oldValue=this.obj.style.cssText}}Ar(Du);class Do{constructor(e,t,s){this.type=As|ba|Nt,this._value="",this._oldValue="",this._hasChanges=!1,this._listened=!1,this._el=e,this._key=t,this._config=s}getValue(){return this._value}setValue(e){Yt(e,this._value)||(this._oldValue=this._value,this._value=e,this._hasChanges=!0,this._config.readonly||this._flushChanges())}_flushChanges(){this._hasChanges&&(this._hasChanges=!1,this._el[this._key]=this._value??this._config.default,this._flush())}handleEvent(){this._oldValue=this._value,this._value=this._el[this._key],this._oldValue!==this._value&&(this._hasChanges=!1,this._flush())}_start(){this._value=this._oldValue=this._el[this._key]}_flush(){const e=this._oldValue;this._oldValue=this._value,this.subs.notify(this._value,e)}}Sa(Do),_t(Do,null);const Wl=(()=>{const i="http://www.w3.org/1999/xlink",e="http://www.w3.org/XML/1998/namespace",t="http://www.w3.org/2000/xmlns/";return Wh(se(),{"xlink:actuate":["actuate",i],"xlink:arcrole":["arcrole",i],"xlink:href":["href",i],"xlink:role":["role",i],"xlink:show":["show",i],"xlink:title":["title",i],"xlink:type":["type",i],"xml:lang":["lang",e],"xml:space":["space",e],xmlns:["xmlns",t],"xmlns:xlink":["xlink",t]})})(),Mu=new Fh;Mu.type=As|Nt;class $a{constructor(){this.allowDirtyCheck=!0,this._events=se(),this._globalEvents=se(),this._overrides=se(),this._globalOverrides=se(),this._locator=$(Rd),this._platform=$(qe),this._dirtyChecker=$(ca),this.svg=$(Ru);const e=["change","input"],t={events:e,default:""};this.useConfig({INPUT:{value:t,valueAsNumber:{events:e,default:0},checked:{type:Mo,events:e},files:{events:e,readonly:!0}},SELECT:{value:{type:Vs,events:["change"],default:""}},TEXTAREA:{value:t}});const s={events:["change","input","blur","keyup","paste"],default:""},n={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:n,scrollLeft:n,textContent:s,innerHTML:s}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}handles(e,t){return e instanceof this._platform.Node}useConfig(e,t,s){const n=this._events;let r;if(G(e))r=n[e]??=se(),r[t]==null?r[t]=s:Rn(e,t);else for(const o in e){r=n[o]??=se();const a=e[o];for(t in a)r[t]==null?r[t]=a[t]:Rn(o,t)}}useConfigGlobal(e,t){const s=this._globalEvents;if(typeof e=="object")for(const n in e)s[n]==null?s[n]=e[n]:Rn("*",n);else s[e]==null?s[e]=t:Rn("*",e)}getAccessor(e,t,s){if(t in this._globalOverrides||t in(this._overrides[e.tagName]??Dd))return this.getObserver(e,t,s);switch(t){case"src":case"href":case"role":case"minLength":case"maxLength":case"placeholder":case"size":case"pattern":case"title":case"popovertarget":case"popovertargetaction":return(t==="popovertarget"||t==="popovertargetaction")&&e.nodeName!=="INPUT"&&e.nodeName!=="BUTTON"&&console.warn(`[aurelia] Popover API are only valid on <input> or <button>. Detected ${t} on <${e.nodeName.toLowerCase()}>`),Hn;default:{const n=Wl[t];return n!==void 0?vn.forNs(n[1]):To(e,t,this.svg)?Hn:Mu}}}overrideAccessor(e,t){let s;if(G(e))s=this._overrides[e]??=se(),s[t]=!0;else for(const n in e)for(const r of e[n])s=this._overrides[n]??=se(),s[r]=!0}overrideAccessorGlobal(...e){for(const t of e)this._globalOverrides[t]=!0}getNodeObserverConfig(e,t){return this._events[e.tagName]?.[t]??this._globalEvents[t]}getNodeObserver(e,t,s){const n=this._events[e.tagName]?.[t]??this._globalEvents[t];let r;return n!=null?(r=new(n.type??Do)(e,t,n,s,this._locator),r.doNotCache||(Nh(e)[t]=r),r):null}getObserver(e,t,s){switch(t){case"class":return new Sr(e);case"css":case"style":return new Du(e)}const n=this.getNodeObserver(e,t,s);if(n!=null)return n;const r=Wl[t];if(r!==void 0)return vn.forNs(r[1]);if(To(e,t,this.svg))return Hn;if(t in e.constructor.prototype){if(this.allowDirtyCheck)return this._dirtyChecker.createProperty(e,t);throw E(652,t)}else return new ha(e,t)}}$a.register=yn(ua);function Wb(i,e){if(i instanceof Array)return e.getArrayObserver(i);if(i instanceof Map)return e.getMapObserver(i);if(i instanceof Set)return e.getSetObserver(i)}function Rn(i,e){throw E(653,i,e)}function ql(i,e){return i===e}class Mo{constructor(e,t,s,n){this.type=As|ba|Nt,this._value=void 0,this._oldValue=void 0,this._collectionObserver=void 0,this._valueObserver=void 0,this._listened=!1,this._el=e,this.oL=n,this._config=s}getValue(){return this._value}setValue(e){const t=this._value;e!==t&&(this._value=e,this._oldValue=t,this._observe(),this._synchronizeElement(),this._flush())}handleCollectionChange(){this._synchronizeElement()}handleChange(e,t){this._synchronizeElement()}_synchronizeElement(){const e=this._value,t=this._el,s=Ns.call(t,"model")?t.model:t.value,n=t.type==="radio",r=t.matcher!==void 0?t.matcher:ql;if(n)t.checked=!!r(e,s);else if(e===!0)t.checked=!0;else{let o=!1;if(we(e))o=e.findIndex(a=>!!r(a,s))!==-1;else if(e instanceof Set){for(const a of e)if(r(a,s)){o=!0;break}}else if(e instanceof Map)for(const a of e){const c=a[0],l=a[1];if(r(c,s)&&l===!0){o=!0;break}}t.checked=o}}handleEvent(){let e=this._oldValue=this._value;const t=this._el,s=Ns.call(t,"model")?t.model:t.value,n=t.checked,r=t.matcher!==void 0?t.matcher:ql;if(t.type==="checkbox"){if(we(e)){const o=e.findIndex(a=>!!r(a,s));n&&o===-1?e.push(s):!n&&o!==-1&&e.splice(o,1);return}else if(e instanceof Set){const o={};let a=o;for(const c of e)if(r(c,s)===!0){a=c;break}n&&a===o?e.add(s):!n&&a!==o&&e.delete(a);return}else if(e instanceof Map){let o;for(const a of e){const c=a[0];if(r(c,s)===!0){o=c;break}}e.set(o,n);return}e=n}else if(n)e=s;else return;this._value=e,this._flush()}_start(){this._observe()}_stop(){this._value=this._oldValue=void 0,this._collectionObserver?.unsubscribe(this),this._valueObserver?.unsubscribe(this),this._collectionObserver=this._valueObserver=void 0}_flush(){lo=this._oldValue,this._oldValue=this._value,this.subs.notify(this._value,lo),lo=void 0}_observe(){const e=this._el;(this._valueObserver??=e.$observers?.model??e.$observers?.value)?.subscribe(this),this._collectionObserver?.unsubscribe(this),this._collectionObserver=void 0,e.type==="checkbox"&&(this._collectionObserver=Wb(this._value,this.oL))?.subscribe(this)}}Sa(Mo),_t(Mo,null);let lo;class Fu{bind(e,t){if(!(t instanceof Ne))throw E(9994,t);t.useTargetObserver(Hn)}}Fu.$au={type:ht,name:"attr"};class Nu{bind(e,t){if(!("handleEvent"in t))throw E(801);t.self=!0}unbind(e,t){t.self=!1}}Nu.$au={type:ht,name:"self"};class ju{constructor(){this._observerLocator=$(Pi),this._nodeObserverLocator=$(ua)}bind(e,t,...s){if(!(this._nodeObserverLocator instanceof $a))throw E(9993);if(s.length===0)throw E(802);if(!(t instanceof Ne)||!(t.mode&Zt))throw E(803);const n=this._nodeObserverLocator.getNodeObserverConfig(t.target,t.targetProperty);if(n==null)throw E(9992,t);const r=this._nodeObserverLocator.getNodeObserver(t.target,t.targetProperty,this._observerLocator);r.useConfig({readonly:n.readonly,default:n.default,events:s}),t.useTargetObserver(r)}}ju.$au={type:ht,name:"updateTrigger"};class cr{constructor(){this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this._wantsDeactivate=!1,this._swapId=0,this._ifFactory=$(st),this._location=$(Ve)}attaching(e,t){return this._swap(this.value)}detaching(e,t){return this._wantsDeactivate=!0,H(this.pending,()=>{this._wantsDeactivate=!1,this.pending=void 0,this.view?.deactivate(e,this.$controller)})}valueChanged(e,t){if(this.$controller.isActive&&(e=!!e,t=!!t,e!==t))return this._swap(e)}_swap(e){const t=this.view,s=this.$controller,n=this._swapId++,r=()=>!this._wantsDeactivate&&this._swapId===n+1;let o;return H(this.pending,()=>this.pending=H(t?.deactivate(t,s),()=>{if(r()&&(e?o=this.view=this.ifView=this.cache&&this.ifView!=null?this.ifView:this._ifFactory.create():o=this.view=this.elseView=this.cache&&this.elseView!=null?this.elseView:this.elseFactory?.create(),o!=null))return o.setLocation(this._location),H(o.activate(o,s,s.scope),()=>{r()&&(this.pending=void 0)})}))}dispose(){this.ifView?.dispose(),this.elseView?.dispose(),this.ifView=this.elseView=this.view=void 0}accept(e){if(this.view?.accept(e)===!0)return!0}}cr.$au={type:Me,name:"if",isTemplateController:!0,bindables:{value:!0,cache:{set:i=>i===""||!!i&&i!=="false"}}};class Vu{constructor(){this._factory=$(st)}link(e,t,s,n){const r=e.children,o=r[r.length-1];if(o instanceof cr)o.elseFactory=this._factory;else if(o.viewModel instanceof cr)o.viewModel.elseFactory=this._factory;else throw E(810)}}Vu.$au={type:"custom-attribute",name:"else",isTemplateController:!0};function qb(i){i.dispose()}const Kb=["BindingBehavior","ValueConverter"];class Hu{constructor(){this.views=[],this.key=null,this._oldViews=[],this._scopes=[],this._oldScopes=[],this._scopeMap=new Map,this._observer=void 0,this._observingInnerItems=!1,this._reevaluating=!1,this._innerItemsExpression=null,this._normalizedItems=void 0,this._hasDestructuredLocal=!1,this._location=$(Ve),this._parent=$(Ir),this._factory=$(st),this._resolver=$(Gb);const t=$(Bi).props[0].props[0];if(t!==void 0){const{to:s,value:n,command:r}=t;if(s==="key")if(r===null)this.key=n;else if(r==="bind")this.key=$(Ti).parse(n,Ot);else throw E(775,r);else throw E(776,s)}}binding(e,t){const s=this._parent.bindings,n=s.length;let r,o,a=0;for(;n>a;++a)if(r=s[a],r.target===this&&r.targetProperty==="items"){o=this.forOf=r.ast,this._forOfBinding=r;let l=o.iterable;for(;l!=null&&Kb.includes(l.$kind);)l=l.expression,this._observingInnerItems=!0;this._innerItemsExpression=l;break}this._refreshCollectionObserver();const c=o.declaration;(this._hasDestructuredLocal=c.$kind==="ArrayDestructuring"||c.$kind==="ObjectDestructuring")||(this.local=ce(c,this.$controller.scope,r,null))}attaching(e,t){return this._normalizeToArray(),this._createScopes(void 0),this._activateAllViews(e,this._normalizedItems??U)}detaching(e,t){return this._refreshCollectionObserver(),this._deactivateAllViews(e)}unbinding(e,t){this._scopeMap.clear()}itemsChanged(){this.$controller.isActive&&(this._refreshCollectionObserver(),this._normalizeToArray(),this._createScopes(void 0),this._applyIndexMap(void 0))}handleCollectionChange(e,t){const s=this.$controller;if(s.isActive){if(this._observingInnerItems){if(this._reevaluating)return;this._reevaluating=!0,this.items=ce(this.forOf.iterable,s.scope,this._forOfBinding,null),this._reevaluating=!1;return}this._normalizeToArray(),this._createScopes(this.key===null?t:void 0),this._applyIndexMap(t)}}_applyIndexMap(e){const t=this.views;this._oldViews=t.slice();const s=t.length,n=this.key,r=n!==null,o=this._oldScopes,a=this._scopes;if(r||e===void 0){const c=this.local,h=this._normalizedItems.length,d=this.forOf.declaration,g=this._forOfBinding,m=this._hasDestructuredLocal;e=qs(h);let p=0;if(s===0)for(;p<h;++p)e[p]=-2;else if(h===0)for(p=0;p<s;++p)e.deletedIndices.push(p),e.deletedItems.push(zn(m,d,o[p],g,c));else if(r){const f=Array(s);for(p=0;p<s;++p)f[p]=Zl(m,n,d,o[p],g,c);const w=Array(s);for(p=0;p<h;++p)w[p]=Zl(m,n,d,a[p],g,c);for(p=0;p<h;++p)f.includes(w[p])?e[p]=f.indexOf(w[p]):e[p]=-2;for(p=0;p<s;++p)w.includes(f[p])||(e.deletedIndices.push(p),e.deletedItems.push(zn(m,d,o[p],g,c)))}else{for(p=0;p<h;++p)o.includes(a[p])?e[p]=o.indexOf(a[p]):e[p]=-2;for(p=0;p<s;++p)a.includes(o[p])||(e.deletedIndices.push(p),e.deletedItems.push(zn(m,d,o[p],g,c)))}}if(e.deletedIndices.length>0){const c=H(this._deactivateAndRemoveViewsByKey(e),()=>this._createAndActivateAndSortViewsByKey(e));ke(c)&&c.catch(Eo)}else this._createAndActivateAndSortViewsByKey(e)}_refreshCollectionObserver(){const e=this.$controller.scope;let t=this._innerItems,s=this._observingInnerItems,n;s&&(t=this._innerItems=ce(this._innerItemsExpression,e,this._forOfBinding,null)??null,s=this._observingInnerItems=!Yt(this.items,t));const r=this._observer;if(this.$controller.isActive){const o=s?t:this.items;n=this._observer=this._resolver.resolve(o).getObserver?.(o),r!==n&&(r?.unsubscribe(this),n?.subscribe(this))}else r?.unsubscribe(this),this._observer=void 0}_createScopes(e){const t=this._scopes;this._oldScopes=t.slice();const s=this._normalizedItems,n=s.length,r=this._scopes=Array(s.length),o=this._scopeMap,a=new Map,c=this.$controller.scope,l=this._forOfBinding,h=this.forOf,u=this.local,d=this._hasDestructuredLocal;if(e===void 0){const g=this.key;if(g!==null){const p=Array(n);if(typeof g=="string")for(let f=0;f<n;++f)p[f]=s[f][g];else for(let f=0;f<n;++f){const w=No(s[f],h,c,l,u,d);Fo(d,h.declaration,w,l,u,s[f]),p[f]=ce(g,w,l,null)}for(let f=0;f<n;++f)r[f]=ec(o,a,p[f],s[f],h,c,l,u,d)}else for(let p=0;p<n;++p)r[p]=ec(o,a,s[p],s[p],h,c,l,u,d)}else{const g=t.length;for(let m=0;m<n;++m){const p=e[m];p>=0&&p<g?r[m]=t[p]:r[m]=No(s[m],h,c,l,u,d),Fo(d,h.declaration,r[m],l,u,s[m])}}o.clear(),this._scopeMap=a}_normalizeToArray(){const e=this.items;if(we(e)){this._normalizedItems=e.slice(0);return}const t=[];this._resolver.resolve(e).iterate(e,(s,n)=>{t[n]=s}),this._normalizedItems=t}_activateAllViews(e,t){let s,n,r,o;const{$controller:a,_factory:c,_location:l,_scopes:h}=this,u=t.length,d=this.views=Array(u);for(let g=0;g<u;++g)r=d[g]=c.create().setLocation(l),r.nodes.unlink(),o=h[g],On(o.overrideContext,g,u),n=r.activate(e??r,a,o),ke(n)&&(s??=[]).push(n);if(s!==void 0)return s.length===1?s[0]:Promise.all(s)}_deactivateAllViews(e){let t,s,n,r=0;const{views:o,$controller:a}=this,c=o.length;for(;c>r;++r)n=o[r],n.release(),s=n.deactivate(e??n,a),ke(s)&&(t??(t=[])).push(s);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}_deactivateAndRemoveViewsByKey(e){let t,s,n;const{$controller:r,views:o}=this,a=e.deletedIndices.slice().sort(Zb),c=a.length;let l=0;for(;c>l;++l)n=o[a[l]],n.release(),s=n.deactivate(n,r),ke(s)&&(t??(t=[])).push(s);for(l=0;c>l;++l)o.splice(a[l]-l,1);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}_createAndActivateAndSortViewsByKey(e){let t,s,n,r=0;const{$controller:o,_factory:a,_location:c,views:l,_scopes:h,_oldViews:u}=this,d=e.length;for(;d>r;++r)e[r]===-2&&(n=a.create(),l.splice(r,0,n));if(l.length!==d)throw E(814,[l.length,d]);let g=0;for(r=0;r<e.length;++r)(g=e[r])!==-2&&(l[r]=u[g]);const m=Qb(e),p=m.length;let f,w=p-1;for(r=d-1;r>=0;--r)n=l[r],f=l[r+1],e[r]===-2?(n.nodes.link(f?.nodes??c),n.setLocation(c),On(h[r].overrideContext,r,d),s=n.activate(n,o,h[r]),ke(s)&&(t??(t=[])).push(s)):w<0||r!==m[w]?(n.nodes.link(f?.nodes??c),On(n.scope.overrideContext,r,d),n.nodes.insertBefore(n.location)):(On(n.scope.overrideContext,r,d),--w);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}dispose(){this.views.forEach(qb),this.views=void 0}accept(e){const{views:t}=this;if(t!==void 0){for(let s=0,n=t.length;s<n;++s)if(t[s].accept(e)===!0)return!0}}}Hu.$au={type:Me,name:"repeat",isTemplateController:!0,bindables:["items"]};let hr=16,Ht=new Int32Array(hr),Pn=new Int32Array(hr);function Qb(i){const e=i.length;e>hr&&(hr=e,Ht=new Int32Array(e),Pn=new Int32Array(e));let t=0,s=0,n=0,r=0,o=0,a=0,c=0,l=0;for(;r<e;r++)if(s=i[r],s!==-2){if(o=Ht[t],n=i[o],n!==-2&&n<s){Pn[r]=o,Ht[++t]=r;continue}for(a=0,c=t;a<c;)l=a+c>>1,n=i[Ht[l]],n!==-2&&n<s?a=l+1:c=l;n=i[Ht[a]],(s<n||n===-2)&&(a>0&&(Pn[r]=Ht[a-1]),Ht[a]=r)}r=++t;const h=new Int32Array(r);for(s=Ht[t-1];t-- >0;)h[t]=s,s=Pn[s];for(;r-- >0;)Ht[r]=0;return h}class Kl{get $odd(){return!this.$even}get $even(){return this.$index%2===0}get $first(){return this.$index===0}get $middle(){return!this.$first&&!this.$last}get $last(){return this.$index===this.$length-1}constructor(e=0,t=1){this.$index=e,this.$length=t}}const On=(i,e,t)=>{i.$index=e,i.$length=t},Gb=oe("IRepeatableHandlerResolver",i=>i.singleton(Xb));class Xb{constructor(){this._handlers=$(Uo(Yb))}resolve(e){if(Ql.handles(e))return Ql;if(Gl.handles(e))return Gl;if(Xl.handles(e))return Xl;if(Yl.handles(e))return Yl;if(Jl.handles(e))return Jl;const t=this._handlers.find(s=>s.handles(e));return t!==void 0?t:Jb}}const Yb=oe("IRepeatableHandler"),Ql={handles:we,getObserver:da,iterate(i,e){const t=i.length;let s=0;for(;s<t;++s)e(i[s],s,i)}},Gl={handles:$i,getObserver:da,iterate(i,e){let t=0,s;for(s of i.keys())e(s,t++,i)}},Xl={handles:us,getObserver:da,iterate(i,e){let t=0,s;for(s of i.entries())e(s,t++,i)}},Yl={handles:dd,iterate(i,e){let t=0;for(;t<i;++t)e(t,t,i)}},Jl={handles:i=>i==null,iterate(){}},Jb={handles(i){return!1},iterate(i,e){throw E(777,i)}},Fo=(i,e,t,s,n,r)=>{i?bn(e,t,s,null,r):t.bindingContext[n]=r},zn=(i,e,t,s,n)=>i?ce(e,t,s,null):t.bindingContext[n],Zl=(i,e,t,s,n,r)=>typeof e=="string"?zn(i,t,s,n,r)[e]:ce(e,s,n,null),ec=(i,e,t,s,n,r,o,a,c)=>{let l=i.get(t);if(l===void 0?l=No(s,n,r,o,a,c):l instanceof xe?i.delete(t):l.length===1?(l=l[0],i.delete(t)):l=l.shift(),e.has(t)){const h=e.get(t);h instanceof xe?e.set(t,[h,l]):h.push(l)}else e.set(t,l);return Fo(c,n.declaration,l,o,a,s),l},No=(i,e,t,s,n,r)=>{if(r){const o=xe.fromParent(t,new bl,new Kl);bn(e.declaration,o,s,null,i)}return xe.fromParent(t,new bl(n,i),new Kl)},Zb=(i,e)=>i-e;class zu{constructor(){this.view=$(st).create().setLocation($(Ve))}valueChanged(e,t){const s=this.$controller,n=this.view.bindings;let r,o=0,a=0;if(s.isActive&&n!=null)for(r=xe.fromParent(s.scope,e===void 0?{}:e),a=n.length;a>o;++o)n[o].bind(r)}attaching(e,t){const{$controller:s,value:n}=this,r=xe.fromParent(s.scope,n===void 0?{}:n);return this.view.activate(e,s,r)}detaching(e,t){return this.view.deactivate(e,this.$controller)}dispose(){this.view.dispose(),this.view=void 0}accept(e){if(this.view?.accept(e)===!0)return!0}}zu.$au={type:Me,name:"with",isTemplateController:!0,bindables:["value"]};class Ia{constructor(){this.cases=[],this.activeCases=[],this.promise=void 0,this._factory=$(st),this._location=$(Ve)}link(e,t,s,n){this.view=this._factory.create(this.$controller).setLocation(this._location)}attaching(e,t){const s=this.view,n=this.$controller;return this.queue(()=>s.activate(e,n,n.scope)),this.queue(()=>this.swap(e,this.value)),this.promise}detaching(e,t){return this.queue(()=>this.view.deactivate(e,this.$controller)),this.promise}dispose(){this.view?.dispose(),this.view=void 0}valueChanged(e,t){this.$controller.isActive&&this.queue(()=>this.swap(null,this.value))}caseChanged(e){this.queue(()=>this._handleCaseChange(e))}_handleCaseChange(e){const t=e.isMatch(this.value),s=this.activeCases,n=s.length;if(!t)return n>0&&s[0].id===e.id?this._clearActiveCases(null):void 0;if(n>0&&s[0].id<e.id)return;const r=[];let o=e.fallThrough;if(!o)r.push(e);else{const a=this.cases,c=a.indexOf(e);for(let l=c,h=a.length;l<h&&o;l++){const u=a[l];r.push(u),o=u.fallThrough}}return H(this._clearActiveCases(null,r),()=>(this.activeCases=r,this._activateCases(null)))}swap(e,t){const s=[];let n=!1;for(const o of this.cases)if((n||o.isMatch(t))&&(s.push(o),n=o.fallThrough),s.length>0&&!n)break;const r=this.defaultCase;return s.length===0&&r!==void 0&&s.push(r),H(this.activeCases.length>0?this._clearActiveCases(e,s):void 0,()=>{if(this.activeCases=s,s.length!==0)return this._activateCases(e)})}_activateCases(e){const t=this.$controller;if(!t.isActive)return;const s=this.activeCases,n=s.length;if(n===0)return;const r=t.scope;return n===1?s[0].activate(e,r):Se(...s.map(o=>o.activate(e,r)))}_clearActiveCases(e,t=[]){const s=this.activeCases,n=s.length;if(n!==0){if(n===1){const r=s[0];return t.includes(r)?void 0:(s.length=0,r.deactivate(e))}return H(Se(...s.reduce((r,o)=>(t.includes(o)||r.push(o.deactivate(e)),r),[])),()=>{s.length=0})}}queue(e){const t=this.promise;let s;s=this.promise=H(H(t,e),()=>{this.promise===s&&(this.promise=void 0)})}accept(e){if(this.$controller.accept(e)===!0||this.activeCases.some(t=>t.accept(e)))return!0}}Ia.$au={type:Me,name:"switch",isTemplateController:!0,bindables:["value"]};let e_=0;const Uu=["value",{name:"fallThrough",mode:br,set(i){switch(i){case"true":return!0;case"false":return!1;default:return!!i}}}];class Ta{constructor(){this.id=++e_,this.fallThrough=!1,this.view=void 0,this._factory=$(st),this._locator=$(Pi),this._location=$(Ve),this._logger=$(zs).scopeTo(`Case-#${this.id}`)}link(e,t,s,n){const o=e.parent?.viewModel;if(o instanceof Ia)this.$switch=o,this.linkToSwitch(o);else throw E(815)}detaching(e,t){return this.deactivate(e)}isMatch(e){this._logger.debug("isMatch()");const t=this.value;return we(t)?(this._observer===void 0&&(this._observer=this._observeCollection(t)),t.includes(e)):t===e}valueChanged(e,t){we(e)?(this._observer?.unsubscribe(this),this._observer=this._observeCollection(e)):this._observer!==void 0&&this._observer.unsubscribe(this),this.$switch.caseChanged(this)}handleCollectionChange(){this.$switch.caseChanged(this)}activate(e,t){let s=this.view;if(s===void 0&&(s=this.view=this._factory.create().setLocation(this._location)),!s.isActive)return s.activate(e??s,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(e??t,this.$controller)}dispose(){this._observer?.unsubscribe(this),this.view?.dispose(),this.view=void 0}linkToSwitch(e){e.cases.push(this)}_observeCollection(e){const t=this._locator.getArrayObserver(e);return t.subscribe(this),t}accept(e){return this.$controller.accept(e)===!0?!0:this.view?.accept(e)}}_a({name:"case",bindables:Uu,isTemplateController:!0},Ta);class Wu extends Ta{linkToSwitch(e){if(e.defaultCase!==void 0)throw E(816);e.defaultCase=this}}_a({name:"default-case",bindables:Uu,isTemplateController:!0},Wu);var qu,Ku,Qu;class Ea{constructor(){this.preSettledTask=null,this.postSettledTask=null,this._factory=$(st),this._location=$(Ve),this._platform=$(qe),this.logger=$(zs).scopeTo("promise.resolve")}link(e,t,s,n){this.view=this._factory.create(this.$controller).setLocation(this._location)}attaching(e,t){const s=this.view,n=this.$controller;return H(s.activate(e,n,this.viewScope=xe.fromParent(n.scope,{})),()=>this.swap(e))}valueChanged(e,t){this.$controller.isActive&&this.swap(null)}swap(e){const t=this.value;if(!ke(t)){this.logger.warn(`The value '${Qs(t)}' is not a promise. No change will be done.`);return}const s=this.fulfilled,n=this.rejected,r=this.pending,o=this.viewScope;let a;const c=()=>{Se(a=(this.preSettledTask=nn(()=>Se(s?.deactivate(e),n?.deactivate(e),r?.activate(e,o)))).result.catch(l=>{throw l}),t.then(l=>{if(this.value!==t)return;const h=()=>{this.postSettlePromise=(this.postSettledTask=nn(()=>Se(r?.deactivate(e),n?.deactivate(e),s?.activate(e,o,l)))).result};this.preSettledTask.status===Xr?a.then(h):(this.preSettledTask.cancel(),h())},l=>{if(this.value!==t)return;const h=()=>{this.postSettlePromise=(this.postSettledTask=nn(()=>Se(r?.deactivate(e),s?.deactivate(e),n?.activate(e,o,l)))).result};this.preSettledTask.status===Xr?a.then(h):(this.preSettledTask.cancel(),h())}))};this.postSettledTask?.status===Xr?this.postSettlePromise.then(c):(this.postSettledTask?.cancel(),c())}detaching(e,t){return this.preSettledTask?.cancel(),this.postSettledTask?.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(e,this.$controller)}dispose(){this.view?.dispose(),this.view=void 0}}Ea.$au={type:Me,name:"promise",isTemplateController:!0,bindables:["value"]};class Gu{constructor(){this.view=void 0,this._factory=$(st),this._location=$(Ve)}link(e,t,s,n){Ba(e).pending=this}activate(e,t){let s=this.view;if(s===void 0&&(s=this.view=this._factory.create().setLocation(this._location)),!s.isActive)return s.activate(s,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e){return this.deactivate(e)}dispose(){this.view?.dispose(),this.view=void 0}}Gu.$au={type:Me,name:"pending",isTemplateController:!0,bindables:{value:{mode:me}}};class Xu{constructor(){this.view=void 0,this._factory=$(st),this._location=$(Ve)}link(e,t,s,n){Ba(e).fulfilled=this}activate(e,t,s){this.value=s;let n=this.view;if(n===void 0&&(n=this.view=this._factory.create().setLocation(this._location)),!n.isActive)return n.activate(n,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e,t){return this.deactivate(e)}dispose(){this.view?.dispose(),this.view=void 0}}Xu.$au={type:Me,name:"then",isTemplateController:!0,bindables:{value:{mode:Zt}}};class Yu{constructor(){this.view=void 0,this._factory=$(st),this._location=$(Ve)}link(e,t,s,n){Ba(e).rejected=this}activate(e,t,s){this.value=s;let n=this.view;if(n===void 0&&(n=this.view=this._factory.create().setLocation(this._location)),!n.isActive)return n.activate(n,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e,t){return this.deactivate(e)}dispose(){this.view?.dispose(),this.view=void 0}}Yu.$au={type:Me,name:"catch",isTemplateController:!0,bindables:{value:{mode:Zt}}};function Ba(i){const t=i.parent?.viewModel;if(t instanceof Ea)return t;throw E(813)}class jo{"promise.resolve"(e,t){return new tt(e,t,"promise","bind")}}qu=Symbol.metadata;jo[qu]={[Dt]:ys.create([{pattern:"promise.resolve",symbols:""}],jo)};class Vo{then(e,t){return new tt(e,t,"then","from-view")}}Ku=Symbol.metadata;Vo[Ku]={[Dt]:ys.create([{pattern:"then",symbols:""}],Vo)};class Ho{catch(e,t){return new tt(e,t,"catch","from-view")}}Qu=Symbol.metadata;Ho[Qu]={[Dt]:ys.create([{pattern:"catch",symbols:""}],Ho)};class Ju{constructor(){this._needsApply=!1,this._element=$(yr),this._platform=$(qe)}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this._apply():this._needsApply=!0}attached(){this._needsApply&&(this._needsApply=!1,this._apply()),this._element.addEventListener("focus",this),this._element.addEventListener("blur",this)}detaching(){const e=this._element;e.removeEventListener("focus",this),e.removeEventListener("blur",this)}handleEvent(e){e.type==="focus"?this.value=!0:this._isElFocused||(this.value=!1)}_apply(){const e=this._element,t=this._isElFocused,s=this.value;s&&!t?e.focus():!s&&t&&e.blur()}get _isElFocused(){return this._element===this._platform.document.activeElement}}Ju.$au={type:Me,name:"focus",bindables:{value:{mode:zh}}};class Zu{constructor(){this.position="beforeend",this.strict=!1;const e=$(st),t=$(Ve),s=$(qe);this._platform=s,this._resolvedTarget=s.document.createElement("div"),(this.view=e.create()).setLocation(this._targetLocation=Lm(s)),Bb(this.view.nodes,t)}attaching(e){this.callbackContext==null&&(this.callbackContext=this.$controller.scope.bindingContext);const t=this._resolvedTarget=this._getTarget();return this._moveLocation(t,this.position),this._activating(e,t)}detaching(e){return this._deactivating(e,this._resolvedTarget)}targetChanged(){const{$controller:e}=this;if(!e.isActive)return;const t=this._getTarget();if(this._resolvedTarget===t)return;this._resolvedTarget=t;const s=H(this._deactivating(null,t),()=>(this._moveLocation(t,this.position),this._activating(null,t)));ke(s)&&s.catch(Eo)}positionChanged(){const{$controller:e,_resolvedTarget:t}=this;if(!e.isActive)return;const s=H(this._deactivating(null,t),()=>(this._moveLocation(t,this.position),this._activating(null,t)));ke(s)&&s.catch(Eo)}_activating(e,t){const{activating:s,callbackContext:n,view:r}=this;return H(s?.call(n,t,r),()=>this._activate(e,t))}_activate(e,t){const{$controller:s,view:n}=this;if(e===null)n.nodes.insertBefore(this._targetLocation);else return H(n.activate(e??n,s,s.scope),()=>this._activated(t));return this._activated(t)}_activated(e){const{activated:t,callbackContext:s,view:n}=this;return t?.call(s,e,n)}_deactivating(e,t){const{deactivating:s,callbackContext:n,view:r}=this;return H(s?.call(n,t,r),()=>this._deactivate(e,t))}_deactivate(e,t){const{$controller:s,view:n}=this;if(e===null)n.nodes.remove();else return H(n.deactivate(e,s),()=>this._deactivated(t));return this._deactivated(t)}_deactivated(e){const{deactivated:t,callbackContext:s,view:n}=this;return H(t?.call(s,e,n),()=>this._removeLocation())}_getTarget(){const e=this._platform,t=e.document;let s=this.target,n=this.renderContext;if(s===""){if(this.strict)throw E(811);return t.body}if(G(s)){let r=t;G(n)&&(n=t.querySelector(n)),n instanceof e.Node&&(r=n),s=r.querySelector(s)}if(s instanceof e.Node)return s;if(s==null){if(this.strict)throw E(812);return t.body}return s}_removeLocation(){this._targetLocation.remove(),this._targetLocation.$start.remove()}_moveLocation(e,t){const s=this._targetLocation,n=s.$start,r=e.parentNode,o=[n,s];switch(t){case"beforeend":Bn(e,null,o);break;case"afterbegin":Bn(e,e.firstChild,o);break;case"beforebegin":Bn(r,e,o);break;case"afterend":Bn(r,e.nextSibling,o);break;default:throw E(779,t)}}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(e){if(this.view?.accept(e)===!0)return!0}}Zu.$au={type:Me,name:"portal",isTemplateController:!0,bindables:[{name:"target",primary:!0},"position","activated","activating","callbackContext",{name:"renderContext",callback:"targetChanged"},"strict","deactivated","deactivating"]};let t_;class Er{constructor(){this._parentScope=null,this._outerScope=null,this._attached=!1,this.expose=null,this.slotchange=null,this._subs=new Set,this._observer=null;const e=$(_s),t=$(Ve),s=$(Bi),n=$(Zs),r=this.name=s.data.name,o=s.projections?.[hu],a=e.instruction?.projections?.[r],c=e.controller.container;let l,h;a==null?(h=c.createChild({inheritParentResources:!0}),l=n.getViewFactory(o??(t_??=We.create({name:"au-slot-empty-template",template:"",needsCompile:!1})),h),this._hasProjection=!1):(h=c.createChild(),h.useResources(e.parent.controller.container),le(h,_s,new Ce(void 0,e.parent)),l=n.getViewFactory(a,h),this._hasProjection=!0,this._slotwatchers=c.getAll(Fm,!1)?.filter(u=>u.slotName==="*"||u.slotName===r)??U),this._hasSlotWatcher=(this._slotwatchers??=U).length>0,this._hdrContext=e,this.view=l.create().setLocation(this._location=t)}get nodes(){const e=[],t=this._location;let s=t.$start.nextSibling;for(;s!=null&&s!==t;)s.nodeType!==8&&e.push(s),s=s.nextSibling;return e}subscribe(e){this._subs.add(e)}unsubscribe(e){this._subs.delete(e)}binding(e,t){for(this._parentScope=t.scope;t.vmKind==="synthetic"&&t.parent?.viewModel instanceof Er;)t=t.parent.parent;const s=t.scope.bindingContext;let n;this._hasProjection&&(n=this._hdrContext.controller.scope.parent,(this._outerScope=xe.fromParent(n,n.bindingContext)).overrideContext.$host=this.expose??s)}attaching(e,t){return H(this.view.activate(e,this.$controller,this._hasProjection?this._outerScope:this._parentScope),()=>{(this._hasSlotWatcher||ee(this.slotchange))&&(this._slotwatchers.forEach(s=>s.watch(this)),this._observe(),this._notifySlotChange(),this._attached=!0)})}detaching(e,t){return this._attached=!1,this._unobserve(),this._slotwatchers.forEach(s=>s.unwatch(this)),this.view.deactivate(e,this.$controller)}exposeChanged(e){this._hasProjection&&this._outerScope!=null&&(this._outerScope.overrideContext.$host=e)}dispose(){this.view.dispose(),this.view=void 0}accept(e){if(this.view?.accept(e)===!0)return!0}_observe(){if(this._observer!=null)return;const e=this._location,t=e.parentElement;t!=null&&(this._observer=cu(t,s=>{s_(e,s)&&this._notifySlotChange()})).observe(t,{childList:!0})}_unobserve(){this._observer?.disconnect(),this._observer=null}_notifySlotChange(){const e=this.nodes,t=new Set(this._subs);let s;this._attached&&this.slotchange?.call(void 0,this.name,e);for(s of t)s.handleSlotChange(this,e)}}Er.$au={type:Xs,name:"au-slot",template:null,containerless:!0,processContent(i,e,t){t.name=i.getAttribute("name")??hu;let s=i.firstChild,n=null;for(;s!==null;)n=s.nextSibling,Dm(s)&&s.hasAttribute(Mm)&&(console.warn("[DEV:aurelia] detected [au-slot] attribute on a child node",`of an <au-slot> element: "<${s.nodeName} au-slot>".`,"This element will be ignored and removed"),i.removeChild(s)),s=n},bindables:["expose","slotchange"]};const Ln=(i,e)=>i.compareDocumentPosition(e),s_=(i,e)=>{for(const{addedNodes:t,removedNodes:s,nextSibling:n}of e){let r=0,o=t.length,a;for(;r<o;++r)if(a=t[r],Ln(i.$start,a)===4&&Ln(i,a)===2)return!0;if(s.length>0&&n!=null&&Ln(i.$start,n)===4&&Ln(i,n)===2)return!0}};class ed{constructor(){this.scopeBehavior="auto",this._composition=void 0,this.tag=null,this._container=$(kn),this.parent=$(Ir),this._host=$(yr),this._location=$(Ve),this._platform=$(qe),this._rendering=$(Zs),this._instruction=$(Bi),this._contextFactory=$(Pd(n_)),this._compiler=$(dr),this._hydrationContext=$(_s),this._exprParser=$(Ti),this._observerLocator=$(Pi),this._attached=!1}get composing(){return this._composing}get composition(){return this._composition}attaching(e,t){return this._attached=!0,this._composing=H(this.queue(new tc(this.template,this.component,this.model,void 0),e),s=>{this._contextFactory._isCurrent(s)&&(this._composing=void 0)})}detaching(e){this._attached=!1;const t=this._composition,s=this._composing;return this._contextFactory.invalidate(),this._composition=this._composing=void 0,H(s,()=>t?.deactivate(e))}propertyChanged(e){if(this._attached&&!(e==="composing"||e==="composition")){if(e==="model"&&this._composition!=null){this._composition.update(this.model);return}if(e==="tag"&&this._composition?.controller.vmKind===ot){console.warn("[DEV:aurelia] Changing tag name of a custom element composition is ignored.");return}this._composing=H(this._composing,()=>H(this.queue(new tc(this.template,this.component,this.model,e),void 0),t=>{this._contextFactory._isCurrent(t)&&(this._composing=void 0)}))}}queue(e,t){const s=this._contextFactory,n=this._composition;return H(s.create(e),r=>s._isCurrent(r)?H(this.compose(r),o=>s._isCurrent(r)?H(o.activate(t),()=>s._isCurrent(r)?(this._composition=o,H(n?.deactivate(t),()=>r)):H(o.controller.deactivate(o.controller,this.$controller),()=>(o.controller.dispose(),r))):(o.controller.dispose(),r)):r)}compose(e){const{_template:t,_component:s,_model:n}=e.change,{_container:r,$controller:o,_location:a,_instruction:c}=this,l=this._getDefinition(this._hydrationContext.controller.container,s),h=r.createChild(),u=this._platform.document.createElement(l==null?this.tag??"div":l.name);a.parentNode.insertBefore(u,a);let d;l==null?d=this.tag==null?_n(u):null:d=l.containerless?_n(u):null;const g=()=>{if(u.remove(),d!=null){let f=d.$start.nextSibling,w=null;for(;f!==null&&f!==d;)w=f.nextSibling,f.remove(),f=w;d.$start?.remove(),d.remove()}},m=this._createComponentInstance(h,typeof s=="string"?l.Type:s,u,d),p=()=>{const f=c.captures??U;if(l!==null){const w=l.capture,[T,R]=f.reduce((x,P)=>{const I=!(P.target in l.bindables)&&(w===!0||ee(w)&&!!w(P.target));return x[I?0:1].push(P),x},[[],[]]),S=et.$el(h,m,u,{projections:c.projections,captures:T},l,d);return this._createSpreadBindings(u,l,R).forEach(x=>S.addBinding(x)),new ic(S,x=>S.activate(x??S,o,o.scope.parent),x=>H(S.deactivate(x??S,o),g),x=>m.activate?.(x),e)}else{const w=We.create({name:hs.generateName(),template:t}),T=this._rendering.getViewFactory(w,h),R=et.$view(T,o),S=this.scopeBehavior==="auto"?xe.fromParent(this.parent.scope,m):xe.create(m);return R.setHost(u),d==null?this._createSpreadBindings(u,w,f).forEach(x=>R.addBinding(x)):R.setLocation(d),new ic(R,x=>R.activate(x??R,o,S),x=>H(R.deactivate(x??R,o),g),x=>m.activate?.(x),e)}};return"activate"in m?H(m.activate(n),()=>p()):p()}_createComponentInstance(e,t,s,n){if(t==null)return new i_;if(typeof t=="object")return t;const r=this._platform;Tr(e,s,r),le(e,Ve,new Ce("IRenderLocation",n));const o=e.invoke(t);return le(e,t,new Ce("au-compose.component",o)),o}_getDefinition(e,t){if(typeof t=="string"){const n=hs.find(e,t);if(n==null)throw E(806,t);return n}const s=ee(t)?t:t?.constructor;return hs.isType(s,void 0)?hs.getDefinition(s,null):null}_createSpreadBindings(e,t,s){const n=new $u(this.$controller,{projections:null,captures:s},this._hydrationContext.parent);return xr.create(n,e,t,this._rendering,this._compiler,this._platform,this._exprParser,this._observerLocator)}}ed.$au={type:Xs,name:"au-compose",capture:!0,containerless:!0,bindables:["template","component","model",{name:"scopeBehavior",set:i=>{if(i==="scoped"||i==="auto")return i;throw E(805,i)}},{name:"composing",mode:Zt},{name:"composition",mode:Zt},"tag"]};class i_{}class n_{constructor(){this.id=0}_isCurrent(e){return e.id===this.id}create(e){return H(e.load(),t=>new r_(++this.id,t))}invalidate(){this.id++}}class tc{constructor(e,t,s,n){this._template=e,this._component=t,this._model=s,this._src=n}load(){return ke(this._template)||ke(this._component)?Promise.all([this._template,this._component]).then(([e,t])=>new sc(e,t,this._model,this._src)):new sc(this._template,this._component,this._model,this._src)}}class sc{constructor(e,t,s,n){this._template=e,this._component=t,this._model=s,this._src=n}}class r_{constructor(e,t){this.id=e,this.change=t}}class ic{constructor(e,t,s,n,r){this.controller=e,this.start=t,this.stop=s,this.update=n,this.context=r,this.state=0}activate(e){if(this.state!==0)throw E(807,this);return this.state=1,this.start(e)}deactivate(e){switch(this.state){case 1:return this.state=-1,this.stop(e);case-1:throw E(808);default:this.state=-1}}}const o_=oe("ISanitizer",i=>i.singleton(class{sanitize(){throw E(99,"sanitize")}}));class td{constructor(){this._sanitizer=$(o_)}toView(e){return e==null?null:this._sanitizer.sanitize(e)}}td.$au={type:di,name:"sanitize"};class sd{constructor(){this.el=$(yr),this.p=$(qe),this._isActive=!1,this._isQueued=!1,this.$val="",this.$prio="",this.update=()=>{this._isQueued=!1,!!this.value!==this._isToggled&&(this._isToggled===this._base?(this._isToggled=!this._base,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this._isToggled=this._base,this.el.style.setProperty("display",this.$val,this.$prio),this.el.getAttribute("style")===""&&this.el.removeAttribute("style")))};const e=$(Bi);this._isToggled=this._base=e.alias!=="hide"}binding(){this._isActive=!0,this.update()}detaching(){this._isActive=!1,this._isQueued=!1}valueChanged(){this._isActive&&!this._isQueued&&(this._isQueued=!0,Pt(this.update))}}sd.$au={type:Me,name:"show",bindables:["value"],aliases:["hide"]};const a_=[Vb,Xg,$a],l_=[_o,bo,vo,Om],c_=[_h,ph,mh,gh,bh,vh,Ah,wh,yh,xh,Ch,kh,Sh],h_=[su,Jh,Zh,eu,iu,nu,tu,td,cr,Vu,Hu,zu,Ia,Ta,Wu,Ea,Gu,Xu,Yu,jo,Vo,Ho,Fu,Nu,ju,ed,Zu,Ju,sd,Er],u_=[Km,Qm,Wm,qm,jm,Vm,Hm,zm,Um,Ym,nb,Jm,Zm,eb,sb,Gm,rb,ob],d_=id(ut);function id(i){return{optionsProvider:i,register(e){const t={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return i(t),e.register(Xh(Ph,t.coercingOptions),Rc,...a_,...h_,...l_,...c_,...u_)},customize(e){return id(e??i)}}}const f_=cs.getOrCreate(globalThis);function p_(){return ws.createContainer().register(Hs.instance(qe,f_),d_)}class un extends Fb{constructor(e=p_()){super(e)}static app(e){return new un().app(e)}static enhance(e){return new un().enhance(e)}static register(...e){return new un().register(...e)}app(e){if(hs.isType(e)){const t=hs.getDefinition(e);let s=document.querySelector(t.name);return s===null&&(s=document.body),super.app({host:s,component:e})}return super.app(e)}}const g_=`<template>
  <section class="data-extractor" ref="rootEl">
    <header class="hero">
      <p class="eyebrow">Data-extractor</p>
      <h1>Registraties filteren & exporteren</h1>
      <p class="lead">
        Upload een shapefile (.shp + .dbf) of GeoJSON, filter de registraties op datum, tekst of cordinaten
        en exporteer het resultaat als CSV of GeoJSON.
      </p>
    </header>

    <section class="panel">
      <div class="panel-head">
        <div>
          <p class="panel-eyebrow">Invoer</p>
          <h2>Data inladen</h2>
        </div>
        <button type="button" class="ghost" disabled.bind="isBusy" click.trigger="resetData()">Leeg invoer</button>
      </div>

      <div class="input-grid">
        <div>
          <label class="field">
            <span>Registraties (shapefile .shp)</span>
            <input type="file" accept=".shp" change.trigger="shpFileChanged($event.target.files[0])">
          </label>
          <label class="field">
            <span>Attribuuttabel (.dbf, optioneel)</span>
            <input type="file" accept=".dbf" change.trigger="dbfFileChanged($event.target.files[0])">
          </label>
          <p class="hint">We koppelen records uit de DBF automatisch aan de shapefile op volgorde.</p>
        </div>
        <div class="divider">
          <span>of</span>
        </div>
        <div>
          <label class="field">
            <span>GeoJSON met registraties</span>
            <input type="file" accept=".json,.geojson" change.trigger="geoJsonFileChanged($event.target.files[0])">
          </label>
          <p class="hint">Alle eigenschappen uit GeoJSON komen beschikbaar als kolom in het overzicht.</p>
        </div>
      </div>

      <p class="status" if.bind="infoMessage">\${infoMessage}</p>
      <p class="status error" if.bind="loadError">\${loadError}</p>
    </section>

    <section class="panel">
      <div class="panel-head">
        <div>
          <p class="panel-eyebrow">Filters</p>
          <h2>Verfijn resultaten</h2>
        </div>
        <button type="button" class="ghost" disabled.bind="!hasData" click.trigger="resetFilters()">Reset filters</button>
      </div>

      <div class="filters">
        <label class="field">
          <span>Zoek in waarden</span>
          <input
            type="search"
            placeholder="Adres, code, ... "
            value.bind="filters.text"
            input.trigger="onFilterChange()">
        </label>

        <div class="row">
          <label class="field compact">
            <span>Van (YYYY-MM-DD)</span>
            <input type="date" value.bind="filters.from" change.trigger="onFilterChange()">
          </label>
          <label class="field compact">
            <span>Tot en met</span>
            <input type="date" value.bind="filters.to" change.trigger="onFilterChange()">
          </label>
          <label class="checkbox">
            <input type="checkbox" checked.bind="filters.onlyWithDate" change.trigger="onFilterChange()">
            <span>Alleen registraties met datum</span>
          </label>
          <label class="field compact">
            <span>Sorteer op datum</span>
            <select value.bind="filters.sortDate" change.trigger="onFilterChange()">
              <option value="none">Geen sortering</option>
              <option value="asc">Oplopend</option>
              <option value="desc">Aflopend</option>
            </select>
          </label>
        </div>

        <div class="row bounds-row">
          <label class="checkbox">
            <input type="checkbox" checked.bind="filters.boundsEnabled" change.trigger="onFilterChange()">
            <span>Filter op cordinatenbereik</span>
          </label>
          <div class="bounds-grid" if.bind="filters.boundsEnabled">
            <label class="field compact">
              <span>minX (west)</span>
              <input type="number" step="any" value.bind="boundsInput.minX" change.trigger="onFilterChange()">
            </label>
            <label class="field compact">
              <span>minY (zuid)</span>
              <input type="number" step="any" value.bind="boundsInput.minY" change.trigger="onFilterChange()">
            </label>
            <label class="field compact">
              <span>maxX (oost)</span>
              <input type="number" step="any" value.bind="boundsInput.maxX" change.trigger="onFilterChange()">
            </label>
            <label class="field compact">
              <span>maxY (noord)</span>
              <input type="number" step="any" value.bind="boundsInput.maxY" change.trigger="onFilterChange()">
            </label>
          </div>
        </div>
      </div>
    </section>

    <section class="panel results" if.bind="hasData">
      <div class="results-head">
        <div>
          <p class="panel-eyebrow">Resultaten</p>
          <h2>Overzicht</h2>
          <p class="hint">\${resultSummary}</p>
          <p class="hint">Excel-export genereert een .xlsx-bestand; CSV/GeoJSON blijven beschikbaar voor andere tools.</p>
        </div>
        <div class="actions">
          <label class="field inline">
            <span>Per pagina</span>
            <select value.two-way="pageSize" change.trigger="onPageSizeChange($event.target.valueAsNumber || $event.target.value)">
              <option repeat.for="opt of pageSizeOptions" model.bind="opt">\${opt}</option>
            </select>
          </label>
          <button type="button" disabled.bind="!filteredRows.length" click.trigger="exportCsv()">Exporteer CSV</button>
          <button type="button" disabled.bind="!filteredRows.length" click.trigger="exportExcel()">Exporteer Excel</button>
          <button type="button" disabled.bind="!filteredRows.length" click.trigger="exportGeoJson()">Exporteer GeoJSON</button>
        </div>
      </div>

      <div class="table-wrap" if.bind="filteredRows.length">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Locatie</th>
              <th>X</th>
              <th>Y</th>
              <th>Datum</th>
              <th repeat.for="col of attributeColumns">\${col}</th>
            </tr>
          </thead>
          <tbody>
            <tr repeat.for="row of pageRows">
              <td>\${(currentPage - 1) * pageSize + $index + 1}</td>
              <td>
                <a class="map-link" href.bind="googleMapsUrl(row)" target="_blank" rel="noopener">
                  
                </a>
              </td>
              <td>\${row.x}</td>
              <td>\${row.y}</td>
              <td>\${row.date || '-'}</td>
              <td repeat.for="col of attributeColumns">
                <span if.bind="col !== 'obs_uri'">\${formatValue(row.attributes[col])}</span>
                <a
                  if.bind="col === 'obs_uri'"
                  class="map-link"
                  href.bind="obsUrl(row.attributes[col])"
                  target="_blank"
                  rel="noopener">
                  \${obsLabel(row.attributes[col])}
                </a>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <p class="hint" if.bind="!filteredRows.length">Geen registraties binnen de huidige filter.</p>

      <div class="pagination" if.bind="pageCount > 1">
        <button type="button" class="ghost" disabled.bind="currentPage === 1" click.trigger="goToPage(1)">Eerste</button>
        <button type="button" class="ghost" disabled.bind="currentPage === 1" click.trigger="changePage(-1)">Vorige</button>
        <span>Pagina \${currentPage} van \${pageCount}</span>
        <button type="button" class="ghost" disabled.bind="currentPage === pageCount" click.trigger="changePage(1)">Volgende</button>
        <button type="button" class="ghost" disabled.bind="currentPage === pageCount" click.trigger="goToPage(pageCount)">Laatste</button>
      </div>
    </section>

    <section class="panel muted" if.bind="!hasData">
      <h3>Geen data geladen</h3>
      <p class="hint">Start met een shapefile of GeoJSON upload om de filters en export te gebruiken.</p>
    </section>
  </section>
</template>
`;function m_(i){if(i.byteLength<100)throw new Error("SHP file too small to contain a valid header.");const e=i.getInt32(0,!1);if(e!==9994)throw new Error(`Unexpected SHP file code: ${e}`);const t=i.getInt32(32,!0),s=i.getFloat64(36,!0),n=i.getFloat64(44,!0),r=i.getFloat64(52,!0),o=i.getFloat64(60,!0);return{shapeType:t,bounds:{minX:s,minY:n,maxX:r,maxY:o}}}function b_(i){if(i.length<3)return null;let e=0,t=0,s=0;for(let r=0;r<i.length;r++){const{x:o,y:a}=i[r],{x:c,y:l}=i[(r+1)%i.length],h=o*l-c*a;e+=h,t+=(o+c)*h,s+=(a+l)*h}if(e*=.5,Math.abs(e)<1e-9)return null;const n=1/(6*e);return{centroid:{x:t*n,y:s*n},area:Math.abs(e)}}function __(i){if(!i.length)return{x:0,y:0};let e=0,t=0;for(const s of i)e+=s.x,t+=s.y;return{x:e/i.length,y:t/i.length}}function v_(i,e){if(i.getInt32(e,!0)===0)return{centroid:null,next:e};const s=i.getInt32(e+36,!0),n=i.getInt32(e+40,!0),r=e+44,o=r+s*4,a=[];for(let d=0;d<s;d++)a.push(i.getInt32(r+d*4,!0));a.push(n);const c=[];for(let d=0;d<n;d++){const g=o+d*16;c.push({x:i.getFloat64(g,!0),y:i.getFloat64(g+8,!0)})}let l=0,h=0,u=0;for(let d=0;d<s;d++){const g=a[d],m=a[d+1],p=c.slice(g,m),f=b_(p);f&&(l+=f.centroid.x*f.area,h+=f.centroid.y*f.area,u+=f.area)}return u>0?{centroid:{x:l/u,y:h/u},next:o+n*16}:{centroid:__(c),next:o+n*16}}function w_(i,e){const t=i.getInt32(e+36,!0),s=[],n=e+40;for(let r=0;r<t;r++){const o=n+r*16;s.push({x:i.getFloat64(o,!0),y:i.getFloat64(o+8,!0)})}return{points:s,next:n+t*16}}function y_(i){const e=new DataView(i),t=m_(e),s=[];let n=0,r=100;for(;r+12<=e.byteLength;){const a=e.getInt32(r+4,!1)*2;r+=8;const c=r,l=c+a;if(l>e.byteLength)break;const h=e.getInt32(c,!0);if(h===0){r=l;continue}switch(h){case 1:{const u=e.getFloat64(c+4,!0),d=e.getFloat64(c+12,!0);s.push({x:u,y:d,recordIndex:n});break}case 8:{const{points:u}=w_(e,c);s.push(...u.map(d=>({...d,recordIndex:n})));break}case 3:case 5:{const{centroid:u}=v_(e,c);u&&s.push({...u,recordIndex:n});break}}n++,r=l}return{points:s,bounds:t.bounds,shapeType:t.shapeType}}function k_(i){const e=i.getUint32(4,!0),t=i.getUint16(8,!0),s=i.getUint16(10,!0);return{recordCount:e,headerLength:t,recordLength:s}}function C_(i,e){const t=[];let s=32,n=1;for(;s+32<=e-1;){const r=new Uint8Array(i.buffer,s,11),o=r.indexOf(0),a=new TextDecoder("ascii").decode(o>=0?r.slice(0,o):r).trim(),c=String.fromCharCode(i.getUint8(s+11)),l=i.getUint8(s+16),h=i.getUint8(s+17);if(!a)break;t.push({name:a,type:c,size:l,decimals:h,offset:n}),n+=l,s+=32}return t}function x_(i,e,t){const s=new Uint8Array(i.buffer,e,t);return new TextDecoder("latin1").decode(s).replace(/\u0000/g,"").trim()}function A_(i){const e=i.trim();if(!e)return null;if(e.length===8&&/^\d{8}$/.test(e))return`${e.slice(0,4)}-${e.slice(4,6)}-${e.slice(6,8)}`;const t=new Date(e);return isNaN(t.getTime())?null:t.toISOString().slice(0,10)}function S_(i,e,t){const s=x_(i,t+e.offset,e.size);if(!s)return null;switch(e.type){case"N":case"F":{const n=Number(s);return Number.isFinite(n)?n:s}case"D":return A_(s);case"L":return["y","t","1"].includes(s.toLowerCase());default:return s}}function $_(i){const e=new DataView(i),{recordCount:t,headerLength:s,recordLength:n}=k_(e),r=C_(e,s),o=[];let a=s;for(let c=0;c<t&&!(a+n>e.byteLength);c++){const l=e.getUint8(a),h={};if(l!==42)for(const u of r){const d=S_(e,u,a);h[u.name]=d}o.push(h),a+=n}return{records:o,fields:r}}function I_(i,e,t){return i?{minX:Math.min(i.minX,e),minY:Math.min(i.minY,t),maxX:Math.max(i.maxX,e),maxY:Math.max(i.maxY,t)}:{minX:e,minY:t,maxX:e,maxY:t}}function T_(i){const e=JSON.parse(i);if(!e||e.type!=="FeatureCollection"||!Array.isArray(e.features))throw new Error("GeoJSON moet een FeatureCollection zijn.");const t=[];let s=null;for(const n of e.features){if(!n||n.type!=="Feature"||!n.geometry)continue;const r=n.geometry;if(r.type!=="Point"||!Array.isArray(r.coordinates)||r.coordinates.length<2)continue;const[o,a]=r.coordinates;if(!Number.isFinite(o)||!Number.isFinite(a))continue;const c=n.properties&&typeof n.properties=="object"?{...n.properties}:{},l=c?.datm_start||c?.dateStart,h=c?.datm_stop||c?.dateStop;t.push({x:o,y:a,dateStart:l,dateStop:h,attributes:c,recordIndex:t.length}),s=I_(s,o,a)}return s||(s={minX:0,minY:0,maxX:0,maxY:0}),{points:t,bounds:s}}const E_=(()=>{const i=new Uint32Array(256);for(let e=0;e<256;e++){let t=e;for(let s=0;s<8;s++)t=(t&1?3988292384^t>>>1:t>>>1)>>>0;i[e]=t}return i})();var B_=Object.create,Ra=Object.defineProperty,R_=Object.getOwnPropertyDescriptor,P_=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),$n=i=>{throw TypeError(i)},O_=(i,e,t)=>e in i?Ra(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,nc=(i,e)=>Ra(i,"name",{value:e,configurable:!0}),L_=i=>[,,,B_(null)],nd=["class","method","getter","setter","accessor","field","value","get","set"],qi=i=>i!==void 0&&typeof i!="function"?$n("Function expected"):i,D_=(i,e,t,s,n)=>({kind:nd[i],name:e,metadata:s,addInitializer:r=>t._?$n("Already initialized"):n.push(qi(r||null))}),M_=(i,e)=>O_(e,P_("metadata"),i[3]),Ps=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)e&1?r[n].call(t):s=r[n].call(t,s);return s},Br=(i,e,t,s,n,r)=>{var o,a,c,l,h,u=e&7,d=!!(e&8),g=!!(e&16),m=u>3?i.length+1:u?d?1:2:0,p=nd[u+5],f=u>3&&(i[m-1]=[]),w=i[m]||(i[m]=[]),T=u&&(!g&&!d&&(n=n.prototype),u<5&&(u>3||!g)&&R_(u<4?n:{get[t](){return rc(this,r)},set[t](S){return oc(this,r,S)}},t));u?g&&u<4&&nc(r,(u>2?"set ":u>1?"get ":"")+t):nc(n,t);for(var R=s.length-1;R>=0;R--)l=D_(u,t,c={},i[3],w),u&&(l.static=d,l.private=g,h=l.access={has:g?S=>F_(n,S):S=>t in S},u^3&&(h.get=g?S=>(u^1?rc:N_)(S,n,u^4?r:T.get):S=>S[t]),u>2&&(h.set=g?(S,x)=>oc(S,n,x,u^4?r:T.set):(S,x)=>S[t]=x)),a=(0,s[R])(u?u<4?g?r:T[p]:u>4?void 0:{get:T.get,set:T.set}:n,l),c._=1,u^4||a===void 0?qi(a)&&(u>4?f.unshift(a):u?g?r=a:T[p]=a:n=a):typeof a!="object"||a===null?$n("Object expected"):(qi(o=a.get)&&(T.get=o),qi(o=a.set)&&(T.set=o),qi(o=a.init)&&f.unshift(o));return u||M_(i,n),T&&Ra(n,t,T),g?u^4?r:T:n},Pa=(i,e,t)=>e.has(i)||$n("Cannot "+t),F_=(i,e)=>Object(e)!==e?$n('Cannot use the "in" operator on this value'):i.has(e),rc=(i,e,t)=>(Pa(i,e,"read from private field"),t?t.call(i):e.get(i)),oc=(i,e,t,s)=>(Pa(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t),N_=(i,e,t)=>(Pa(i,e,"access private method"),t),rd,od,ad,ld,lt;ld=[Rb({name:"data-extractor-view",template:g_})],ad=[Yr],od=[Yr],rd=[Yr];class Ys{constructor(){this.shpFile=Ps(lt,8,this,null),Ps(lt,11,this),this.dbfFile=Ps(lt,12,this,null),Ps(lt,15,this),this.geoJsonFile=Ps(lt,16,this,null),Ps(lt,19,this),this.sourceType=null,this.infoMessage=null,this.loadError=null,this.isBusy=!1,this.dataRows=[],this.filteredRows=[],this.pageRows=[],this.attributeColumns=[],this.fieldsFromDbf=[],this.boundsFromData=null,this.boundsInput={minX:0,minY:0,maxX:0,maxY:0},this.filters={text:"",from:"",to:"",onlyWithDate:!1,boundsEnabled:!1,sortDate:"none"},this.pageSizeOptions=[10,25,50],this.pageSize=10,this.currentPage=1,this.host=null}created(e){this.host=e}get pageCount(){return Math.max(1,Math.ceil(this.filteredRows.length/this.pageSize))}get hasData(){return this.dataRows.length>0}get resultSummary(){if(!this.hasData)return"Nog geen data geladen.";if(!this.filteredRows.length)return"Geen resultaten na filteren.";const e=(this.currentPage-1)*this.pageSize+1,t=Math.min(this.filteredRows.length,e+this.pageSize-1);return`${e}${t} van ${this.filteredRows.length} gefilterde registraties (${this.dataRows.length} totaal).`}shpFileChanged(e){this.sourceType="shp",this.shpFile=e,this.loadData()}dbfFileChanged(e){this.dbfFile=e,this.sourceType==="shp"&&this.loadData()}geoJsonFileChanged(e){this.sourceType="geojson",this.geoJsonFile=e,this.loadData()}onFilterChange(){this.applyFilters()}onPageSizeChange(e){const t=typeof e=="number"?e:Number(e);Number.isFinite(t)&&this.pageSizeOptions.includes(t)&&(this.pageSize=t,this.currentPage=1,this.updatePageRows())}goToPage(e){const t=Math.min(Math.max(e,1),this.pageCount);t!==this.currentPage&&(this.currentPage=t,this.updatePageRows())}changePage(e){this.goToPage(this.currentPage+e)}resetFilters(){this.filters={text:"",from:"",to:"",onlyWithDate:!1,boundsEnabled:!1},this.boundsFromData&&(this.boundsInput={...this.boundsFromData}),this.applyFilters()}async exportCsv(){if(!this.filteredRows.length)return;const e=["x","y","date",...this.attributeColumns],t=[e.join(",")];for(const n of this.filteredRows){const r=e.map(o=>this.csvEscape(this.getValue(n,o)));t.push(r.join(","))}const s=new Blob([t.join(`
`)],{type:"text/csv"});this.downloadBlob(s,"registraties.csv")}async exportExcel(){if(!this.filteredRows.length)return;const e=["#","x","y","date",...this.attributeColumns],t=this.filteredRows.map((r,o)=>[(o+1).toString(),r.x,r.y,r.date??"",...this.attributeColumns.map(a=>this.formatValue(r.attributes[a]))]),s=this.buildXlsx([e,...t],"Registraties"),n=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});this.downloadBlob(n,"registraties.xlsx")}async exportGeoJson(){if(!this.filteredRows.length)return;const t={type:"FeatureCollection",features:this.filteredRows.map(n=>({type:"Feature",geometry:{type:"Point",coordinates:[n.x,n.y]},properties:{...n.attributes,date:n.date,source:n.source}}))},s=new Blob([JSON.stringify(t,null,2)],{type:"application/json"});this.downloadBlob(s,"registraties.geojson")}googleMapsUrl(e){const{lon:t,lat:s}=this.toWgs(e);if(!Number.isFinite(s)||!Number.isFinite(t))return"#";const n=s.toFixed(6),r=t.toFixed(6);return`https://www.google.com/maps?q=${n},${r}`}obsUrl(e){const t=this.formatValue(e).trim();if(!t)return"#";let s=t;return s.startsWith("//")?s=`https:${s}`:/^https?:\/\//i.test(s)?/^http:\/\//i.test(s)&&(s=s.replace(/^http:\/\//i,"https://")):s=`https://${s.replace(/^https?:\/\//i,"")}`,s}obsLabel(e){const t=this.formatValue(e).trim();if(!t)return"-";try{return new URL(this.obsUrl(t)).hostname}catch{return t}}async loadData(){if(!this.shpFile&&!this.geoJsonFile){this.resetData();return}this.setBusy(!0),this.loadError=null;try{this.sourceType==="geojson"&&this.geoJsonFile?await this.loadGeoJson():this.shpFile&&await this.loadShapefile(),this.applyFilters()}catch(e){console.error("Kon data niet laden",e),this.loadError="Kon data niet laden. Controleer het bestand en probeer opnieuw.",this.resetData()}finally{this.setBusy(!1)}}async loadShapefile(){if(!this.shpFile)return;const e=await this.shpFile.arrayBuffer(),t=y_(e);let s=null;if(this.dbfFile)try{const r=await this.dbfFile.arrayBuffer();s=$_(r),this.fieldsFromDbf=s.fields}catch(r){console.warn("DBF kon niet gelezen worden; attributen worden overgeslagen.",r),this.fieldsFromDbf=[]}else this.fieldsFromDbf=[];const n=t.points.map((r,o)=>{const a=r.recordIndex??o,c=s?.records[a]??{},l=this.pickDate(r,c);return{id:o+1,x:r.x,y:r.y,recordIndex:a,source:"shp",date:l,attributes:c}});this.dataRows=n,this.boundsFromData=t.bounds,this.boundsInput={...t.bounds},this.attributeColumns=this.deriveAttributeColumns(n,this.fieldsFromDbf),this.infoMessage=`${n.length} registraties ingelezen uit shapefile`}async loadGeoJson(){if(!this.geoJsonFile)return;const e=await this.geoJsonFile.text(),t=T_(e),s=t.points.map((n,r)=>{const o=n.attributes??{},a=this.pickDate(n,o);return{id:r+1,x:n.x,y:n.y,recordIndex:n.recordIndex,source:"geojson",date:a,attributes:o}});this.dataRows=s,this.boundsFromData=t.bounds,this.boundsInput={...t.bounds},this.attributeColumns=this.deriveAttributeColumns(s),this.infoMessage=`${s.length} registraties ingelezen uit GeoJSON`}applyFilters(){const{text:e,from:t,to:s,onlyWithDate:n,boundsEnabled:r}=this.filters,o=e.trim().toLowerCase(),a=r&&this.isValidBounds(this.boundsInput),c=this.dataRows.filter(h=>{const u=this.normalizeDate(h.date||h.attributes?.datm_start||h.attributes?.dateStart||h.attributes?.date);if(n&&!u||t&&u&&u<t||s&&u&&u>s)return!1;if(a){const{minX:d,minY:g,maxX:m,maxY:p}=this.boundsInput;if(h.x<d||h.x>m||h.y<g||h.y>p)return!1}return!(o&&!this.buildSearchHaystack(h).includes(o))}),l=this.sortByDate(c,this.filters.sortDate);this.filteredRows=l,this.currentPage=1,this.updatePageRows()}updatePageRows(){const e=(this.currentPage-1)*this.pageSize;this.pageRows=this.filteredRows.slice(e,e+this.pageSize)}sortByDate(e,t){return t==="none"?[...e]:[...e].sort((s,n)=>{const r=this.normalizeDate(s.date)??"",o=this.normalizeDate(n.date)??"";return r===o?0:t==="asc"?r<o?-1:1:r>o?-1:1})}toWgs(e){if(e.source==="geojson")return{lon:e.x,lat:e.y};const t={x:e.x,y:e.y},s=this.rdToWgs(t);return{lon:s.x,lat:s.y}}rdToWgs(e){const n=52.1551744,r=5.38720621,o=[[0,1,3235.65389],[2,0,-32.58297],[0,2,-.2475],[2,1,-.84978],[0,3,-.0655],[2,2,-.01709],[1,0,-.00738],[4,0,.0053],[2,3,-39e-5],[4,1,33e-5],[1,1,-12e-5]],a=[[1,0,5260.52916],[1,1,105.94684],[1,2,2.45656],[3,0,-.81885],[1,3,.05594],[3,1,-.05607],[0,1,.01199],[3,2,-.00256],[1,4,.00128],[0,2,22e-5],[2,0,-22e-5],[5,0,26e-5]],c=(e.x-155e3)/1e5,l=(e.y-463e3)/1e5;let h=n,u=r;for(const[d,g,m]of o)h+=m*Math.pow(c,d)*Math.pow(l,g)/3600;for(const[d,g,m]of a)u+=m*Math.pow(c,d)*Math.pow(l,g)/3600;return{x:u,y:h}}buildSearchHaystack(e){const t=[e.x.toString(),e.y.toString(),e.date??""];for(const s of Object.keys(e.attributes)){const n=e.attributes[s];t.push(s,this.formatValue(n))}return t.join(" ").toLowerCase()}deriveAttributeColumns(e,t=[]){const s=new Set(["datm_start","datm_stop","dateStart","dateStop","date"]),n=[];for(const r of t)!s.has(r.name)&&!n.includes(r.name)&&n.push(r.name);for(const r of e)Object.keys(r.attributes).forEach(o=>{!s.has(o)&&!n.includes(o)&&n.push(o)});return n}pickDate(e,t){const s=this.normalizeDate(e.dateStart||t?.datm_start||t?.dateStart||t?.start),n=this.normalizeDate(e.dateStop||t?.datm_stop||t?.dateStop||t?.stop);return s||n}normalizeDate(e){if(e==null)return null;if(e instanceof Date)return isNaN(e.getTime())?null:e.toISOString().slice(0,10);const t=String(e).trim();if(!t)return null;const s=t.replace(/\D/g,"");if(s.length===8){const r=`${s.slice(0,4)}-${s.slice(4,6)}-${s.slice(6,8)}`,o=new Date(r);return isNaN(o.getTime())?null:r}const n=new Date(t);return isNaN(n.getTime())?null:n.toISOString().slice(0,10)}isValidBounds(e){const t=e.maxX-e.minX,s=e.maxY-e.minY;return Number.isFinite(t)&&Number.isFinite(s)&&t>0&&s>0}getValue(e,t){switch(t){case"x":return e.x;case"y":return e.y;case"date":return e.date;default:return e.attributes[t]??null}}csvEscape(e){if(e==null)return"";const t=String(e);return/[",\n]/.test(t)?`"${t.replace(/"/g,'""')}"`:t}formatValue(e){return e==null?"":typeof e=="boolean"?e?"true":"false":typeof e=="number"?Number.isFinite(e)?e.toString():"":String(e)}buildXlsx(e,t){const s=this.buildSheetXml(e),n=this.buildWorkbookXml(t),r=this.buildWorkbookRels(),o=this.buildContentTypes(),a=this.buildRootRels(),c=[{path:"[Content_Types].xml",data:this.utf8(o)},{path:"_rels/.rels",data:this.utf8(a)},{path:"xl/workbook.xml",data:this.utf8(n)},{path:"xl/_rels/workbook.xml.rels",data:this.utf8(r)},{path:"xl/worksheets/sheet1.xml",data:this.utf8(s)}];return this.buildZip(c)}buildSheetXml(e){const t=(n,r)=>n.map((o,a)=>{const l=`${this.columnName(a+1)}${r}`;if(typeof o=="number"&&Number.isFinite(o))return`<c r="${l}"><v>${o}</v></c>`;const h=this.xmlEscape(String(o??""));return`<c r="${l}" t="inlineStr"><is><t>${h}</t></is></c>`}).join("");return`<?xml version="1.0" encoding="UTF-8"?>
<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">
  <sheetData>
    ${e.map((n,r)=>`<row r="${r+1}">${t(n,r+1)}</row>`).join("")}
  </sheetData>
</worksheet>`}buildWorkbookXml(e){return`<?xml version="1.0" encoding="UTF-8"?>
<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships">
  <sheets>
    <sheet name="${this.xmlEscape(e||"Sheet1")}" sheetId="1" r:id="rId1"/>
  </sheets>
</workbook>`}buildWorkbookRels(){return`<?xml version="1.0" encoding="UTF-8"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">
  <Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet1.xml"/>
</Relationships>`}buildContentTypes(){return`<?xml version="1.0" encoding="UTF-8"?>
<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">
  <Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/>
  <Default Extension="xml" ContentType="application/xml"/>
  <Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/>
  <Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/>
</Types>`}buildRootRels(){return`<?xml version="1.0" encoding="UTF-8"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">
  <Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/>
</Relationships>`}columnName(e){let t=e,s="";for(;t>0;){const n=(t-1)%26;s=String.fromCharCode(65+n)+s,t=Math.floor((t-1)/26)}return s}buildZip(e){const t=new TextEncoder;let s=0;const n=[],r=[];for(const h of e){const u=t.encode(h.path),d=this.crc32(h.data),g=h.data.length,m=new DataView(new ArrayBuffer(30));m.setUint32(0,67324752,!0),m.setUint16(4,20,!0),m.setUint16(6,0,!0),m.setUint16(8,0,!0),m.setUint16(10,0,!0),m.setUint16(12,0,!0),m.setUint32(14,d,!0),m.setUint32(18,g,!0),m.setUint32(22,g,!0),m.setUint16(26,u.length,!0),m.setUint16(28,0,!0);const p=this.concatBuffers([new Uint8Array(m.buffer),u,h.data]);n.push(p);const f=new DataView(new ArrayBuffer(46));f.setUint32(0,33639248,!0),f.setUint16(4,20,!0),f.setUint16(6,20,!0),f.setUint16(8,0,!0),f.setUint16(10,0,!0),f.setUint16(12,0,!0),f.setUint16(14,0,!0),f.setUint32(16,d,!0),f.setUint32(20,g,!0),f.setUint32(24,g,!0),f.setUint16(28,u.length,!0),f.setUint16(30,0,!0),f.setUint16(32,0,!0),f.setUint16(34,0,!0),f.setUint16(36,0,!0),f.setUint32(38,0,!0),f.setUint32(42,s,!0);const w=this.concatBuffers([new Uint8Array(f.buffer),u]);r.push(w),s+=p.length}const o=r.reduce((h,u)=>h+u.length,0),a=s,c=new DataView(new ArrayBuffer(22));return c.setUint32(0,101010256,!0),c.setUint16(4,0,!0),c.setUint16(6,0,!0),c.setUint16(8,e.length,!0),c.setUint16(10,e.length,!0),c.setUint32(12,o,!0),c.setUint32(16,a,!0),c.setUint16(20,0,!0),this.concatBuffers([...n,...r,new Uint8Array(c.buffer)])}concatBuffers(e){const t=e.reduce((r,o)=>r+o.length,0),s=new Uint8Array(t);let n=0;for(const r of e)s.set(r,n),n+=r.length;return s}utf8(e){return new TextEncoder().encode(e)}crc32(e){let t=-1;for(let s=0;s<e.length;s++)t=t>>>8^E_[(t^e[s])&255];return(t^-1)>>>0}xmlEscape(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/'/g,"&apos;")}downloadBlob(e,t){const s=URL.createObjectURL(e),n=document.createElement("a");n.href=s,n.download=t,n.click(),URL.revokeObjectURL(s)}resetData(){this.dataRows=[],this.filteredRows=[],this.pageRows=[],this.attributeColumns=[],this.boundsFromData=null,this.boundsInput={minX:0,minY:0,maxX:0,maxY:0},this.fieldsFromDbf=[],this.infoMessage=null,this.loadError=null}setBusy(e){this.isBusy=e,this.host?.classList?.toggle("is-busy",e),typeof document<"u"&&document.body&&(document.body.style.cursor=e?"progress":"default")}}lt=L_();Br(lt,5,"shpFile",ad,Ys);Br(lt,5,"dbfFile",od,Ys);Br(lt,5,"geoJsonFile",rd,Ys);Ys=Br(lt,0,"DataExtractorView",ld,Ys);Ps(lt,1,Ys);un.app(Ys).start();
//# sourceMappingURL=index-DHp6-Usn.js.map
